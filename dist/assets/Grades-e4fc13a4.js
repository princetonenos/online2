import{a as C,y as G,D,k as i,o as N,c as n,d as l,e as s,t as r,F as f,m as b,h as u,j as T}from"./index-ae66ec3f.js";const M={class:"p-6 max-w-7xl mx-auto"},P={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},U={class:"bg-white rounded-classroom classroom-shadow p-6 text-center"},B={class:"text-3xl font-medium text-classroom-gray-900"},E={class:"bg-white rounded-classroom classroom-shadow p-6 text-center"},F={class:"text-3xl font-medium text-classroom-gray-900"},V={class:"bg-white rounded-classroom classroom-shadow p-6 text-center"},I={class:"text-3xl font-medium text-classroom-gray-900"},L={class:"space-y-6"},Y={class:"p-4 border-b border-classroom-gray-200 flex items-center justify-between"},W={class:"text-xl font-medium text-classroom-gray-900"},q={class:"text-classroom-gray-600"},z={class:"text-right"},H={class:"text-2xl font-medium text-classroom-primary"},J={class:"divide-y divide-classroom-gray-100"},K={class:"flex items-center justify-between"},O={class:"flex-1"},Q={class:"font-medium text-classroom-gray-900 mb-1"},R={class:"text-sm text-classroom-gray-600 mb-2"},X={class:"flex items-center space-x-4 text-xs text-classroom-gray-500"},Z={class:"flex items-center space-x-1"},$={class:"flex items-center space-x-1"},ss={class:"text-right"},ts={class:"text-2xl font-medium text-classroom-primary"},es={class:"text-sm text-classroom-gray-600"},os={key:0,class:"mt-3 p-3 bg-classroom-primary bg-opacity-5 rounded-classroom"},rs={class:"text-sm text-classroom-gray-700"},as={key:0,class:"p-8 text-center text-classroom-gray-500"},ns={key:0,class:"text-center py-16"},ds={__name:"Grades",setup(ls){const h=C(),g=G(),d=D(),x=i(()=>h.currentUser),v=i(()=>x.value?g.getCoursesForUser(x.value.id):[]),c=i(()=>d.assignments.filter(e=>e.grade)),_=i(()=>d.assignments.filter(e=>e.submissionStatus==="submitted").length),w=i(()=>d.assignments.filter(e=>e.submissionStatus==="submitted"&&!e.grade).length),A=i(()=>{const e=c.value;if(e.length===0)return 0;const t=e.reduce((a,o)=>a+o.grade/o.points*100,0);return Math.round(t/e.length)}),p=i(()=>v.value.filter(e=>c.value.some(t=>t.courseId===e.id))),m=e=>c.value.filter(t=>t.courseId===e).sort((t,a)=>new Date(a.submittedAt)-new Date(t.submittedAt)),S=e=>{const t=m(e);if(t.length===0)return 0;const a=t.reduce((o,y)=>o+y.grade/y.points*100,0);return Math.round(a/t.length)},k=e=>e?new Date(e).toLocaleDateString():"";N(async()=>{try{await Promise.all([g.loadCourses(),d.loadAssignments()])}catch(e){console.error("Error loading grades data:",e),j("Error loading grades information")}});const j=e=>{window.showToast&&window.showToast(e)};return(e,t)=>(n(),l("div",M,[t[12]||(t[12]=s("div",{class:"mb-8"},[s("h1",{class:"text-3xl font-medium text-classroom-gray-900 mb-2"},"Grades"),s("p",{class:"text-classroom-gray-600"},"Your assignment grades and overall performance")],-1)),s("div",P,[s("div",U,[t[0]||(t[0]=s("div",{class:"w-16 h-16 bg-classroom-primary bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-3"},[s("span",{class:"material-icons text-classroom-primary text-2xl"},"grade")],-1)),t[1]||(t[1]=s("p",{class:"text-sm text-classroom-gray-500 mb-1"},"Average Grade",-1)),s("p",B,r(A.value)+"%",1)]),s("div",E,[t[2]||(t[2]=s("div",{class:"w-16 h-16 bg-classroom-secondary bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-3"},[s("span",{class:"material-icons text-classroom-secondary text-2xl"},"assignment_turned_in")],-1)),t[3]||(t[3]=s("p",{class:"text-sm text-classroom-gray-500 mb-1"},"Assignments Submitted",-1)),s("p",F,r(_.value),1)]),s("div",V,[t[4]||(t[4]=s("div",{class:"w-16 h-16 bg-classroom-support bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-3"},[s("span",{class:"material-icons text-classroom-support text-2xl"},"pending")],-1)),t[5]||(t[5]=s("p",{class:"text-sm text-classroom-gray-500 mb-1"},"Pending Grading",-1)),s("p",I,r(w.value),1)])]),s("div",L,[(n(!0),l(f,null,b(p.value,a=>(n(),l("div",{key:a.id,class:"bg-white rounded-classroom classroom-shadow overflow-hidden"},[s("div",Y,[s("div",null,[s("h2",W,r(a.name),1),s("p",q,r(a.teacherName),1)]),s("div",z,[s("p",H,r(S(a.id))+"%",1),t[6]||(t[6]=s("p",{class:"text-sm text-classroom-gray-600"},"Course Average",-1))])]),s("div",J,[(n(!0),l(f,null,b(m(a.id),o=>(n(),l("div",{key:o.id,class:"p-4 hover:bg-classroom-gray-50 transition-colors"},[s("div",K,[s("div",O,[s("h3",Q,r(o.title),1),s("p",R,r(o.description),1),s("div",X,[s("span",Z,[t[7]||(t[7]=s("span",{class:"material-icons text-sm"},"schedule",-1)),s("span",null,"Submitted "+r(k(o.submittedAt)),1)]),s("span",$,[t[8]||(t[8]=s("span",{class:"material-icons text-sm"},"grade",-1)),s("span",null,r(o.points)+" points",1)])])]),s("div",ss,[s("p",ts,r(o.grade)+"/"+r(o.points),1),s("p",es,r(Math.round(o.grade/o.points*100))+"%",1)])]),o.feedback?(n(),l("div",os,[s("p",rs,[t[9]||(t[9]=s("strong",null,"Teacher feedback:",-1)),T(" "+r(o.feedback),1)])])):u("",!0)]))),128))]),m(a.id).length===0?(n(),l("div",as,[...t[10]||(t[10]=[s("span",{class:"material-icons text-4xl mb-2 opacity-50"},"grade",-1),s("p",null,"No graded assignments yet",-1)])])):u("",!0)]))),128))]),p.value.length===0?(n(),l("div",ns,[...t[11]||(t[11]=[s("div",{class:"w-24 h-24 bg-classroom-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[s("span",{class:"material-icons text-classroom-gray-400 text-4xl"},"grade")],-1),s("h3",{class:"text-xl font-medium text-classroom-gray-900 mb-2"},"No grades yet",-1),s("p",{class:"text-classroom-gray-600 mb-6"},"Your grades will appear here once assignments are graded",-1)])])):u("",!0)]))}};export{ds as default};
