import{_ as se,q as ae,u as le,c as h,r as i,o as oe,a as o,b as r,e,t as n,n as d,D as a,h as C,F as b,g as w,f as _,v as ne,I as re,l as O,w as ie,C as B,O as de}from"./index-0bf52f7e.js";import{u as ue,V as ce}from"./VideoTile-7562c648.js";const ve={class:"h-screen bg-gray-900 flex flex-col"},fe={class:"bg-gray-800 text-white px-4 py-3 border-b border-gray-700"},xe={class:"flex items-center justify-between"},ge={class:"flex items-center space-x-4"},me={class:"text-lg font-semibold"},pe={class:"text-sm text-gray-300"},ye={class:"flex items-center space-x-3"},he={key:0,class:"bg-red-500 text-white px-4 py-3 flex items-center justify-between"},be={class:"flex items-center space-x-2"},we={class:"flex-1 overflow-hidden flex"},Ce={class:"flex-1 p-4"},_e={key:0,class:"w-80 bg-gray-800 border-l border-gray-700 flex flex-col"},ke={class:"p-4 border-b border-gray-700 flex items-center justify-between"},Me={class:"flex-1 overflow-y-auto p-4 space-y-3"},Se={class:"font-medium text-gray-300"},Re={class:"text-gray-400"},je={class:"p-4 border-t border-gray-700"},Te={class:"bg-gray-800 border-t border-gray-700 py-4"},De={class:"flex items-center justify-center space-x-4"},Le={class:"material-icons"},Ve={class:"text-xs"},Ie={class:"material-icons"},Ue={class:"text-xs"},$e={class:"text-xs"},He={class:"bg-gray-800 rounded-lg p-6 max-w-md w-full"},Oe={class:"space-y-4"},Be=["value"],qe=["value"],ze={class:"mt-6 flex justify-end"},Fe={__name:"LiveClass",setup(Ne){const q=ae(),z=le(),{localStream:F,isCameraOn:c,isMicrophoneOn:v,isScreenSharing:Ee,connectionError:k,connectionQuality:M,cameras:S,microphones:R,selectedCamera:N,selectedMicrophone:E,startLocalStream:j,toggleCamera:T,toggleMicrophone:D,getMediaDevices:J,switchCamera:K,switchMicrophone:Q}=ue();h(()=>q.params.id);const W=i("Live Class Session"),f=i(JSON.parse(localStorage.getItem("mock:currentUser")||"{}")),u=i(!1),p=i(!1),y=i(!1),x=i(""),L=i([]),g=i(""),m=i(""),V=i([{id:"teacher1",name:"Mr. Johnson",role:"teacher",audio:!0,video:!0,handRaised:!1},{id:"student2",name:"Sarah Miller",role:"student",audio:!0,video:!1,handRaised:!1},{id:"student3",name:"Tom Wilson",role:"student",audio:!1,video:!0,handRaised:!1}]),I=h(()=>[{id:f.value.id||"current",name:f.value.name||"You",role:"student",audio:v.value,video:c.value,handRaised:u.value},...V.value]),Y=h(()=>{const l=I.value.length;return l<=2?"grid-cols-1":l<=4?"grid-cols-2":l<=6?"grid-cols-3":"grid-cols-3 lg:grid-cols-4"}),A=h(()=>{const l=M.value.toLowerCase();return l==="excellent"?"text-green-400":l==="good"?"text-blue-400":l==="fair"?"text-yellow-400":"text-red-400"});function P(){u.value=!u.value,U(u.value?"Hand raised":"Hand lowered")}function G(){x.value.trim()&&(L.value.push({id:Date.now(),user:{name:f.value.name||"You"},text:x.value.trim()}),x.value="")}async function X(){try{await j()}catch(l){console.error("Retry failed:",l)}}async function Z(){g.value&&await K(g.value)}async function ee(){m.value&&await Q(m.value)}function te(){confirm("Are you sure you want to leave the class?")&&z.push({name:"StudentDashboard"})}oe(async()=>{try{await J(),g.value=N.value,m.value=E.value,await j(),U("Connected to live class")}catch(l){console.error("Failed to initialize:",l)}});function U(l){window.showToast?window.showToast(l):console.log("Toast:",l)}return(l,t)=>(o(),r("div",ve,[e("div",fe,[e("div",xe,[e("div",ge,[t[10]||(t[10]=e("span",{class:"material-icons text-green-400"},"videocam",-1)),e("h1",me,n(W.value),1),e("span",pe,n(V.value.length)+" participants",1)]),e("div",ye,[e("span",{class:d(["text-sm",A.value])},n(a(M)),3),e("button",{onClick:te,class:"px-4 py-2 bg-red-500 hover:bg-red-600 rounded text-sm font-medium"}," Leave ")])])]),a(k)?(o(),r("div",he,[e("div",be,[t[11]||(t[11]=e("span",{class:"material-icons"},"error",-1)),e("span",null,n(a(k)),1)]),e("button",{onClick:X,class:"underline"},"Retry")])):C("",!0),e("div",we,[e("div",Ce,[e("div",{class:d(["h-full grid gap-3",Y.value])},[(o(!0),r(b,null,w(I.value,s=>{var $,H;return o(),O(ce,{key:s.id,participant:s,stream:s.id===(($=f.value)==null?void 0:$.id)?a(F):null,"is-local-stream":s.id===((H=f.value)==null?void 0:H.id),"can-control":!1,"show-connection-quality":!0},null,8,["participant","stream","is-local-stream"])}),128))],2)]),p.value?(o(),r("div",_e,[e("div",ke,[t[13]||(t[13]=e("h3",{class:"font-semibold text-white"},"Chat",-1)),e("button",{onClick:t[0]||(t[0]=s=>p.value=!1),class:"text-gray-400 hover:text-white"},[...t[12]||(t[12]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",Me,[(o(!0),r(b,null,w(L.value,s=>(o(),r("div",{key:s.id,class:"text-sm"},[e("div",Se,n(s.user.name),1),e("div",Re,n(s.text),1)]))),128))]),e("div",je,[_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),onKeyup:re(G,["enter"]),type:"text",placeholder:"Type a message...",class:"w-full px-3 py-2 bg-gray-700 text-white rounded"},null,544),[[ne,x.value]])])])):C("",!0)]),e("div",Te,[e("div",De,[e("button",{onClick:t[2]||(t[2]=(...s)=>a(D)&&a(D)(...s)),class:d(["flex flex-col items-center space-y-1",a(v)?"text-white":"text-red-400"])},[e("div",{class:d(["w-12 h-12 rounded-full flex items-center justify-center",a(v)?"bg-gray-600 hover:bg-gray-500":"bg-red-500 hover:bg-red-600"])},[e("span",Le,n(a(v)?"mic":"mic_off"),1)],2),e("span",Ve,n(a(v)?"Mute":"Unmute"),1)],2),e("button",{onClick:t[3]||(t[3]=(...s)=>a(T)&&a(T)(...s)),class:d(["flex flex-col items-center space-y-1",a(c)?"text-white":"text-red-400"])},[e("div",{class:d(["w-12 h-12 rounded-full flex items-center justify-center",a(c)?"bg-gray-600 hover:bg-gray-500":"bg-red-500 hover:bg-red-600"])},[e("span",Ie,n(a(c)?"videocam":"videocam_off"),1)],2),e("span",Ue,n(a(c)?"Stop Video":"Start Video"),1)],2),e("button",{onClick:P,class:d(["flex flex-col items-center space-y-1",u.value?"text-yellow-400":"text-white"])},[e("div",{class:d(["w-12 h-12 rounded-full flex items-center justify-center",u.value?"bg-yellow-500 hover:bg-yellow-600 animate-pulse":"bg-gray-600 hover:bg-gray-500"])},[...t[14]||(t[14]=[e("span",{class:"material-icons"},"front_hand",-1)])],2),e("span",$e,n(u.value?"Lower Hand":"Raise Hand"),1)],2),e("button",{onClick:t[4]||(t[4]=s=>p.value=!p.value),class:"flex flex-col items-center space-y-1 text-white"},[...t[15]||(t[15]=[e("div",{class:"w-12 h-12 rounded-full bg-gray-600 hover:bg-gray-500 flex items-center justify-center"},[e("span",{class:"material-icons"},"chat")],-1),e("span",{class:"text-xs"},"Chat",-1)])]),e("button",{onClick:t[5]||(t[5]=s=>y.value=!0),class:"flex flex-col items-center space-y-1 text-white"},[...t[16]||(t[16]=[e("div",{class:"w-12 h-12 rounded-full bg-gray-600 hover:bg-gray-500 flex items-center justify-center"},[e("span",{class:"material-icons"},"settings")],-1),e("span",{class:"text-xs"},"Settings",-1)])])])]),(o(),O(de,{to:"body"},[y.value?(o(),r("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t[9]||(t[9]=ie(s=>y.value=!1,["self"]))},[e("div",He,[t[19]||(t[19]=e("h3",{class:"text-xl font-bold text-white mb-4"},"Device Settings",-1)),e("div",Oe,[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm text-gray-300 mb-2"},"Camera",-1)),_(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>g.value=s),onChange:Z,class:"w-full px-3 py-2 bg-gray-700 text-white rounded"},[(o(!0),r(b,null,w(a(S),s=>(o(),r("option",{key:s.deviceId,value:s.deviceId},n(s.label||`Camera ${a(S).indexOf(s)+1}`),9,Be))),128))],544),[[B,g.value]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm text-gray-300 mb-2"},"Microphone",-1)),_(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>m.value=s),onChange:ee,class:"w-full px-3 py-2 bg-gray-700 text-white rounded"},[(o(!0),r(b,null,w(a(R),s=>(o(),r("option",{key:s.deviceId,value:s.deviceId},n(s.label||`Microphone ${a(R).indexOf(s)+1}`),9,qe))),128))],544),[[B,m.value]])])]),e("div",ze,[e("button",{onClick:t[8]||(t[8]=s=>y.value=!1),class:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded"}," Done ")])])])):C("",!0)]))]))}},Qe=se(Fe,[["__file","/Users/mac/Development/startups/online2/src/views/student/LiveClass.vue"]]);export{Qe as default};
