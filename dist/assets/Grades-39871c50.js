import{_ as R,u as O,G as Y,K as z,M as K,r as E,c as l,o as W,a as i,b as u,l as q,y as H,e as t,t as a,F as I,g as D,D as J,h as v,n as Q}from"./index-e0178975.js";import{e as X}from"./exportHelpers-5714f3fc.js";import{L as Z}from"./LoadingSpinner-b40f773f.js";import{E as ss}from"./ErrorAlert-602817cc.js";/* empty css                                                                       *//* empty css                                                                   */const ts={class:"p-6 max-w-7xl mx-auto"},es={key:1},os={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},rs={class:"bg-gradient-to-br from-white to-blue-50 rounded-classroom classroom-shadow p-6 text-center border border-blue-100"},ns={class:"text-3xl font-bold text-classroom-gray-900"},as={class:"text-xs text-classroom-gray-500 mt-1"},ls={class:"bg-gradient-to-br from-white to-green-50 rounded-classroom classroom-shadow p-6 text-center border border-green-100"},is={class:"text-3xl font-bold text-classroom-gray-900"},ds={class:"bg-gradient-to-br from-white to-yellow-50 rounded-classroom classroom-shadow p-6 text-center border border-yellow-100"},us={class:"text-3xl font-bold text-classroom-gray-900"},cs={class:"bg-gradient-to-br from-white to-purple-50 rounded-classroom classroom-shadow p-6 text-center border border-purple-100"},ms={class:"text-3xl font-bold text-classroom-gray-900"},gs={class:"text-xs text-classroom-gray-500 mt-1"},xs={class:"space-y-6"},ps={class:"p-4 border-b border-classroom-gray-200 bg-gradient-to-r from-blue-50 to-purple-50"},bs={class:"flex items-center justify-between"},fs={class:"text-xl font-medium text-classroom-gray-900"},ys={class:"text-classroom-gray-600"},vs={class:"text-right"},hs={class:"text-2xl font-bold text-classroom-primary"},_s={class:"text-sm text-classroom-gray-600"},ws={class:"divide-y divide-classroom-gray-100"},Gs={class:"flex items-center justify-between"},ks={class:"flex-1"},As={class:"flex items-center space-x-2 mb-1"},Ps={class:"font-medium text-classroom-gray-900"},Cs={class:"text-sm text-classroom-gray-600 mb-2"},Ss={class:"flex items-center space-x-4 text-xs text-classroom-gray-500"},Es={class:"flex items-center space-x-1"},Is={class:"flex items-center space-x-1"},Ds={class:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full font-medium"},Fs={class:"text-right ml-4"},Ls={class:"text-3xl font-bold text-classroom-primary"},Ts={class:"text-sm text-classroom-gray-600"},js={key:0,class:"mt-3 p-3 bg-blue-50 rounded-classroom border border-blue-200"},Ms={class:"flex items-start space-x-2"},Ns={class:"flex-1"},Bs={class:"text-sm text-classroom-gray-700"},Us={key:0,class:"p-8 text-center text-classroom-gray-500"},Vs={key:0,class:"text-center py-16"},$s={__name:"Grades",setup(Rs){const h=O(),F=Y(),_=z(),d=K(),f=E(!1),p=E(null),m=l(()=>F.currentUser),L=l(()=>m.value?_.getCoursesForUser(m.value.id):[]),c=l(()=>d.submissions.filter(e=>{var s;return e.studentId===((s=m.value)==null?void 0:s.id)&&e.grade})),w=l(()=>c.value.length),T=l(()=>d.submissions.filter(e=>{var s;return e.studentId===((s=m.value)==null?void 0:s.id)&&e.status==="submitted"&&!e.grade}).length),G=l(()=>{const e=c.value;if(e.length===0)return 0;let s=0,o=0;return e.forEach(r=>{const n=d.assignments.find(x=>x.id===r.assignmentId);n&&n.points>0&&(s+=r.grade/n.points*100,o++)}),o>0?Math.round(s/o):0}),k=l(()=>{const e=c.value;if(e.length===0)return"0.00";let s=0,o=0;return e.forEach(r=>{const n=d.assignments.find(x=>x.id===r.assignmentId);if(n&&n.points>0){const x=r.grade/n.points*100;s+=B(x),o++}}),o>0?(s/o).toFixed(2):"0.00"}),A=l(()=>c.value.reduce((e,s)=>e+s.grade,0)),P=l(()=>{let e=0;return c.value.forEach(s=>{const o=d.assignments.find(r=>r.id===s.assignmentId);o&&(e+=o.points)}),e}),y=l(()=>L.value.filter(e=>c.value.some(s=>{const o=d.assignments.find(r=>r.id===s.assignmentId);return o&&o.courseId===e.id}))),g=e=>{const s=[];return c.value.forEach(o=>{const r=d.assignments.find(n=>n.id===o.assignmentId);r&&r.courseId===e&&s.push({assignment:r,submission:o})}),s.sort((o,r)=>new Date(r.submission.returnedAt||r.submission.submittedAt)-new Date(o.submission.returnedAt||o.submission.submittedAt))},j=e=>{const s=g(e);if(s.length===0)return 0;const o=s.reduce((r,n)=>r+n.submission.grade/n.assignment.points*100,0);return Math.round(o/s.length)},M=e=>g(e).length,C=(e,s)=>{const o=e/s*100;return o>=90?"A":o>=80?"B":o>=70?"C":o>=60?"D":"F"},N=(e,s)=>{const o=e/s*100;return o>=90?"bg-green-100 text-green-700":o>=80?"bg-blue-100 text-blue-700":o>=70?"bg-yellow-100 text-yellow-700":o>=60?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"},B=e=>e>=93?4:e>=90?3.7:e>=87?3.3:e>=83?3:e>=80?2.7:e>=77?2.3:e>=73?2:e>=70?1.7:e>=67?1.3:e>=65?1:0,b=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",U=()=>{var s;const e=[];y.value.forEach(o=>{g(o.id).forEach(n=>{e.push({Course:o.name,Assignment:n.assignment.title,"Points Earned":n.submission.grade,"Points Possible":n.assignment.points,Percentage:Math.round(n.submission.grade/n.assignment.points*100)+"%","Letter Grade":C(n.submission.grade,n.assignment.points),Submitted:b(n.submission.submittedAt),Graded:b(n.submission.returnedAt),Feedback:n.submission.feedback||"No feedback"})})}),e.push({}),e.push({Course:"OVERALL SUMMARY",Assignment:`Total: ${w.value} assignments`,"Points Earned":A.value,"Points Possible":P.value,Percentage:G.value+"%","Letter Grade":`GPA: ${k.value}`,Submitted:"",Graded:"",Feedback:""}),X(e,`grades_${(s=m.value)==null?void 0:s.name}_${new Date().toISOString().split("T")[0]}`),V("Grades exported successfully!")},S=async()=>{f.value=!0,p.value=null;try{await Promise.all([_.loadCourses(),d.loadAssignments()]),d.loadFromStorage()}catch(e){p.value="Failed to load grades. Please try again.",console.error("Error loading grades data:",e)}finally{f.value=!1}};W(()=>{S()});const V=e=>{window.showToast&&window.showToast(e)},$=()=>{h.back()};return(e,s)=>(i(),u("div",ts,[f.value?(i(),q(Z,{key:0,message:"Loading your grades..."})):(i(),u("div",es,[H(ss,{error:p.value,retry:!0,onDismiss:s[0]||(s[0]=o=>p.value=null),onRetry:S},null,8,["error"]),t("div",{class:"mb-8"},[t("div",{class:"flex items-center mb-4"},[t("button",{onClick:$,class:"flex items-center space-x-2 text-classroom-gray-600 hover:text-classroom-primary transition-colors mb-2"},[...s[2]||(s[2]=[t("span",{class:"material-icons"},"arrow_back",-1),t("span",null,"Back",-1)])])]),t("div",{class:"flex items-center justify-between"},[s[4]||(s[4]=t("div",null,[t("h1",{class:"text-3xl font-medium text-classroom-gray-900 mb-2"},"Grades"),t("p",{class:"text-classroom-gray-600"},"Your assignment grades and overall performance")],-1)),t("button",{onClick:U,class:"flex items-center space-x-2 px-4 py-2 bg-classroom-primary text-white rounded-classroom hover:bg-blue-700 transition-colors"},[...s[3]||(s[3]=[t("span",{class:"material-icons text-sm"},"download",-1),t("span",null,"Export Grades",-1)])])])]),t("div",os,[t("div",rs,[s[5]||(s[5]=t("div",{class:"w-16 h-16 bg-classroom-primary bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-3"},[t("span",{class:"material-icons text-classroom-primary text-2xl"},"grade")],-1)),s[6]||(s[6]=t("p",{class:"text-sm text-classroom-gray-500 mb-1"},"Average Grade",-1)),t("p",ns,a(G.value)+"%",1),t("p",as,"GPA: "+a(k.value),1)]),t("div",ls,[s[7]||(s[7]=t("div",{class:"w-16 h-16 bg-classroom-secondary bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-3"},[t("span",{class:"material-icons text-classroom-secondary text-2xl"},"assignment_turned_in")],-1)),s[8]||(s[8]=t("p",{class:"text-sm text-classroom-gray-500 mb-1"},"Graded",-1)),t("p",is,a(w.value),1),s[9]||(s[9]=t("p",{class:"text-xs text-classroom-gray-500 mt-1"},"assignments",-1))]),t("div",ds,[s[10]||(s[10]=t("div",{class:"w-16 h-16 bg-yellow-600 bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-3"},[t("span",{class:"material-icons text-yellow-600 text-2xl"},"pending")],-1)),s[11]||(s[11]=t("p",{class:"text-sm text-classroom-gray-500 mb-1"},"Pending Grading",-1)),t("p",us,a(T.value),1),s[12]||(s[12]=t("p",{class:"text-xs text-classroom-gray-500 mt-1"},"assignments",-1))]),t("div",cs,[s[13]||(s[13]=t("div",{class:"w-16 h-16 bg-purple-600 bg-opacity-10 rounded-full flex items-center justify-center mx-auto mb-3"},[t("span",{class:"material-icons text-purple-600 text-2xl"},"trending_up")],-1)),s[14]||(s[14]=t("p",{class:"text-sm text-classroom-gray-500 mb-1"},"Total Points",-1)),t("p",ms,a(A.value),1),t("p",gs,"of "+a(P.value),1)])]),t("div",xs,[(i(!0),u(I,null,D(y.value,o=>(i(),u("div",{key:o.id,class:"bg-white rounded-classroom classroom-shadow overflow-hidden"},[t("div",ps,[t("div",bs,[t("div",null,[t("h2",fs,a(o.name),1),t("p",ys,a(o.teacherName),1)]),t("div",vs,[t("p",hs,a(j(o.id))+"%",1),t("p",_s,a(M(o.id))+" graded",1)])])]),t("div",ws,[(i(!0),u(I,null,D(g(o.id),r=>(i(),u("div",{key:r.submission.id,class:"p-4 hover:bg-classroom-gray-50 transition-colors"},[t("div",Gs,[t("div",ks,[t("div",As,[t("h3",Ps,a(r.assignment.title),1),t("span",{class:Q(["px-2 py-0.5 rounded-full text-xs font-medium",N(r.submission.grade,r.assignment.points)])},a(C(r.submission.grade,r.assignment.points)),3)]),t("p",Cs,a(r.assignment.description||"No description"),1),t("div",Ss,[t("span",Es,[s[15]||(s[15]=t("span",{class:"material-icons text-sm"},"schedule",-1)),t("span",null,"Submitted "+a(b(r.submission.submittedAt)),1)]),t("span",Is,[s[16]||(s[16]=t("span",{class:"material-icons text-sm"},"event",-1)),t("span",null,"Graded "+a(b(r.submission.returnedAt)),1)]),t("span",Ds,a(r.assignment.points)+" points possible ",1)])]),t("div",Fs,[t("p",Ls,a(r.submission.grade),1),t("p",Ts,a(Math.round(r.submission.grade/r.assignment.points*100))+"%",1)])]),r.submission.feedback?(i(),u("div",js,[t("div",Ms,[s[18]||(s[18]=t("span",{class:"material-icons text-blue-600 text-sm mt-0.5"},"feedback",-1)),t("div",Ns,[s[17]||(s[17]=t("p",{class:"text-xs font-medium text-blue-900 mb-1"},"Teacher Feedback",-1)),t("p",Bs,a(r.submission.feedback),1)])])])):v("",!0)]))),128))]),g(o.id).length===0?(i(),u("div",Us,[...s[19]||(s[19]=[t("span",{class:"material-icons text-4xl mb-2 opacity-50"},"grade",-1),t("p",null,"No graded assignments yet",-1)])])):v("",!0)]))),128))]),y.value.length===0?(i(),u("div",Vs,[s[20]||(s[20]=t("div",{class:"w-24 h-24 bg-classroom-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[t("span",{class:"material-icons text-classroom-gray-400 text-4xl"},"grade")],-1)),s[21]||(s[21]=t("h3",{class:"text-xl font-medium text-classroom-gray-900 mb-2"},"No grades yet",-1)),s[22]||(s[22]=t("p",{class:"text-classroom-gray-600 mb-6"},"Your grades will appear here once assignments are graded",-1)),t("button",{onClick:s[1]||(s[1]=o=>J(h).push("/student/classwork")),class:"px-6 py-2 bg-classroom-primary text-white rounded-classroom hover:bg-blue-700 transition-colors"}," View Assignments ")])):v("",!0)]))]))}},Hs=R($s,[["__file","/home/buddy/GCO/src/views/student/Grades.vue"]]);export{Hs as default};
