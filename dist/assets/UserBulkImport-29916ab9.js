import{_ as L,r as v,c as S,o as J,a as i,b as d,e,w as j,n as C,t as o,h as O,d as y,f as u,j as p,C as w,F as D,g as U}from"./index-d2bf20c5.js";const H={class:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6"},G={class:"mb-8"},W={class:"flex items-center justify-between"},$={class:"flex items-center space-x-4"},z={class:"max-w-6xl mx-auto"},K={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Q={class:"lg:col-span-2 space-y-6"},X={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},Y={key:0,class:"mt-6 p-4 bg-green-50 rounded-classroom border border-green-200"},Z={class:"flex items-center justify-between"},ee={class:"flex items-center space-x-3"},te={class:"font-medium text-gray-900"},se={class:"text-sm text-gray-600"},ae={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oe={class:"space-y-4"},re={class:"space-y-3"},ne={class:"flex items-center justify-between p-4 bg-gray-50 rounded-classroom cursor-pointer"},ie={class:"flex items-center space-x-3"},de={class:"flex items-center justify-between p-4 bg-gray-50 rounded-classroom cursor-pointer"},ue={class:"flex items-center space-x-3"},ce={class:"flex items-center justify-between p-4 bg-gray-50 rounded-classroom cursor-pointer"},me={class:"flex items-center space-x-3"},ve={class:"space-y-4"},pe={class:"space-y-3"},xe={class:"p-4 bg-gray-50 rounded-classroom"},ge={class:"p-4 bg-gray-50 rounded-classroom"},be={class:"p-4 bg-gray-50 rounded-classroom"},fe={class:"mt-6 pt-6 border-t border-gray-200"},ye={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},we={class:"flex items-center space-x-3 p-4 bg-gray-50 rounded-classroom cursor-pointer"},he={class:"flex items-center space-x-3 p-4 bg-gray-50 rounded-classroom cursor-pointer"},ke={class:"flex items-center space-x-3 p-4 bg-gray-50 rounded-classroom cursor-pointer"},_e={class:"flex items-center space-x-3 p-4 bg-gray-50 rounded-classroom cursor-pointer"},Se={class:"space-y-6"},je={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},Ce={class:"space-y-4"},De={key:0,class:"text-center py-8 text-gray-500"},Ue={key:1,class:"space-y-3"},Ve={class:"flex items-center justify-between text-sm"},Ie={class:"font-medium text-gray-900"},Fe={class:"flex items-center justify-between text-sm"},Be={class:"font-medium text-green-600"},Me={class:"flex items-center justify-between text-sm"},Pe={class:"font-medium text-red-600"},Re={class:"mt-4"},Ee={class:"bg-gray-50 rounded-classroom p-3 max-h-40 overflow-y-auto"},Ae={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},Ne={class:"space-y-3"},Te=["disabled"],qe=["disabled"],Le={class:"flex items-center space-x-3"},Je={key:0,class:"material-icons text-green-600 text-lg animate-spin"},Oe={key:1,class:"material-icons text-green-600 text-lg"},He={class:"text-left"},Ge={class:"font-medium text-gray-900"},We={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},$e={class:"space-y-3"},ze={class:"text-sm font-medium text-gray-900"},Ke={class:"text-xs text-gray-500"},Qe={class:"text-right"},Xe={class:"text-xs text-gray-500"},Ye={__name:"UserBulkImport",setup(Ze){const x=v(null),r=v(null),f=v(!1),g=v(!1),c=v([]),l=v({sendWelcomeEmail:!0,generatePasswords:!0,requirePasswordChange:!0,duplicateHandling:"skip",defaultStatus:"active",notificationMethod:"email",validateEmails:!0,checkDuplicates:!0,requireRole:!0,previewBeforeImport:!0}),h=v([{id:1,fileName:"students_spring_2024.csv",date:"2 days ago",status:"Completed",records:45},{id:2,fileName:"teachers_import.xlsx",date:"1 week ago",status:"Completed",records:12},{id:3,fileName:"admin_users.csv",date:"2 weeks ago",status:"Failed",records:0}]),b=S(()=>c.value.filter(a=>a.name&&a.email&&a.role).length),k=S(()=>c.value.length-b.value),V=()=>{var a;(a=x.value)==null||a.click()},I=a=>{const t=a.target.files[0];t&&(r.value=t,_(t))},F=a=>{a.preventDefault(),f.value=!1;const t=a.dataTransfer.files[0];t&&(t.type==="text/csv"||t.name.endsWith(".xlsx")||t.name.endsWith(".xls"))?(r.value=t,_(t)):n("Please upload a CSV or Excel file")},B=()=>{r.value=null,c.value=[],x.value&&(x.value.value="")},_=a=>{n(`Processing ${a.name}...`),setTimeout(()=>{c.value=[{name:"John Doe",email:"john@example.com",role:"teacher",grade_level:"High School",subject:"Mathematics"},{name:"Jane Smith",email:"jane@example.com",role:"student",grade_level:"Grade 10",subject:""},{name:"Admin User",email:"admin@example.com",role:"admin",grade_level:"",subject:""},{name:"Sarah Johnson",email:"sarah@example.com",role:"teacher",grade_level:"Middle School",subject:"Science"}],n("File processed successfully. Preview data loaded.")},1e3)},M=()=>{n("Validating data..."),setTimeout(()=>{b.value===c.value.length?n("All records are valid!"):n(`Found ${k.value} issues that need attention.`)},1500)},P=async()=>{g.value=!0,n("Starting bulk import process..."),setTimeout(()=>{g.value=!1,n(`Successfully imported ${b.value} users!`),h.value.unshift({id:Date.now(),fileName:r.value.name,date:"Just now",status:"Completed",records:b.value})},3e3)},R=()=>{r.value=null,c.value=[],x.value&&(x.value.value=""),n("Form cleared")},E=()=>{n("Downloading CSV template...");const a=`name,email,role,grade_level,subject
John Doe,john@example.com,teacher,High School,Mathematics
Jane Smith,jane@example.com,student,Grade 10,
Admin User,admin@example.com,admin,,`,t=new Blob([a],{type:"text/csv"}),s=window.URL.createObjectURL(t),m=document.createElement("a");m.href=s,m.download="user_import_template.csv",m.click(),window.URL.revokeObjectURL(s)},A=a=>{if(a===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(a)/Math.log(t));return parseFloat((a/Math.pow(t,m)).toFixed(2))+" "+s[m]},N=a=>({Completed:"text-green-600",Processing:"text-blue-600",Failed:"text-red-600",Pending:"text-yellow-600"})[a]||"text-gray-600",n=a=>{window.showToast?window.showToast(a):alert(a)},T=()=>{f.value=!0},q=()=>{f.value=!1};return J(()=>{document.addEventListener("dragenter",T),document.addEventListener("dragleave",q)}),(a,t)=>(i(),d("div",H,[e("div",G,[e("div",W,[t[14]||(t[14]=e("div",null,[e("h1",{class:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"}," Bulk User Import "),e("p",{class:"text-gray-600 mt-2"},"Import multiple users at once using CSV files or manual entry")],-1)),e("div",$,[e("button",{onClick:t[0]||(t[0]=s=>a.$router.back()),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-classroom transition-colors flex items-center space-x-2"},[...t[13]||(t[13]=[e("span",{class:"material-icons text-sm"},"arrow_back",-1),e("span",null,"Back",-1)])])])])]),e("div",z,[e("div",K,[e("div",Q,[e("div",X,[t[26]||(t[26]=e("div",{class:"flex items-center space-x-3 mb-6"},[e("div",{class:"w-8 h-8 bg-blue-100 rounded-classroom flex items-center justify-center"},[e("span",{class:"material-icons text-blue-600 text-sm"},"upload_file")]),e("h2",{class:"text-xl font-bold text-gray-900"},"CSV File Import")],-1)),e("div",{onDrop:F,onDragover:t[1]||(t[1]=j(()=>{},["prevent"])),onDragenter:t[2]||(t[2]=j(()=>{},["prevent"])),class:C(["border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:border-blue-400 transition-colors cursor-pointer bg-gray-50",{"border-blue-400 bg-blue-50":f.value}])},[e("input",{type:"file",ref_key:"fileInput",ref:x,onChange:I,accept:".csv,.xlsx,.xls",class:"hidden"},null,544),t[16]||(t[16]=e("div",{class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("span",{class:"material-icons text-blue-600 text-2xl"},"cloud_upload")],-1)),t[17]||(t[17]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Upload CSV File",-1)),t[18]||(t[18]=e("p",{class:"text-gray-600 mb-4"},"Drag & drop your file here or click to browse",-1)),e("button",{onClick:V,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-classroom transition-colors flex items-center space-x-2 mx-auto"},[...t[15]||(t[15]=[e("span",{class:"material-icons text-sm"},"folder_open",-1),e("span",null,"Browse Files",-1)])]),t[19]||(t[19]=e("p",{class:"text-xs text-gray-500 mt-4"},"Supported formats: CSV, Excel (.xlsx, .xls)",-1))],34),r.value?(i(),d("div",Y,[e("div",Z,[e("div",ee,[t[20]||(t[20]=e("div",{class:"w-10 h-10 bg-green-100 rounded-classroom flex items-center justify-center"},[e("span",{class:"material-icons text-green-600 text-lg"},"description")],-1)),e("div",null,[e("div",te,o(r.value.name),1),e("div",se,o(A(r.value.size)),1)])]),e("button",{onClick:B,class:"text-gray-400 hover:text-red-500 transition-colors"},[...t[21]||(t[21]=[e("span",{class:"material-icons text-lg"},"close",-1)])])])])):O("",!0),e("div",{class:"mt-6"},[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"CSV Template",-1)),e("div",{class:"bg-gray-50 rounded-classroom p-4"},[e("div",{class:"flex items-center justify-between mb-3"},[t[23]||(t[23]=e("span",{class:"text-sm font-medium text-gray-900"},"Required columns:",-1)),e("button",{onClick:E,class:"text-blue-600 hover:text-blue-800 text-sm flex items-center space-x-1"},[...t[22]||(t[22]=[e("span",{class:"material-icons text-sm"},"download",-1),e("span",null,"Download Template",-1)])])]),t[24]||(t[24]=y('<div class="bg-white rounded-classroom p-3 border" data-v-b237a014><code class="text-sm text-gray-700" data-v-b237a014> name,email,role,grade_level,subject<br data-v-b237a014> John Doe,john@example.com,teacher,High School,Mathematics<br data-v-b237a014> Jane Smith,jane@example.com,student,Grade 10,<br data-v-b237a014> Admin User,admin@example.com,admin,, </code></div><div class="mt-3 text-sm text-gray-600" data-v-b237a014><p data-v-b237a014><strong data-v-b237a014>Role options:</strong> teacher, student, admin</p><p data-v-b237a014><strong data-v-b237a014>Grade level:</strong> Optional for teachers/admins</p><p data-v-b237a014><strong data-v-b237a014>Subject:</strong> Optional for students</p></div>',2))])])]),e("div",ae,[t[43]||(t[43]=e("div",{class:"flex items-center space-x-3 mb-6"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-classroom flex items-center justify-center"},[e("span",{class:"material-icons text-purple-600 text-sm"},"settings")]),e("h2",{class:"text-xl font-bold text-gray-900"},"Import Settings")],-1)),e("div",le,[e("div",oe,[t[30]||(t[30]=e("h3",{class:"text-lg font-semibold text-gray-900"},"User Settings",-1)),e("div",re,[e("label",ne,[e("div",ie,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>l.value.sendWelcomeEmail=s),class:"w-4 h-4 text-blue-600 rounded"},null,512),[[p,l.value.sendWelcomeEmail]]),t[27]||(t[27]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Send Welcome Email"),e("div",{class:"text-sm text-gray-500"},"Send account creation notification")],-1))])]),e("label",de,[e("div",ue,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.generatePasswords=s),class:"w-4 h-4 text-blue-600 rounded"},null,512),[[p,l.value.generatePasswords]]),t[28]||(t[28]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Generate Passwords"),e("div",{class:"text-sm text-gray-500"},"Auto-generate secure passwords")],-1))])]),e("label",ce,[e("div",me,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=s=>l.value.requirePasswordChange=s),class:"w-4 h-4 text-blue-600 rounded"},null,512),[[p,l.value.requirePasswordChange]]),t[29]||(t[29]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Require Password Change"),e("div",{class:"text-sm text-gray-500"},"Force password change on first login")],-1))])])])]),e("div",ve,[t[37]||(t[37]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Import Options",-1)),e("div",pe,[e("div",xe,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Duplicate Handling",-1)),u(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.duplicateHandling=s),class:"w-full p-3 border border-gray-300 rounded-classroom focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"},[...t[31]||(t[31]=[e("option",{value:"skip"},"Skip duplicates",-1),e("option",{value:"update"},"Update existing users",-1),e("option",{value:"create"},"Create new accounts",-1)])],512),[[w,l.value.duplicateHandling]])]),e("div",ge,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Default Status",-1)),u(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.defaultStatus=s),class:"w-full p-3 border border-gray-300 rounded-classroom focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"},[...t[33]||(t[33]=[e("option",{value:"active"},"Active",-1),e("option",{value:"pending"},"Pending Approval",-1),e("option",{value:"inactive"},"Inactive",-1)])],512),[[w,l.value.defaultStatus]])]),e("div",be,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Notification Method",-1)),u(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.value.notificationMethod=s),class:"w-full p-3 border border-gray-300 rounded-classroom focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"},[...t[35]||(t[35]=[e("option",{value:"email"},"Email Only",-1),e("option",{value:"sms"},"SMS Only",-1),e("option",{value:"both"},"Email and SMS",-1),e("option",{value:"none"},"No Notification",-1)])],512),[[w,l.value.notificationMethod]])])])])]),e("div",fe,[t[42]||(t[42]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Validation Options",-1)),e("div",ye,[e("label",we,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=s=>l.value.validateEmails=s),class:"w-4 h-4 text-blue-600 rounded"},null,512),[[p,l.value.validateEmails]]),t[38]||(t[38]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Validate Email Format"),e("div",{class:"text-sm text-gray-500"},"Check for valid email addresses")],-1))]),e("label",he,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=s=>l.value.checkDuplicates=s),class:"w-4 h-4 text-blue-600 rounded"},null,512),[[p,l.value.checkDuplicates]]),t[39]||(t[39]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Check for Duplicates"),e("div",{class:"text-sm text-gray-500"},"Identify duplicate entries")],-1))]),e("label",ke,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=s=>l.value.requireRole=s),class:"w-4 h-4 text-blue-600 rounded"},null,512),[[p,l.value.requireRole]]),t[40]||(t[40]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Require Role"),e("div",{class:"text-sm text-gray-500"},"Role must be specified")],-1))]),e("label",_e,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=s=>l.value.previewBeforeImport=s),class:"w-4 h-4 text-blue-600 rounded"},null,512),[[p,l.value.previewBeforeImport]]),t[41]||(t[41]=e("div",null,[e("div",{class:"font-medium text-gray-900"},"Preview Before Import"),e("div",{class:"text-sm text-gray-500"},"Review data before processing")],-1))])])])])]),e("div",Se,[e("div",je,[t[49]||(t[49]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Import Preview",-1)),e("div",Ce,[c.value.length?(i(),d("div",Ue,[e("div",Ve,[t[45]||(t[45]=e("span",{class:"text-gray-600"},"Total Records",-1)),e("span",Ie,o(c.value.length),1)]),e("div",Fe,[t[46]||(t[46]=e("span",{class:"text-gray-600"},"Valid Records",-1)),e("span",Be,o(b.value),1)]),e("div",Me,[t[47]||(t[47]=e("span",{class:"text-gray-600"},"Issues Found",-1)),e("span",Pe,o(k.value),1)]),e("div",Re,[t[48]||(t[48]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Sample Data",-1)),e("div",Ee,[(i(!0),d(D,null,U(c.value.slice(0,3),(s,m)=>(i(),d("div",{key:m,class:"text-sm text-gray-700 border-b border-gray-200 py-1 last:border-0"},o(s.name)+" ("+o(s.email)+") - "+o(s.role),1))),128))])])])):(i(),d("div",De,[...t[44]||(t[44]=[e("div",{class:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4"},[e("span",{class:"material-icons text-gray-400 text-2xl"},"visibility")],-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No Preview Available",-1),e("p",{class:"text-gray-500"},"Upload a CSV file to see preview data",-1)])]))])]),e("div",Ae,[t[54]||(t[54]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4"},"Quick Actions",-1)),e("div",Ne,[e("button",{onClick:M,disabled:!r.value,class:"w-full flex items-center justify-between p-4 bg-blue-50 rounded-classroom hover:bg-blue-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[...t[50]||(t[50]=[y('<div class="flex items-center space-x-3" data-v-b237a014><span class="material-icons text-blue-600 text-lg" data-v-b237a014>check_circle</span><div class="text-left" data-v-b237a014><div class="font-medium text-gray-900" data-v-b237a014>Validate Data</div><div class="text-sm text-gray-600" data-v-b237a014>Check for errors and issues</div></div></div><span class="material-icons text-gray-400 text-lg" data-v-b237a014>chevron_right</span>',2)])],8,Te),e("button",{onClick:P,disabled:!r.value||g.value,class:"w-full flex items-center justify-between p-4 bg-green-50 rounded-classroom hover:bg-green-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[e("div",Le,[g.value?(i(),d("span",Je,"refresh")):(i(),d("span",Oe,"play_arrow")),e("div",He,[e("div",Ge,o(g.value?"Importing...":"Start Import"),1),t[51]||(t[51]=e("div",{class:"text-sm text-gray-600"},"Process the uploaded file",-1))])]),t[52]||(t[52]=e("span",{class:"material-icons text-gray-400 text-lg"},"chevron_right",-1))],8,qe),e("button",{onClick:R,class:"w-full flex items-center justify-between p-4 bg-red-50 rounded-classroom hover:bg-red-100 transition-colors"},[...t[53]||(t[53]=[y('<div class="flex items-center space-x-3" data-v-b237a014><span class="material-icons text-red-600 text-lg" data-v-b237a014>clear</span><div class="text-left" data-v-b237a014><div class="font-medium text-gray-900" data-v-b237a014>Clear All</div><div class="text-sm text-gray-600" data-v-b237a014>Reset form and data</div></div></div><span class="material-icons text-gray-400 text-lg" data-v-b237a014>chevron_right</span>',2)])])])]),t[56]||(t[56]=y('<div class="bg-white rounded-2xl shadow-xl border border-gray-100 p-6" data-v-b237a014><h2 class="text-xl font-bold text-gray-900 mb-4" data-v-b237a014>Import Statistics</h2><div class="space-y-3" data-v-b237a014><div class="flex items-center justify-between" data-v-b237a014><span class="text-sm text-gray-600" data-v-b237a014>Total Imports</span><span class="text-sm font-medium text-gray-900" data-v-b237a014>24</span></div><div class="flex items-center justify-between" data-v-b237a014><span class="text-sm text-gray-600" data-v-b237a014>Successful</span><span class="text-sm font-medium text-green-600" data-v-b237a014>22</span></div><div class="flex items-center justify-between" data-v-b237a014><span class="text-sm text-gray-600" data-v-b237a014>Failed</span><span class="text-sm font-medium text-red-600" data-v-b237a014>2</span></div><div class="flex items-center justify-between" data-v-b237a014><span class="text-sm text-gray-600" data-v-b237a014>Last Import</span><span class="text-sm font-medium text-gray-900" data-v-b237a014>2 days ago</span></div></div></div>',1)),e("div",We,[t[55]||(t[55]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"text-xl font-bold text-gray-900"},"Recent Imports"),e("button",{class:"text-sm text-blue-600 hover:text-blue-800"},"View All")],-1)),e("div",$e,[(i(!0),d(D,null,U(h.value,s=>(i(),d("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-classroom"},[e("div",null,[e("div",ze,o(s.fileName),1),e("div",Ke,o(s.date),1)]),e("div",Qe,[e("div",{class:C(["text-xs font-medium",N(s.status)])},o(s.status),3),e("div",Xe,o(s.records)+" records",1)])]))),128))])])])])])]))}},tt=L(Ye,[["__scopeId","data-v-b237a014"],["__file","/Users/mac/Development/startups/online2/src/views/admin/UserBulkImport.vue"]]);export{tt as default};
