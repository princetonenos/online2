import{_ as U,r as J,o as P,c,a as m,b as g,e as t,f as V,C as z,t as l,k as y,d as W,E as b,F as _,g as w,n as I}from"./index-0bf52f7e.js";import{u as Y}from"./teacherClasses-aac61536.js";const q={class:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6"},H={class:"mb-8"},K={class:"flex items-center justify-between"},Q={class:"flex items-center space-x-4"},X={class:"relative"},Z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},tt={class:"bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-xl border border-blue-100 p-6 transform hover:scale-105 transition-transform duration-300"},et={class:"flex items-center justify-between"},st={class:"text-3xl font-bold text-gray-900 mt-1"},at={class:"bg-gradient-to-br from-white to-green-50 rounded-2xl shadow-xl border border-green-100 p-6 transform hover:scale-105 transition-transform duration-300"},ot={class:"flex items-center justify-between"},nt={class:"text-3xl font-bold text-gray-900 mt-1"},rt={class:"text-blue-500 text-sm mt-2 flex items-center"},lt={class:"bg-gradient-to-br from-white to-purple-50 rounded-2xl shadow-xl border border-purple-100 p-6 transform hover:scale-105 transition-transform duration-300"},it={class:"flex items-center justify-between"},dt={class:"text-3xl font-bold text-gray-900 mt-1"},ct={class:"bg-gradient-to-br from-white to-orange-50 rounded-2xl shadow-xl border border-orange-100 p-6 transform hover:scale-105 transition-transform duration-300"},ut={class:"flex items-center justify-between"},mt={class:"text-3xl font-bold text-gray-900 mt-1"},gt={class:"grid grid-cols-1 xl:grid-cols-3 gap-8 mb-8"},xt={class:"space-y-6"},vt={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},ft={class:"space-y-4"},pt={class:"flex items-center justify-between"},bt={class:"text-right"},ht={class:"text-sm font-semibold text-gray-900"},yt={class:"w-20 bg-gray-200 rounded-full h-2 mt-1"},_t={class:"flex items-center justify-between"},wt={class:"text-right"},At={class:"text-sm font-semibold text-gray-900"},St={class:"w-20 bg-gray-200 rounded-full h-2 mt-1"},Ct={class:"flex items-center justify-between"},jt={class:"text-right"},Dt={class:"text-sm font-semibold text-gray-900"},Et={class:"w-20 bg-gray-200 rounded-full h-2 mt-1"},kt={class:"flex items-center justify-between"},$t={class:"text-right"},Gt={class:"text-sm font-semibold text-gray-900"},It={class:"w-20 bg-gray-200 rounded-full h-2 mt-1"},Nt={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},Tt={class:"space-y-3"},Ot={class:"flex items-center space-x-3"},Mt={class:"text-sm font-medium text-gray-900 truncate"},Rt={class:"text-right"},Bt={class:"text-sm font-semibold text-gray-900"},Lt={class:"w-16 bg-gray-200 rounded-full h-1.5 mt-1"},Ft={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Ut={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},Jt={class:"space-y-4"},Pt={class:"flex items-center space-x-3"},Vt={class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-classroom flex items-center justify-center text-white font-semibold text-sm"},zt={class:"text-sm font-medium text-gray-900"},Wt={class:"text-xs text-gray-500"},Yt={class:"text-right"},qt={class:"text-sm font-semibold text-gray-900"},Ht={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},Kt={class:"space-y-4"},Qt={class:"flex items-center space-x-3"},Xt={class:"w-10 h-10 bg-gradient-to-br from-green-500 to-teal-600 rounded-classroom flex items-center justify-center text-white font-semibold text-sm"},Zt={class:"text-sm font-medium text-gray-900"},te={class:"text-xs text-gray-500"},ee={class:"text-right"},se={class:"text-sm font-semibold text-green-600"},ae={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},oe={class:"space-y-4"},ne={class:"w-8 h-8 bg-blue-100 rounded-classroom flex items-center justify-center flex-shrink-0 mt-1"},re={class:"material-icons text-blue-600 text-sm"},le={class:"flex-1"},ie={class:"text-sm font-medium text-gray-900"},de={class:"text-xs text-gray-500 mt-1"},ce={class:"text-right flex-shrink-0"},ue={class:"text-xs text-gray-500"},me={__name:"Analytics",setup(ge){const h=Y(),N=JSON.parse(localStorage.getItem("mock:currentUser")||"{}"),f=J("30");P(()=>{h.fetchAll()});const p=c(()=>h.items.filter(o=>o.teacherId===N.id)),A=c(()=>h.getStudents().length),S=c(()=>p.value.filter(o=>o.status==="active"||o.status==="scheduled").length),C=c(()=>h.avgCompletion()),T=c(()=>p.value.filter(o=>o.status==="completed").length),j=c(()=>{const o=JSON.parse(localStorage.getItem("mock:assignments")||"[]");let e=0,s=0;return o.forEach(a=>{a.submissions&&a.submissions.forEach(n=>{n.grade!=null&&(e+=n.grade,s++)})}),s>0?Math.round(e/s):0}),d=c(()=>{const o=JSON.parse(localStorage.getItem("mock:assignments")||"[]"),e={A:0,B:0,C:0,DF:0};let s=0;return o.forEach(a=>{a.submissions&&a.submissions.forEach(n=>{n.grade!=null&&(s++,n.grade>=90?e.A++:n.grade>=80?e.B++:n.grade>=70?e.C++:e.DF++)})}),s>0&&(e.A=Math.round(e.A/s*100),e.B=Math.round(e.B/s*100),e.C=Math.round(e.C/s*100),e.DF=Math.round(e.DF/s*100)),e}),D=c(()=>JSON.parse(localStorage.getItem("mock:assignments")||"[]").slice(0,5).map(e=>{var i;const s=M(e.classId),a=((i=e.submissions)==null?void 0:i.length)||0,n=s>0?Math.round(a/s*100):0;return{...e,completion:n}})),E=c(()=>{const o=JSON.parse(localStorage.getItem("mock:students")||"[]"),e=JSON.parse(localStorage.getItem("mock:assignments")||"[]");return o.slice(0,5).map(s=>{let a=0,n=0;e.forEach(v=>{if(v.submissions){const r=v.submissions.find(x=>x.userId===s.id);r&&r.grade!=null&&(a+=r.grade,n++)}});const i=n>0?Math.round(a/n):0,u=R(s.id);return{...s,averageGrade:i,className:u}}).sort((s,a)=>a.averageGrade-s.averageGrade)}),O=c(()=>{const o=[],e=JSON.parse(localStorage.getItem("mock:assignments")||"[]");return e.forEach(s=>{s.submissions&&s.submissions.forEach(a=>{o.push({id:`submission-${s.id}-${a.userId}`,icon:"assignment_turned_in",title:"Assignment Submitted",description:`${$(a.userId)} submitted "${s.title}"`,time:G(a.submittedAt),status:"Submitted",statusClass:"text-blue-600"})})}),e.forEach(s=>{s.submissions&&s.submissions.forEach(a=>{a.gradedAt&&o.push({id:`grade-${s.id}-${a.userId}`,icon:"grade",title:"Assignment Graded",description:`${$(a.userId)} received ${a.grade}% on "${s.title}"`,time:G(a.gradedAt),status:"Graded",statusClass:"text-green-600"})})}),o.sort((s,a)=>new Date(a.time)-new Date(s.time)).slice(0,5)});function M(o){const e=p.value.find(s=>s.id===o);return e&&e.students?e.students.length:0}function k(o){const s=JSON.parse(localStorage.getItem("mock:assignments")||"[]").filter(i=>i.classId===o);let a=0,n=0;return s.forEach(i=>{i.submissions&&i.submissions.forEach(u=>{u.grade!=null&&(a+=u.grade,n++)})}),n>0?Math.round(a/n):0}function $(o){const s=JSON.parse(localStorage.getItem("mock:students")||"[]").find(a=>a.id===o);return s?s.name:o}function R(o){const s=JSON.parse(localStorage.getItem("mock:classes")||"[]").find(a=>a.students&&a.students.includes(o));return s?s.title:"Unknown Class"}function B(o){return o>=90?"bg-green-500":o>=70?"bg-yellow-500":"bg-red-500"}function G(o){try{const e=new Date,s=new Date(o),a=e-s,n=Math.floor(a/(1e3*60)),i=Math.floor(a/(1e3*60*60)),u=Math.floor(a/(1e3*60*60*24));return n<60?`${n}m ago`:i<24?`${i}h ago`:`${u}d ago`}catch{return"Unknown"}}function L(){if(window.showToast){const o={7:"7 days",30:"30 days",90:"90 days",semester:"semester"};window.showToast(`Analytics updated for last ${o[f.value]}`)}}function F(){try{const o={Overview:{"Time Period":f.value==="semester"?"This Semester":`Last ${f.value} days`,"Report Generated":new Date().toLocaleString(),"Total Classes":S.value,"Total Students":A.value,"Average Completion":C.value+"%","Average Grade":j.value+"%"},"Grade Distribution":{"A (90-100)":d.value.A+"%","B (80-89)":d.value.B+"%","C (70-79)":d.value.C+"%","D/F (0-69)":d.value.DF+"%"}},e=[];p.value.forEach(r=>{var x;e.push({Class:r.title,Students:((x=r.students)==null?void 0:x.length)||0,"Average Grade":k(r.id)+"%",Status:r.status||"active"})});const s=[];E.value.forEach(r=>{s.push({Student:r.name,Class:r.className,"Average Grade":r.averageGrade+"%"})});const a=[];D.value.forEach(r=>{a.push({Assignment:r.title,"Completion Rate":r.completion+"%","Due Date":r.dueAt?new Date(r.dueAt).toLocaleDateString():"N/A"})});let n=`=== ANALYTICS OVERVIEW ===
`;n+=Object.entries(o.Overview).map(([r,x])=>`${r},${x}`).join(`
`),n+=`

=== GRADE DISTRIBUTION ===
`,n+=Object.entries(o["Grade Distribution"]).map(([r,x])=>`${r},${x}`).join(`
`),n+=`

=== CLASS PERFORMANCE ===
`,n+=`Class,Students,Average Grade,Status
`,n+=e.map(r=>`"${r.Class}",${r.Students},${r["Average Grade"]},${r.Status}`).join(`
`),n+=`

=== TOP STUDENTS ===
`,n+=`Student,Class,Average Grade
`,n+=s.map(r=>`"${r.Student}","${r.Class}",${r["Average Grade"]}`).join(`
`),n+=`

=== ASSIGNMENT COMPLETION ===
`,n+=`Assignment,Completion Rate,Due Date
`,n+=a.map(r=>`"${r.Assignment}",${r["Completion Rate"]},${r["Due Date"]}`).join(`
`);const i=new Blob([n],{type:"text/csv;charset=utf-8;"}),u=window.URL.createObjectURL(i),v=document.createElement("a");v.href=u,v.download=`analytics_report_${new Date().toISOString().split("T")[0]}.csv`,v.click(),window.URL.revokeObjectURL(u),window.showToast&&window.showToast("Analytics report exported successfully!")}catch(o){console.error("Export error:",o),window.showToast&&window.showToast("Error exporting analytics. Please try again.")}}return(o,e)=>(m(),g("div",q,[t("div",H,[t("div",K,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"}," Analytics Dashboard "),t("p",{class:"text-gray-600 mt-2"},"Gain insights into student performance, engagement, and class progress")],-1)),t("div",Q,[t("div",X,[V(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),onChange:L,class:"bg-white border border-gray-300 rounded-classroom pl-4 pr-8 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none"},[...e[1]||(e[1]=[t("option",{value:"7"},"Last 7 days",-1),t("option",{value:"30"},"Last 30 days",-1),t("option",{value:"90"},"Last 90 days",-1),t("option",{value:"semester"},"This semester",-1)])],544),[[z,f.value]]),e[2]||(e[2]=t("div",{class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[t("span",{class:"material-icons text-gray-400 text-sm"},"arrow_drop_down")],-1))]),t("button",{onClick:F,class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-classroom transition-colors flex items-center space-x-2"},[...e[3]||(e[3]=[t("span",{class:"material-icons text-sm"},"download",-1),t("span",null,"Export",-1)])])])])]),t("div",Z,[t("div",tt,[t("div",et,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-gray-600 text-sm font-medium"},"Average Completion",-1)),t("p",st,l(C.value)+"%",1),e[6]||(e[6]=t("p",{class:"text-green-500 text-sm mt-2 flex items-center"},[t("span",{class:"material-icons text-sm mr-1"},"trending_up"),y(" +5.2% this week ")],-1))]),e[7]||(e[7]=t("div",{class:"w-12 h-12 bg-blue-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-blue-600 text-xl"},"task_alt")],-1))])]),t("div",at,[t("div",ot,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-gray-600 text-sm font-medium"},"Active Classes",-1)),t("p",nt,l(S.value),1),t("p",rt,[e[8]||(e[8]=t("span",{class:"material-icons text-sm mr-1"},"school",-1)),y(" "+l(T.value)+" completed ",1)])]),e[10]||(e[10]=t("div",{class:"w-12 h-12 bg-green-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-green-600 text-xl"},"groups")],-1))])]),t("div",lt,[t("div",it,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-gray-600 text-sm font-medium"},"Total Students",-1)),t("p",dt,l(A.value),1),e[12]||(e[12]=t("p",{class:"text-orange-500 text-sm mt-2 flex items-center"},[t("span",{class:"material-icons text-sm mr-1"},"person_add"),y(" +3 new this week ")],-1))]),e[13]||(e[13]=t("div",{class:"w-12 h-12 bg-purple-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-purple-600 text-xl"},"people")],-1))])]),t("div",ct,[t("div",ut,[t("div",null,[e[14]||(e[14]=t("p",{class:"text-gray-600 text-sm font-medium"},"Avg. Grade",-1)),t("p",mt,l(j.value)+"%",1),e[15]||(e[15]=t("p",{class:"text-green-500 text-sm mt-2 flex items-center"},[t("span",{class:"material-icons text-sm mr-1"},"insights"),y(" +2.1% improvement ")],-1))]),e[16]||(e[16]=t("div",{class:"w-12 h-12 bg-orange-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-orange-600 text-xl"},"grade")],-1))])])]),t("div",gt,[e[24]||(e[24]=W('<div class="xl:col-span-2" data-v-6c1ee42c><div class="bg-white rounded-2xl shadow-xl border border-gray-100 p-6" data-v-6c1ee42c><div class="flex items-center justify-between mb-6" data-v-6c1ee42c><h2 class="text-xl font-bold text-gray-900" data-v-6c1ee42c>Student Engagement</h2><div class="flex items-center space-x-2" data-v-6c1ee42c><button class="text-sm text-gray-600 hover:text-gray-900" data-v-6c1ee42c>Daily</button><button class="text-sm text-gray-600 hover:text-gray-900" data-v-6c1ee42c>Weekly</button><button class="text-sm text-blue-600 font-medium" data-v-6c1ee42c>Monthly</button></div></div><div class="h-80 bg-gradient-to-br from-gray-50 to-blue-50 rounded-classroom flex items-center justify-center" data-v-6c1ee42c><div class="text-center" data-v-6c1ee42c><div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4" data-v-6c1ee42c><span class="material-icons text-blue-600 text-2xl" data-v-6c1ee42c>bar_chart</span></div><h3 class="text-lg font-medium text-gray-900 mb-2" data-v-6c1ee42c>Engagement Analytics</h3><p class="text-gray-500 mb-4" data-v-6c1ee42c>Chart.js or Recharts integration ready</p><div class="flex justify-center space-x-4 text-sm text-gray-600" data-v-6c1ee42c><div class="flex items-center" data-v-6c1ee42c><div class="w-3 h-3 bg-blue-500 rounded-full mr-2" data-v-6c1ee42c></div><span data-v-6c1ee42c>Assignments</span></div><div class="flex items-center" data-v-6c1ee42c><div class="w-3 h-3 bg-green-500 rounded-full mr-2" data-v-6c1ee42c></div><span data-v-6c1ee42c>Participation</span></div><div class="flex items-center" data-v-6c1ee42c><div class="w-3 h-3 bg-purple-500 rounded-full mr-2" data-v-6c1ee42c></div><span data-v-6c1ee42c>Attendance</span></div></div></div></div></div></div>',1)),t("div",xt,[t("div",vt,[e[21]||(e[21]=t("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Grade Distribution",-1)),t("div",ft,[t("div",pt,[e[17]||(e[17]=t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-8 h-8 bg-green-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-green-600 text-sm"},"emoji_events")]),t("span",{class:"text-sm font-medium text-gray-900"},"A (90-100)")],-1)),t("div",bt,[t("div",ht,l(d.value.A)+"%",1),t("div",yt,[t("div",{class:"bg-green-500 h-2 rounded-full",style:b({width:d.value.A+"%"})},null,4)])])]),t("div",_t,[e[18]||(e[18]=t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-8 h-8 bg-blue-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-blue-600 text-sm"},"thumb_up")]),t("span",{class:"text-sm font-medium text-gray-900"},"B (80-89)")],-1)),t("div",wt,[t("div",At,l(d.value.B)+"%",1),t("div",St,[t("div",{class:"bg-blue-500 h-2 rounded-full",style:b({width:d.value.B+"%"})},null,4)])])]),t("div",Ct,[e[19]||(e[19]=t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-8 h-8 bg-yellow-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-yellow-600 text-sm"},"warning")]),t("span",{class:"text-sm font-medium text-gray-900"},"C (70-79)")],-1)),t("div",jt,[t("div",Dt,l(d.value.C)+"%",1),t("div",Et,[t("div",{class:"bg-yellow-500 h-2 rounded-full",style:b({width:d.value.C+"%"})},null,4)])])]),t("div",kt,[e[20]||(e[20]=t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-8 h-8 bg-red-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-red-600 text-sm"},"error")]),t("span",{class:"text-sm font-medium text-gray-900"},"D/F (0-69)")],-1)),t("div",$t,[t("div",Gt,l(d.value.DF)+"%",1),t("div",It,[t("div",{class:"bg-red-500 h-2 rounded-full",style:b({width:d.value.DF+"%"})},null,4)])])])])]),t("div",Nt,[e[23]||(e[23]=t("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Assignment Completion",-1)),t("div",Tt,[(m(!0),g(_,null,w(D.value,s=>(m(),g("div",{key:s.id,class:"flex items-center justify-between"},[t("div",Ot,[e[22]||(e[22]=t("div",{class:"w-8 h-8 bg-blue-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-blue-600 text-sm"},"assignment")],-1)),t("div",Mt,l(s.title),1)]),t("div",Rt,[t("div",Bt,l(s.completion)+"%",1),t("div",Lt,[t("div",{class:I(["h-1.5 rounded-full transition-all duration-500",B(s.completion)]),style:b({width:s.completion+"%"})},null,6)])])]))),128))])])])]),t("div",Ft,[t("div",Ut,[e[26]||(e[26]=t("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Class Performance",-1)),t("div",Jt,[(m(!0),g(_,null,w(p.value,s=>{var a;return m(),g("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-classroom hover:bg-blue-50 transition-colors"},[t("div",Pt,[t("div",Vt,l(s.title.charAt(0)),1),t("div",null,[t("div",zt,l(s.title),1),t("div",Wt,l(((a=s.students)==null?void 0:a.length)||0)+" students",1)])]),t("div",Yt,[t("div",qt,l(k(s.id))+"%",1),e[25]||(e[25]=t("div",{class:"text-xs text-gray-500"},"Average grade",-1))])])}),128))])]),t("div",Ht,[e[28]||(e[28]=t("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Top Performing Students",-1)),t("div",Kt,[(m(!0),g(_,null,w(E.value,s=>(m(),g("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-classroom hover:bg-green-50 transition-colors"},[t("div",Qt,[t("div",Xt,l(s.name.charAt(0)),1),t("div",null,[t("div",Zt,l(s.name),1),t("div",te,l(s.className),1)])]),t("div",ee,[t("div",se,l(s.averageGrade)+"%",1),e[27]||(e[27]=t("div",{class:"text-xs text-gray-500"},"Average",-1))])]))),128))])])]),t("div",ae,[e[29]||(e[29]=t("h2",{class:"text-xl font-bold text-gray-900 mb-6"},"Recent Activity",-1)),t("div",oe,[(m(!0),g(_,null,w(O.value,s=>(m(),g("div",{key:s.id,class:"flex items-start space-x-4 p-4 bg-gray-50 rounded-classroom hover:bg-blue-50 transition-colors"},[t("div",ne,[t("span",re,l(s.icon),1)]),t("div",le,[t("div",ie,l(s.title),1),t("div",de,l(s.description),1)]),t("div",ce,[t("div",ue,l(s.time),1),t("div",{class:I(["text-xs font-medium mt-1",s.statusClass])},l(s.status),3)])]))),128))])])]))}},fe=U(me,[["__scopeId","data-v-6c1ee42c"],["__file","/Users/mac/Development/startups/online2/src/views/teacher/Analytics.vue"]]);export{fe as default};
