import{L as B,_ as k,G as le,c as $,a as c,b as m,e,t as i,B as ae,w as R,f as b,v as C,C as ie,h as x,u as re,r as w,o as de,y as f,D as N,F as A,g as U,n as M,I as ue,k as ce}from"./index-e0178975.js";import{u as me}from"./auth-385be275.js";import{s as ge,a as pe,b as ve}from"./dashboardHelpers-1d1ea8f1.js";import"./axios-78d57de0.js";const xe=B("adminUsers",{state:()=>({items:[]}),actions:{async fetchAll(){if(!localStorage.getItem("mock:users")){const r=[{id:"u1",name:"Alice Teacher",role:"teacher",status:"active"},{id:"u2",name:"Bob Student",role:"student",status:"active"}];localStorage.setItem("mock:users",JSON.stringify(r))}this.items=JSON.parse(localStorage.getItem("mock:users")||"[]")},add(r){this.items.unshift(r),localStorage.setItem("mock:users",JSON.stringify(this.items))},findById(r){return this.items.find(l=>l.id===r)}}}),fe=B("adminClasses",{state:()=>({items:[]}),actions:{async fetchAll(){if(!localStorage.getItem("mock:classes")){const r=[{id:"c1",title:"Biology 101",startAt:new Date().toISOString(),status:"active"}];localStorage.setItem("mock:classes",JSON.stringify(r))}this.items=JSON.parse(localStorage.getItem("mock:classes")||"[]")},add(r){this.items.unshift(r),localStorage.setItem("mock:classes",JSON.stringify(this.items))},findById(r){return this.items.find(l=>l.id===r)}}}),be={class:"flex items-center justify-between mb-6"},ye={class:"flex items-center space-x-4"},he={class:"text-right"},we={class:"font-medium text-classroom-gray-900"},_e={__name:"AdminHeader",setup(r){const l=le(),g=$(()=>l.currentUser);return(a,p)=>{var v;return c(),m("div",be,[p[1]||(p[1]=e("div",null,[e("h1",{class:"text-2xl font-medium text-classroom-gray-900"},"Admin Dashboard"),e("p",{class:"text-classroom-gray-600"},"System administration and management")],-1)),e("div",ye,[e("div",he,[p[0]||(p[0]=e("p",{class:"text-sm text-classroom-gray-500"},"Welcome back,",-1)),e("p",we,i((v=g.value)==null?void 0:v.name),1)])])])}}},Ce=k(_e,[["__file","/home/buddy/GCO/src/components/admin/AdminHeader.vue"]]),ke={class:"bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-md transition-all duration-300 animate-hover-lift animate-press"},Se={class:"flex items-center justify-between"},Ae={class:"text-sm font-medium text-gray-500"},Ue={class:"text-2xl font-bold text-gray-900 mt-1"},$e={__name:"KPIWidget",props:{title:{type:String,required:!0},value:{type:[String,Number],required:!0}},setup(r){return(l,g)=>(c(),m("div",ke,[e("div",Se,[e("div",null,[e("p",Ae,i(r.title),1),e("p",Ue,i(r.value),1)]),g[0]||(g[0]=e("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[e("span",{class:"text-blue-600 text-lg"},"ðŸ“Š")],-1))]),g[1]||(g[1]=e("div",{class:"mt-4 flex items-center space-x-2"},[e("span",{class:"text-sm text-gray-500"},"Last updated: just now")],-1))]))}},_=k($e,[["__file","/home/buddy/GCO/src/components/admin/KPIWidget.vue"]]),De={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},Ie={class:"bg-white rounded p-6 w-full max-w-lg"},Oe={class:"block mb-2"},je={class:"block mb-2"},Ne={class:"block mb-2"},Me={class:"block mb-4"},Be={class:"flex justify-end gap-2"},Re={__name:"QuickCreateClassModal",props:{open:Boolean},emits:["update:open","created"],setup(r,{emit:l}){const g=l,a=ae({title:"",startAt:"",duration:60,level:"beginner"});function p(){const v={id:Date.now().toString(),title:a.title||"Untitled",startAt:a.startAt||new Date().toISOString(),duration:a.duration,level:a.level,status:"scheduled"},s=JSON.parse(localStorage.getItem("mock:classes")||"[]");s.unshift(v),localStorage.setItem("mock:classes",JSON.stringify(s)),g("created",v)}return(v,s)=>r.open?(c(),m("div",De,[e("div",Ie,[s[11]||(s[11]=e("h3",{class:"text-lg font-medium mb-3"},"Create class",-1)),e("form",{onSubmit:R(p,["prevent"])},[e("label",Oe,[s[5]||(s[5]=e("div",{class:"text-sm"},"Title",-1)),b(e("input",{"onUpdate:modelValue":s[0]||(s[0]=u=>a.title=u),class:"w-full p-2 border rounded"},null,512),[[C,a.title]])]),e("label",je,[s[6]||(s[6]=e("div",{class:"text-sm"},"Start (ISO)",-1)),b(e("input",{"onUpdate:modelValue":s[1]||(s[1]=u=>a.startAt=u),type:"datetime-local",class:"w-full p-2 border rounded"},null,512),[[C,a.startAt]])]),e("label",Ne,[s[7]||(s[7]=e("div",{class:"text-sm"},"Duration (mins)",-1)),b(e("input",{"onUpdate:modelValue":s[2]||(s[2]=u=>a.duration=u),type:"number",class:"w-full p-2 border rounded"},null,512),[[C,a.duration,void 0,{number:!0}]])]),e("label",Me,[s[9]||(s[9]=e("div",{class:"text-sm"},"Level",-1)),b(e("select",{"onUpdate:modelValue":s[3]||(s[3]=u=>a.level=u),class:"w-full p-2 border rounded"},[...s[8]||(s[8]=[e("option",{value:"beginner"},"Beginner",-1),e("option",{value:"intermediate"},"Intermediate",-1),e("option",{value:"advanced"},"Advanced",-1)])],512),[[ie,a.level]])]),e("div",Be,[e("button",{type:"button",class:"px-3 py-1 border rounded",onClick:s[4]||(s[4]=u=>v.$emit("update:open",!1))},"Cancel"),s[10]||(s[10]=e("button",{class:"px-3 py-1 bg-green-600 text-white rounded"},"Create",-1))])],32)])])):x("",!0)}},Te=k(Re,[["__file","/home/buddy/GCO/src/components/admin/QuickCreateClassModal.vue"]]);const Le={class:"p-6 space-y-6"},Ve={class:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6"},Ee={class:"grid grid-cols-1 xl:grid-cols-3 gap-6"},qe={class:"space-y-6"},Je={class:"bg-white rounded-lg shadow p-4"},Qe={class:"space-y-3"},Ge={class:"mt-4"},He={class:"space-y-2 max-h-40 overflow-y-auto"},Ke={class:"text-sm font-medium"},Pe={class:"text-xs text-gray-500"},Fe={class:"flex gap-1"},We=["onClick"],ze=["onClick"],Xe={key:0,class:"text-center text-sm text-gray-500 py-2"},Ye={class:"space-y-6"},Ze={class:"bg-white rounded-lg shadow p-4"},et={class:"grid grid-cols-3 gap-2 text-center"},tt={class:"p-2 bg-gray-50 rounded"},st={class:"text-lg font-bold"},nt={class:"p-2 bg-gray-50 rounded"},ot={class:"text-lg font-bold"},lt={class:"p-2 bg-gray-50 rounded"},at={class:"text-lg font-bold"},it={class:"bg-white rounded-lg shadow p-4"},rt={class:"space-y-3"},dt={class:"text-sm"},ut={class:"text-xs text-gray-500"},ct={class:"flex items-center gap-2"},mt=["onClick"],gt={key:0,class:"text-center text-sm text-gray-500 py-2"},pt={class:"space-y-6"},vt={class:"bg-white rounded-lg shadow p-4"},xt={class:"space-y-3"},ft={class:"flex justify-between items-center"},bt={class:"flex justify-between items-center"},yt={class:"flex justify-between items-center"},ht={class:"text-sm font-medium"},wt={class:"flex justify-between items-center"},_t={class:"text-sm font-medium"},Ct={class:"bg-white rounded-lg shadow p-4"},kt={class:"space-y-2"},St={class:"flex-1 min-w-0"},At={class:"text-sm font-medium truncate"},Ut={class:"text-xs text-gray-500"},$t={class:"flex gap-1"},Dt=["onClick"],It={key:0,class:"text-center text-sm text-gray-500 py-2"},Ot={class:"bg-white rounded-lg shadow p-4"},jt={class:"space-y-2"},Nt={key:0,class:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded"},Mt={key:0,class:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded"},Bt={class:"bg-white rounded-lg shadow p-4"},Rt=["onKeydown"],Tt={__name:"Dashboard",setup(r){const l=re(),g=xe(),a=fe(),p=me(),v=ge("mock:currentUser"),s=w(pe("admin")),u=w([]),y=w(""),h=w(!1),D=$(()=>a.items.filter(o=>o.status==="active").slice(0,5).map(o=>{var t;return{...o,teacherName:((t=g.items.find(n=>n.id===o.teacherId))==null?void 0:t.name)||"Unknown"}}));function S(){g.fetchAll(),a.fetchAll();const o=g.items,t=a.items;s.value.totalUsers=o.length,s.value.activeClasses=t.filter(n=>n.status==="active").length,s.value.flaggedAssignments=t.filter(n=>n.flagged).length,s.value.pendingEnrollments=t.reduce((n,d)=>n+(d.pendingEnrollments||0),0),s.value.pendingUsers=o.filter(n=>n.status==="pending").length,s.value.teacherCount=o.filter(n=>n.role==="teacher").length,s.value.studentCount=o.filter(n=>n.role==="student").length,s.value.adminCount=o.filter(n=>n.role==="admin").length,u.value=JSON.parse(localStorage.getItem("mock:adminRecent")||"[]").slice(0,6),u.value.length===0&&(u.value=[{id:1,actor:"System",action:"System backup completed",timestamp:new Date().toISOString(),canUndo:!1},{id:2,actor:"Admin User",action:"Created new class template",timestamp:new Date(Date.now()-36e5).toISOString(),canUndo:!0},{id:3,actor:"Teacher Smith",action:"Published new assignment",timestamp:new Date(Date.now()-72e5).toISOString(),canUndo:!1}])}de(()=>{setTimeout(S,200)});function T(){l.push({name:"AdminUsers"})}function L(){l.push({name:"AdminClassesList"})}function V(){l.push({name:"AdminAssignmentsModeration"})}function E(){l.push({name:"AdminEnrollments"})}function q(){l.push({name:"AdminReports"})}function J(){l.push({name:"AdminLogs"})}function Q(){l.push({name:"AdminUserCreate"})}function G(){l.push({name:"AdminClassTemplates"})}function I(){l.push({name:"AdminBulkOperations"})}function H(){l.push({name:"AdminSettings"})}function K(){l.push({name:"AdminAnalytics"})}function P(){l.push({name:"AdminBackup"})}function F(){l.push({name:"AdminLogs"})}function W(){h.value=!0}function z(o){a.add(o),h.value=!1,S()}function X(o){l.push({name:"AdminClassDetail",params:{id:o}})}function Y(o){l.push({name:"AdminClassManagement",params:{id:o}})}function O(){const o=y.value.trim();if(!o)return;const t=a.findById(o)||g.findById(o);if(t){const n=t.title?{name:"AdminClassDetail",params:{id:t.id}}:{name:"AdminUserEdit",params:{id:t.id}};l.push(n)}else{const n=g.items.find(d=>d.name.toLowerCase().includes(o.toLowerCase()));if(n)l.push({name:"AdminUserEdit",params:{id:n.id}});else{const d=a.items.find(oe=>oe.title.toLowerCase().includes(o.toLowerCase()));d?l.push({name:"AdminClassDetail",params:{id:d.id}}):alert("No match found for: "+o)}}}function Z(){y.value=""}const j=$(()=>p.pendingResetRequests.slice(0,5));function ee(o){const t=new Date,n=new Date(o),d=Math.floor((t-n)/1e3);return d<60?"just now":d<3600?`${Math.floor(d/60)}m ago`:d<86400?`${Math.floor(d/3600)}h ago`:`${Math.floor(d/86400)}d ago`}async function te(o){try{await p.markResetRequestComplete(o),S()}catch(t){console.error("Failed to mark reset request as complete:",t),alert("Failed to update request status")}}function se(){alert("Password reset requests management page would open here")}function ne(o){u.value=u.value.filter(t=>t.id!==o.id),alert(`Undid action: ${o.action}`)}return(o,t)=>(c(),m("div",Le,[f(Ce,{user:N(v)},null,8,["user"]),e("div",Ve,[f(_,{title:"Total Users",value:s.value.totalUsers,trend:s.value.userTrend},null,8,["value","trend"]),f(_,{title:"Active Classes",value:s.value.activeClasses,trend:s.value.classTrend},null,8,["value","trend"]),f(_,{title:"System Health",value:s.value.systemHealth,suffix:"%"},null,8,["value"]),f(_,{title:"Avg. Engagement",value:s.value.avgEngagement,suffix:"%"},null,8,["value"])]),e("div",Ee,[e("div",qe,[e("section",Je,[e("div",{class:"flex items-center justify-between mb-4"},[t[2]||(t[2]=e("h3",{class:"text-lg font-semibold"},"Class Managements",-1)),e("button",{onClick:L,class:"text-sm text-blue-600 hover:text-blue-800"},"View All")]),e("div",Qe,[e("div",{class:"grid grid-cols-2 gap-3"},[e("button",{onClick:W,class:"p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors"},[...t[3]||(t[3]=[e("div",{class:"text-blue-600 text-lg"},"âž•",-1),e("div",{class:"text-sm font-medium"},"Create Class",-1),e("div",{class:"text-xs text-gray-500"},"New session",-1)])]),e("button",{onClick:G,class:"p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors"},[...t[4]||(t[4]=[e("div",{class:"text-green-600 text-lg"},"ðŸ“‹",-1),e("div",{class:"text-sm font-medium"},"Templates",-1),e("div",{class:"text-xs text-gray-500"},"Reuse layouts",-1)])])]),e("div",Ge,[t[5]||(t[5]=e("h4",{class:"text-sm font-medium mb-2"},"Active Classes",-1)),e("div",He,[(c(!0),m(A,null,U(D.value,n=>(c(),m("div",{key:n.id,class:"flex items-center justify-between p-2 hover:bg-gray-50 rounded"},[e("div",null,[e("div",Ke,i(n.title),1),e("div",Pe,i(n.teacherName),1)]),e("div",Fe,[e("button",{onClick:d=>X(n.id),class:"text-xs text-blue-600 hover:text-blue-800"},"View",8,We),e("button",{onClick:d=>Y(n.id),class:"text-xs text-green-600 hover:text-green-800"},"Manage",8,ze)])]))),128)),D.value.length===0?(c(),m("div",Xe," No active classes ")):x("",!0)])])])]),e("section",{class:"bg-white rounded-lg shadow p-4"},[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold mb-4"},"System Tools",-1)),e("div",{class:"grid grid-cols-2 gap-3"},[e("button",{onClick:I,class:"p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors"},[...t[6]||(t[6]=[e("div",{class:"text-purple-600 text-lg"},"ðŸ“¦",-1),e("div",{class:"text-sm font-medium"},"Bulk Ops",-1),e("div",{class:"text-xs text-gray-500"},"Import/Export",-1)])]),e("button",{onClick:H,class:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[7]||(t[7]=[e("div",{class:"text-gray-600 text-lg"},"âš™ï¸",-1),e("div",{class:"text-sm font-medium"},"Settings",-1),e("div",{class:"text-xs text-gray-500"},"System config",-1)])]),e("button",{onClick:K,class:"p-3 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors"},[...t[8]||(t[8]=[e("div",{class:"text-orange-600 text-lg"},"ðŸ“Š",-1),e("div",{class:"text-sm font-medium"},"Analytics",-1),e("div",{class:"text-xs text-gray-500"},"Usage stats",-1)])]),e("button",{onClick:P,class:"p-3 bg-red-50 rounded-lg hover:bg-red-100 transition-colors"},[...t[9]||(t[9]=[e("div",{class:"text-red-600 text-lg"},"ðŸ’¾",-1),e("div",{class:"text-sm font-medium"},"Backup",-1),e("div",{class:"text-xs text-gray-500"},"Data safety",-1)])])])])]),e("div",Ye,[e("section",Ze,[e("div",{class:"flex items-center justify-between mb-4"},[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold"},"User Management",-1)),e("button",{onClick:T,class:"text-sm text-blue-600 hover:text-blue-800"},"View All")]),e("div",{class:"grid grid-cols-2 gap-3 mb-4"},[e("button",{onClick:Q,class:"p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors"},[...t[12]||(t[12]=[e("div",{class:"text-blue-600 text-lg"},"ðŸ‘¤",-1),e("div",{class:"text-sm font-medium"},"Create User",-1),e("div",{class:"text-xs text-gray-500"},"Teacher/Student",-1)])]),e("button",{onClick:I,class:"p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors"},[...t[13]||(t[13]=[e("div",{class:"text-green-600 text-lg"},"ðŸ‘¥",-1),e("div",{class:"text-sm font-medium"},"Bulk Import",-1),e("div",{class:"text-xs text-gray-500"},"CSV upload",-1)])])]),e("div",et,[e("div",tt,[t[14]||(t[14]=e("div",{class:"text-sm font-medium text-gray-600"},"Teachers",-1)),e("div",st,i(s.value.teacherCount),1)]),e("div",nt,[t[15]||(t[15]=e("div",{class:"text-sm font-medium text-gray-600"},"Students",-1)),e("div",ot,i(s.value.studentCount),1)]),e("div",lt,[t[16]||(t[16]=e("div",{class:"text-sm font-medium text-gray-600"},"Admins",-1)),e("div",at,i(s.value.adminCount),1)])])]),e("section",it,[e("div",{class:"flex items-center justify-between mb-4"},[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold"},"Recent Activity",-1)),e("button",{onClick:F,class:"text-sm text-blue-600 hover:text-blue-800"},"View All")]),e("ul",rt,[(c(!0),m(A,null,U(u.value,n=>(c(),m("li",{key:n.id,class:"flex items-start justify-between"},[e("div",null,[e("div",dt,[e("strong",null,i(n.actor),1),ce(" "+i(n.action),1)]),e("div",ut,i(N(ve)(n.timestamp)),1)]),e("div",ct,[n.canUndo?(c(),m("button",{key:0,onClick:d=>ne(n),class:"text-xs text-red-600 hover:text-red-800"},"Undo",8,mt)):x("",!0)])]))),128)),u.value.length===0?(c(),m("li",gt," No recent activity ")):x("",!0)])])]),e("div",pt,[e("section",vt,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold mb-4"},"System Health",-1)),e("div",xt,[e("div",ft,[t[18]||(t[18]=e("span",{class:"text-sm"},"Server Status",-1)),e("span",{class:M(["text-sm font-medium",s.value.serverStatus==="Online"?"text-green-600":"text-red-600"])},i(s.value.serverStatus),3)]),e("div",bt,[t[19]||(t[19]=e("span",{class:"text-sm"},"Database",-1)),e("span",{class:M(["text-sm font-medium",s.value.dbStatus==="Connected"?"text-green-600":"text-red-600"])},i(s.value.dbStatus),3)]),e("div",yt,[t[20]||(t[20]=e("span",{class:"text-sm"},"Storage Usage",-1)),e("span",ht,i(s.value.storageUsage)+"%",1)]),e("div",wt,[t[21]||(t[21]=e("span",{class:"text-sm"},"Active Sessions",-1)),e("span",_t,i(s.value.activeSessions),1)])])]),e("section",Ct,[e("div",{class:"flex items-center justify-between mb-4"},[t[23]||(t[23]=e("h3",{class:"text-lg font-semibold"},"Password Reset Requests",-1)),e("button",{onClick:se,class:"text-sm text-blue-600 hover:text-blue-800"},"View All")]),e("div",kt,[(c(!0),m(A,null,U(j.value,n=>(c(),m("div",{key:n.id,class:"flex items-center justify-between p-2 hover:bg-gray-50 rounded"},[e("div",St,[e("div",At,i(n.email),1),e("div",Ut,i(ee(n.timestamp)),1)]),e("div",$t,[e("button",{onClick:d=>te(n.id),class:"text-xs text-green-600 hover:text-green-800",title:"Mark as completed"}," âœ“ ",8,Dt)])]))),128)),j.value.length===0?(c(),m("div",It," No pending requests ")):x("",!0)])]),e("section",Ot,[t[28]||(t[28]=e("h3",{class:"text-lg font-semibold mb-4"},"Quick Access",-1)),e("div",jt,[e("button",{onClick:V,class:"w-full flex items-center justify-between p-2 hover:bg-gray-50 rounded"},[t[24]||(t[24]=e("div",{class:"flex items-center gap-2"},[e("span",null,"ðŸš©"),e("span",{class:"text-sm"},"Content Moderation")],-1)),s.value.flaggedAssignments>0?(c(),m("span",Nt,i(s.value.flaggedAssignments),1)):x("",!0)]),e("button",{onClick:E,class:"w-full flex items-center justify-between p-2 hover:bg-gray-50 rounded"},[t[25]||(t[25]=e("div",{class:"flex items-center gap-2"},[e("span",null,"ðŸ“‹"),e("span",{class:"text-sm"},"Enrollments")],-1)),s.value.pendingEnrollments>0?(c(),m("span",Mt,i(s.value.pendingEnrollments),1)):x("",!0)]),e("button",{onClick:q,class:"w-full flex items-center justify-between p-2 hover:bg-gray-50 rounded"},[...t[26]||(t[26]=[e("div",{class:"flex items-center gap-2"},[e("span",null,"ðŸ“ˆ"),e("span",{class:"text-sm"},"Reports")],-1)])]),e("button",{onClick:J,class:"w-full flex items-center justify-between p-2 hover:bg-gray-50 rounded"},[...t[27]||(t[27]=[e("div",{class:"flex items-center gap-2"},[e("span",null,"ðŸ“"),e("span",{class:"text-sm"},"Audit Logs")],-1)])])])]),e("section",Bt,[t[29]||(t[29]=e("h3",{class:"text-lg font-semibold mb-3"},"Quick Search",-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>y.value=n),onKeydown:ue(R(O,["prevent"]),["enter"]),placeholder:"Search users, classes, or content...",class:"w-full p-2 border rounded-lg mb-2"},null,40,Rt),[[C,y.value]]),e("div",{class:"flex gap-2"},[e("button",{onClick:O,class:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Search "),e("button",{onClick:Z,class:"px-3 py-2 border rounded-lg hover:bg-gray-50"}," Clear ")])])])]),f(Te,{open:h.value,"onUpdate:open":t[1]||(t[1]=n=>h.value=n),onCreated:z},null,8,["open"])]))}},Jt=k(Tt,[["__scopeId","data-v-0de618a8"],["__file","/home/buddy/GCO/src/views/admin/Dashboard.vue"]]);export{Jt as default};
