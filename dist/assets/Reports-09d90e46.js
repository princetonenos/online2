import{_ as Q,r as v,c as q,o as z,x as W,a as u,b as m,e as t,y as Y,m as Z,F as R,g as C,f as g,C as A,d as H,v as S,P as k,h as w,t as i,n as j}from"./index-d2bf20c5.js";import{e as U}from"./exportHelpers-5714f3fc.js";import{u as K}from"./auditLog-256d3523.js";import"./auth-17017921.js";import"./axios-78d57de0.js";const X={class:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6"},ee={class:"mb-8"},te={class:"flex items-center justify-between"},se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},oe=["onClick"],le={class:"flex items-center justify-between mb-4"},ae={class:"text-lg font-semibold text-gray-900 mb-2"},ne={class:"text-sm text-gray-600"},re={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ie={class:"lg:col-span-2 space-y-6"},de={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},ce={class:"space-y-4"},ue={class:"grid grid-cols-2 gap-4"},me={class:"flex space-x-4"},pe={class:"flex items-center space-x-2 cursor-pointer"},ge={class:"flex items-center space-x-2 cursor-pointer"},xe={class:"flex items-center space-x-2 cursor-pointer"},ye=["disabled"],be={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},fe={class:"flex items-center justify-between mb-6"},ve={class:"space-y-3"},he={class:"flex items-center space-x-3 flex-1"},we={class:"w-10 h-10 bg-blue-100 rounded-classroom flex items-center justify-center flex-shrink-0"},_e={class:"material-icons text-blue-600"},Re={class:"flex-1 min-w-0"},Ce={class:"font-medium text-gray-900 truncate"},Se={class:"text-xs text-gray-500"},ke={class:"flex items-center space-x-2 flex-shrink-0"},De=["onClick"],Ae=["onClick"],je=["onClick"],Ue={key:0,class:"text-center py-12 text-gray-500"},$e={class:"space-y-6"},Ne={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},Me={class:"space-y-4"},Ve={class:"flex items-center justify-between"},Oe={class:"text-lg font-bold text-gray-900"},Te={class:"flex items-center justify-between"},Ee={class:"text-lg font-bold text-blue-600"},Le={class:"flex items-center justify-between"},Be={class:"text-sm font-medium text-gray-900"},Fe={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},Pe={class:"flex items-center justify-between mb-4"},Ge={class:"space-y-3"},Ie={class:"flex items-center justify-between mb-2"},Je={class:"text-sm font-medium text-gray-900"},Qe=["onClick"],qe={class:"text-xs text-gray-500"},ze={key:0,class:"text-center py-4 text-gray-500 text-sm"},We={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},Ye=["disabled"],Ze={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},He={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6"},Ke={class:"flex items-center justify-between mb-6"},Xe={class:"space-y-4"},et={class:"flex space-x-3"},tt={__name:"Reports",setup(st){const _=K(),$=[{id:1,name:"User Summary",description:"Overview of all users",icon:"people",bgColor:"bg-blue-100",iconColor:"text-blue-600",type:"user-summary"},{id:2,name:"Class Report",description:"All classes & enrollment",icon:"school",bgColor:"bg-green-100",iconColor:"text-green-600",type:"class-report"},{id:3,name:"Activity Log",description:"Recent system activity",icon:"history",bgColor:"bg-purple-100",iconColor:"text-purple-600",type:"activity-log"},{id:4,name:"Performance",description:"System performance metrics",icon:"speed",bgColor:"bg-orange-100",iconColor:"text-orange-600",type:"performance"}],l=v({type:"",startDate:"",endDate:"",format:"pdf"}),a=v(JSON.parse(localStorage.getItem("gco:reports")||"[]")),y=v([{id:1,name:"Weekly Enrollment Report",frequency:"Weekly",nextRun:"Monday"},{id:2,name:"Monthly Performance Summary",frequency:"Monthly",nextRun:"1st of next month"}]),b=v(!1),p=v({name:"",frequency:"weekly"}),N=q(()=>({thisMonth:a.value.filter(s=>{const e=new Date(s.generatedAt),n=new Date;return e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()}).length})),M=s=>{const e={id:Date.now(),name:s.name,type:s.type,format:"pdf",generatedAt:new Date().toISOString(),data:D(s.type)};a.value.unshift(e),h(),_.logReportGenerated(e.name,e.type),d(`${s.name} generated successfully!`)},V=()=>{if(!l.value.type)return;const s={id:Date.now(),name:O(l.value.type),type:l.value.type,format:l.value.format,startDate:l.value.startDate,endDate:l.value.endDate,generatedAt:new Date().toISOString(),data:D(l.value.type)};a.value.unshift(s),h(),_.logReportGenerated(s.name,s.type),d("Custom report generated successfully!"),l.value={type:"",startDate:"",endDate:"",format:"pdf"}},D=s=>{const e=JSON.parse(localStorage.getItem("mock:users")||"[]"),n=JSON.parse(localStorage.getItem("mock:classes")||"[]"),o=JSON.parse(localStorage.getItem("mock:assignments")||"[]");return{"user-summary":{totalUsers:e.length,activeUsers:e.filter(r=>r.status==="active").length,students:e.filter(r=>r.role==="student").length,teachers:e.filter(r=>r.role==="teacher").length,admins:e.filter(r=>r.role==="admin").length,usersBySchool:{}},"class-report":{totalClasses:n.length,totalEnrollment:n.reduce((r,x)=>r+(x.enrolledStudents||0),0),averageClassSize:n.length>0?Math.round(n.reduce((r,x)=>r+(x.enrolledStudents||0),0)/n.length):0,classesBySubject:{}},"activity-log":{totalActivities:150,logins:89,assignmentsCreated:23,classesCreated:12,recentActivity:"Last 24 hours"},performance:{averageLoadTime:"1.2s",activeConnections:45,databaseQueries:1234,errorRate:"0.1%",uptime:"99.9%"}}[s]||{totalUsers:e.length,totalClasses:n.length,totalAssignments:o.length}},O=s=>({enrollment:"Enrollment Report",attendance:"Attendance Report",performance:"Performance Report","user-activity":"User Activity Report",assignment:"Assignment Statistics","class-performance":"Class Performance Report"})[s]||"Custom Report",T=s=>({"user-summary":"people","class-report":"school","activity-log":"history",performance:"speed",enrollment:"person_add",attendance:"event_available","user-activity":"timeline",assignment:"assignment","class-performance":"trending_up"})[s]||"description",f=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=s=>{d(`Viewing ${s.name}...`)},L=s=>{try{if(s.format==="csv"||s.format==="excel"){const e=[{field:"Report Name",value:s.name},{field:"Generated At",value:f(s.generatedAt)},{field:"Report Type",value:s.type},{field:"",value:""}];Object.entries(s.data).forEach(([n,o])=>{e.push({field:n.replace(/([A-Z])/g," $1").replace(/^./,c=>c.toUpperCase()),value:typeof o=="object"?JSON.stringify(o):o})}),U(e,`${s.name.replace(/\s+/g,"_")}.csv`),d(`Downloaded ${s.name} as CSV`)}else if(s.format==="pdf"){const e=`
${s.name}
${"=".repeat(s.name.length)}

Generated: ${f(s.generatedAt)}
Type: ${s.type}

Report Data:
${Object.entries(s.data).map(([r,x])=>`  ${r.replace(/([A-Z])/g," $1").replace(/^./,J=>J.toUpperCase())}: ${typeof x=="object"?JSON.stringify(x,null,2):x}`).join(`
`)}
      `.trim(),n=new Blob([e],{type:"text/plain"}),o=window.URL.createObjectURL(n),c=document.createElement("a");c.href=o,c.download=`${s.name.replace(/\s+/g,"_")}.txt`,c.click(),window.URL.revokeObjectURL(o),d(`Downloaded ${s.name} as text file (PDF feature coming soon)`)}_.logReportDownloaded(s.name)}catch(e){console.error("Download error:",e),d("Failed to download report. Please try again.")}},B=s=>{confirm("Are you sure you want to delete this report?")&&(a.value=a.value.filter(e=>e.id!==s),h(),d("Report deleted"))},F=()=>{confirm("Are you sure you want to delete all reports?")&&(a.value=[],h(),d("All reports cleared"))},P=()=>{const s=a.value.map(e=>({Name:e.name,Type:e.type,Format:e.format,"Generated At":f(e.generatedAt)}));U(s,"all_reports.csv"),d(`Exported ${a.value.length} reports`)},G=()=>{if(!p.value.name)return;const s={id:Date.now(),name:p.value.name,frequency:p.value.frequency.charAt(0).toUpperCase()+p.value.frequency.slice(1),nextRun:"Soon"};y.value.push(s),b.value=!1,p.value={name:"",frequency:"weekly"},d("Report scheduled successfully!")},I=s=>{y.value=y.value.filter(e=>e.id!==s),d("Schedule deleted")},h=()=>{localStorage.setItem("gco:reports",JSON.stringify(a.value))},d=s=>{window.showToast?window.showToast(s):alert(s)};return z(()=>{}),(s,e)=>{const n=W("router-link");return u(),m("div",X,[t("div",ee,[t("div",te,[e[12]||(e[12]=t("div",null,[t("h1",{class:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"}," Reports & Analytics "),t("p",{class:"text-gray-600 mt-2"},"Generate and view comprehensive system reports")],-1)),Y(n,{to:"/admin/dashboard",class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-6 py-2 rounded-classroom transition-colors flex items-center space-x-2"},{default:Z(()=>[...e[11]||(e[11]=[t("span",{class:"material-icons text-sm"},"arrow_back",-1),t("span",null,"Back",-1)])]),_:1})])]),t("div",se,[(u(),m(R,null,C($,o=>t("div",{key:o.id,onClick:c=>M(o),class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 cursor-pointer hover:shadow-2xl transition-all hover:-translate-y-1"},[t("div",le,[t("div",{class:j(["w-12 h-12 rounded-classroom flex items-center justify-center",o.bgColor])},[t("span",{class:j(["material-icons text-2xl",o.iconColor])},i(o.icon),3)],2),e[13]||(e[13]=t("span",{class:"text-xs font-medium px-2 py-1 rounded-full bg-gray-100 text-gray-600"},"Quick",-1))]),t("h3",ae,i(o.name),1),t("p",ne,i(o.description),1)],8,oe)),64))]),t("div",re,[t("div",ie,[t("div",de,[e[23]||(e[23]=t("div",{class:"flex items-center space-x-3 mb-6"},[t("div",{class:"w-8 h-8 bg-blue-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-blue-600 text-sm"},"build")]),t("h2",{class:"text-xl font-bold text-gray-900"},"Custom Report Builder")],-1)),t("div",ce,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Report Type",-1)),g(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.type=o),class:"w-full px-4 py-2 border border-gray-300 rounded-classroom focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...e[14]||(e[14]=[H('<option value="" data-v-f188b19b>Select report type...</option><option value="enrollment" data-v-f188b19b>Enrollment Report</option><option value="attendance" data-v-f188b19b>Attendance Report</option><option value="performance" data-v-f188b19b>Performance Report</option><option value="user-activity" data-v-f188b19b>User Activity Report</option><option value="assignment" data-v-f188b19b>Assignment Statistics</option><option value="class-performance" data-v-f188b19b>Class Performance</option>',7)])],512),[[A,l.value.type]])]),t("div",ue,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Start Date",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.startDate=o),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-classroom focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[S,l.value.startDate]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"End Date",-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.endDate=o),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-classroom focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[S,l.value.endDate]])])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Format",-1)),t("div",me,[t("label",pe,[g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.format=o),type:"radio",value:"pdf",class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[k,l.value.format]]),e[18]||(e[18]=t("span",{class:"text-sm text-gray-700"},"PDF",-1))]),t("label",ge,[g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.format=o),type:"radio",value:"csv",class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[k,l.value.format]]),e[19]||(e[19]=t("span",{class:"text-sm text-gray-700"},"CSV",-1))]),t("label",xe,[g(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.format=o),type:"radio",value:"excel",class:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"},null,512),[[k,l.value.format]]),e[20]||(e[20]=t("span",{class:"text-sm text-gray-700"},"Excel",-1))])])]),t("button",{onClick:V,disabled:!l.value.type,class:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white py-3 rounded-classroom transition-colors flex items-center justify-center space-x-2"},[...e[22]||(e[22]=[t("span",{class:"material-icons text-sm"},"analytics",-1),t("span",null,"Generate Report",-1)])],8,ye)])]),t("div",be,[t("div",fe,[e[24]||(e[24]=t("div",{class:"flex items-center space-x-3"},[t("div",{class:"w-8 h-8 bg-green-100 rounded-classroom flex items-center justify-center"},[t("span",{class:"material-icons text-green-600 text-sm"},"description")]),t("h2",{class:"text-xl font-bold text-gray-900"},"Generated Reports")],-1)),a.value.length>0?(u(),m("button",{key:0,onClick:F,class:"text-sm text-red-600 hover:text-red-800"}," Clear All ")):w("",!0)]),t("div",ve,[(u(!0),m(R,null,C(a.value,o=>(u(),m("div",{key:o.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-classroom hover:bg-gray-100 transition-colors"},[t("div",he,[t("div",we,[t("span",_e,i(T(o.type)),1)]),t("div",Re,[t("h4",Ce,i(o.name),1),t("p",Se,i(f(o.generatedAt))+" • "+i(o.format.toUpperCase()),1)])]),t("div",ke,[t("button",{onClick:c=>E(o),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-classroom transition-colors",title:"View Report"},[...e[25]||(e[25]=[t("span",{class:"material-icons text-sm"},"visibility",-1)])],8,De),t("button",{onClick:c=>L(o),class:"p-2 text-green-600 hover:bg-green-50 rounded-classroom transition-colors",title:"Download Report"},[...e[26]||(e[26]=[t("span",{class:"material-icons text-sm"},"download",-1)])],8,Ae),t("button",{onClick:c=>B(o.id),class:"p-2 text-red-600 hover:bg-red-50 rounded-classroom transition-colors",title:"Delete Report"},[...e[27]||(e[27]=[t("span",{class:"material-icons text-sm"},"delete",-1)])],8,je)])]))),128)),a.value.length===0?(u(),m("div",Ue,[...e[28]||(e[28]=[t("span",{class:"material-icons text-6xl opacity-30 mb-4"},"description",-1),t("p",{class:"text-lg font-medium"},"No reports generated yet",-1),t("p",{class:"text-sm mt-2"},"Use Quick Reports or Custom Report Builder to generate reports",-1)])])):w("",!0)])])]),t("div",$e,[t("div",Ne,[e[32]||(e[32]=t("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Report Statistics",-1)),t("div",Me,[t("div",Ve,[e[29]||(e[29]=t("span",{class:"text-sm text-gray-600"},"Total Reports",-1)),t("span",Oe,i(a.value.length),1)]),t("div",Te,[e[30]||(e[30]=t("span",{class:"text-sm text-gray-600"},"This Month",-1)),t("span",Ee,i(N.value.thisMonth),1)]),t("div",Le,[e[31]||(e[31]=t("span",{class:"text-sm text-gray-600"},"Last Generated",-1)),t("span",Be,i(a.value.length>0?f(a.value[0].generatedAt):"Never"),1)])])]),t("div",Fe,[t("div",Pe,[e[34]||(e[34]=t("h3",{class:"text-lg font-bold text-gray-900"},"Scheduled Reports",-1)),t("button",{onClick:e[6]||(e[6]=o=>b.value=!0),class:"text-blue-600 hover:text-blue-800"},[...e[33]||(e[33]=[t("span",{class:"material-icons text-sm"},"add",-1)])])]),t("div",Ge,[(u(!0),m(R,null,C(y.value,o=>(u(),m("div",{key:o.id,class:"p-3 bg-gray-50 rounded-classroom"},[t("div",Ie,[t("span",Je,i(o.name),1),t("button",{onClick:c=>I(o.id),class:"text-red-600 hover:text-red-800"},[...e[35]||(e[35]=[t("span",{class:"material-icons text-sm"},"close",-1)])],8,Qe)]),t("div",qe,i(o.frequency)+" • Next: "+i(o.nextRun),1)]))),128)),y.value.length===0?(u(),m("div",ze," No scheduled reports ")):w("",!0)])]),t("div",We,[e[37]||(e[37]=t("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Bulk Export",-1)),t("button",{onClick:P,disabled:a.value.length===0,class:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white py-2 rounded-classroom transition-colors flex items-center justify-center space-x-2"},[...e[36]||(e[36]=[t("span",{class:"material-icons text-sm"},"download",-1),t("span",null,"Export All Reports",-1)])],8,Ye)])])]),b.value?(u(),m("div",Ze,[t("div",He,[t("div",Ke,[e[39]||(e[39]=t("h2",{class:"text-xl font-bold text-gray-900"},"Schedule Report",-1)),t("button",{onClick:e[7]||(e[7]=o=>b.value=!1),class:"text-gray-400 hover:text-gray-600"},[...e[38]||(e[38]=[t("span",{class:"material-icons"},"close",-1)])])]),t("div",Xe,[t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Report Name",-1)),g(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>p.value.name=o),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-classroom focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Monthly enrollment report"},null,512),[[S,p.value.name]])]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Frequency",-1)),g(t("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>p.value.frequency=o),class:"w-full px-4 py-2 border border-gray-300 rounded-classroom focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...e[41]||(e[41]=[t("option",{value:"daily"},"Daily",-1),t("option",{value:"weekly"},"Weekly",-1),t("option",{value:"monthly"},"Monthly",-1)])],512),[[A,p.value.frequency]])]),t("div",et,[t("button",{onClick:e[10]||(e[10]=o=>b.value=!1),class:"flex-1 px-4 py-2 border border-gray-300 rounded-classroom hover:bg-gray-50 transition-colors"}," Cancel "),t("button",{onClick:G,class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-classroom transition-colors"}," Schedule ")])])])])):w("",!0)])}}},it=Q(tt,[["__scopeId","data-v-f188b19b"],["__file","/Users/mac/Development/startups/online2/src/views/admin/Reports.vue"]]);export{it as default};
