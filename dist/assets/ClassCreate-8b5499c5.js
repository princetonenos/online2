import{u as G,B as W,a as K,r as j,b as D,k as U,o as Q,c as n,d as i,e,w as X,F as h,m as R,g as a,v as b,t as m,h as u,z as g,f as q,i as f,n as v}from"./index-ae66ec3f.js";const Y={class:"p-6 max-w-4xl mx-auto"},Z={class:"bg-white rounded-classroom classroom-shadow p-6"},_={class:"flex items-center justify-between mb-6"},ss={class:"flex items-center justify-between mb-8"},es={key:0,class:"space-y-6"},ts={class:"border border-classroom-gray-200 rounded-classroom p-6"},os={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ls={class:"md:col-span-2"},rs={key:0,class:"text-red-500 text-xs mt-1"},as={key:0,class:"text-red-500 text-xs mt-1"},ns={class:"md:col-span-2"},is={class:"text-xs text-classroom-gray-500 mt-1"},us={key:0,class:"text-red-500 text-xs mt-1"},ds={class:"flex items-center justify-end space-x-4 pt-6"},cs=["disabled"],ms={key:1,class:"space-y-6"},ps={class:"border border-classroom-gray-200 rounded-classroom p-6"},bs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ys={key:0,class:"text-red-500 text-xs mt-1"},xs={key:0,class:"text-red-500 text-xs mt-1"},gs={class:"md:col-span-2"},fs={class:"flex items-center space-x-2"},vs={key:0,class:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-4"},ws={class:"md:col-span-2 space-y-3"},ks={class:"space-y-2"},Cs={class:"flex items-center space-x-2"},Ss={class:"flex items-center space-x-2"},Ms={class:"flex items-center space-x-2"},As={class:"flex items-center justify-end space-x-4 pt-6"},Vs=["disabled"],js={key:2,class:"space-y-6"},Ds={class:"border border-classroom-gray-200 rounded-classroom p-6"},Us={class:"space-y-4"},hs={class:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4"},Rs=["onUpdate:modelValue"],qs=["onUpdate:modelValue"],Is={class:"md:col-span-2"},Es={class:"block text-sm font-medium text-classroom-gray-900 mb-2"},Ls=["onUpdate:modelValue","placeholder"],$s=["onClick"],Bs={key:0,class:"text-center py-8 text-classroom-gray-500"},Ts={class:"flex items-center justify-end space-x-4 pt-6"},Ns=["disabled"],Ps={key:0,class:"material-icons animate-spin"},zs={__name:"ClassCreate",setup(Fs){const I=G(),E=W(),L=K(),y=j(!1),d=j(1),w=[{id:1,name:"Basic Info"},{id:2,name:"Schedule"},{id:3,name:"Resources"}],t=D({title:"",subject:"",gradeLevel:"",description:"",level:"",capacity:null,startAt:"",durationMinutes:90,isRecurring:!1,recurrence:{frequency:"weekly",occurrences:12,endDate:""},settings:{allowStudentPosts:!0,allowStudentComments:!0,showDeletedItems:!1},resources:[]}),r=D({title:"",subject:"",level:"",startAt:"",durationMinutes:""}),$=U(()=>t.title.trim()&&t.subject&&t.level),B=U(()=>t.startAt&&t.durationMinutes>=15&&t.durationMinutes<=480),C=()=>{d.value<w.length&&d.value++},S=()=>{d.value>1&&d.value--},T=l=>l<d.value||l===d.value?"bg-classroom-primary text-white":"bg-classroom-gray-100 text-classroom-gray-500",N=l=>l<=d.value?"text-classroom-gray-900":"text-classroom-gray-500",P=l=>l<d.value?"bg-classroom-primary":"bg-classroom-gray-200",F=()=>{t.resources.push({type:"link",title:"",url:""})},O=l=>{t.resources.splice(l,1)},M=l=>({link:"https://example.com",file:"/files/document.pdf",video:"https://youtube.com/watch?v=...",document:"https://docs.google.com/document/..."})[l]||"Enter resource URL or path",c=l=>{switch(l){case"title":r.title=t.title.trim()?"":"Class title is required";break;case"subject":r.subject=t.subject?"":"Subject is required";break;case"level":r.level=t.level?"":"Level is required";break;case"startAt":r.startAt=t.startAt?"":"Start date and time is required";break;case"durationMinutes":t.durationMinutes?t.durationMinutes<15||t.durationMinutes>480?r.durationMinutes="Duration must be between 15 and 480 minutes":r.durationMinutes="":r.durationMinutes="Duration is required";break}},z=async()=>{if(c("title"),c("subject"),c("level"),c("startAt"),c("durationMinutes"),r.title||r.subject||r.level||r.startAt||r.durationMinutes){k("Please fix the validation errors before creating the class");return}y.value=!0;try{const l=L.currentUser,s={...t,teacherId:l.id,resources:t.resources.filter(V=>V.title&&V.url),status:"scheduled",createdAt:new Date().toISOString()},o=await E.createClass(s),x={id:`course_${Date.now()}`,name:t.title,section:t.subject,description:t.description,room:"Virtual Classroom",subject:t.subject,gradeLevel:t.gradeLevel,level:t.level,color:H(),teachers:[l.id],students:[],code:J(t.subject),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},p=localStorage.getItem("courses"),A=p?JSON.parse(p):[];A.push(x),localStorage.setItem("courses",JSON.stringify(A)),k("Class created successfully!"),I.push("/teacher/classes")}catch(l){console.error("Error creating class:",l),k("Error creating class. Please try again.")}finally{y.value=!1}},H=()=>{const l=["#4285F4","#34A853","#FBBC05","#EA4335","#8E44AD","#2ECC71","#E74C3C","#1ABC9C"];return l[Math.floor(Math.random()*l.length)]},J=l=>{const s=l.substring(0,3).toUpperCase(),o=Math.floor(Math.random()*900)+100;return`${s}${o}`};Q(()=>{const l=new Date;l.setDate(l.getDate()+1),l.setHours(9,0,0,0),t.startAt=l.toISOString().slice(0,16)});const k=l=>{window.showToast&&window.showToast(l)};return(l,s)=>(n(),i("div",Y,[e("div",Z,[e("div",_,[s[23]||(s[23]=e("div",null,[e("h1",{class:"text-2xl font-medium text-classroom-gray-900"},"Create Class"),e("p",{class:"text-classroom-gray-600 mt-1"},"Set up a new class with all the necessary details")],-1)),e("button",{onClick:s[0]||(s[0]=o=>l.$router.back()),class:"btn-outline flex items-center space-x-2"},[...s[22]||(s[22]=[e("span",{class:"material-icons text-lg"},"arrow_back",-1),e("span",null,"Back",-1)])])]),e("form",{onSubmit:X(z,["prevent"]),class:"space-y-6"},[e("div",ss,[(n(),i(h,null,R(w,(o,x)=>e("div",{key:o.id,class:"flex items-center"},[e("div",{class:v(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors",T(o.id)])},m(o.id),3),e("span",{class:v(["ml-2 text-sm font-medium transition-colors",N(o.id)])},m(o.name),3),x<w.length-1?(n(),i("div",{key:0,class:v(["w-12 h-0.5 mx-4 transition-colors",P(o.id)])},null,2)):u("",!0)])),64))]),d.value===1?(n(),i("div",es,[e("div",ts,[s[34]||(s[34]=e("h2",{class:"text-lg font-medium text-classroom-gray-900 mb-4"},"Basic Information",-1)),e("div",os,[e("div",ls,[s[24]||(s[24]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Class Title * ",-1)),a(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t.title=o),type:"text",required:"",placeholder:"e.g., Advanced Mathematics",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",onInput:s[2]||(s[2]=o=>c("title"))},null,544),[[b,t.title]]),r.title?(n(),i("p",rs,m(r.title),1)):u("",!0)]),e("div",null,[s[26]||(s[26]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Subject * ",-1)),a(e("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>t.subject=o),required:"",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",onChange:s[4]||(s[4]=o=>c("subject"))},[...s[25]||(s[25]=[q('<option value="">Select subject</option><option value="mathematics">Mathematics</option><option value="science">Science</option><option value="english">English</option><option value="history">History</option><option value="art">Art</option><option value="music">Music</option><option value="physical-education">Physical Education</option><option value="computer-science">Computer Science</option><option value="foreign-language">Foreign Language</option>',10)])],544),[[g,t.subject]]),r.subject?(n(),i("p",as,m(r.subject),1)):u("",!0)]),e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Grade Level ",-1)),a(e("select",{"onUpdate:modelValue":s[5]||(s[5]=o=>t.gradeLevel=o),class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},[...s[27]||(s[27]=[q('<option value="">Any grade</option><option value="elementary">Elementary</option><option value="middle-school">Middle School</option><option value="high-school">High School</option><option value="college">College</option><option value="adult">Adult Education</option>',6)])],512),[[g,t.gradeLevel]])]),e("div",ns,[s[29]||(s[29]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Description ",-1)),a(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=o=>t.description=o),rows:"3",placeholder:"Describe what students will learn in this class...",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors resize-none focus-classroom"},null,512),[[b,t.description]]),e("p",is,m(t.description.length)+"/500 characters",1)]),e("div",null,[s[31]||(s[31]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Level * ",-1)),a(e("select",{"onUpdate:modelValue":s[7]||(s[7]=o=>t.level=o),required:"",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",onChange:s[8]||(s[8]=o=>c("level"))},[...s[30]||(s[30]=[e("option",{value:""},"Select level",-1),e("option",{value:"beginner"},"Beginner",-1),e("option",{value:"intermediate"},"Intermediate",-1),e("option",{value:"advanced"},"Advanced",-1)])],544),[[g,t.level]]),r.level?(n(),i("p",us,m(r.level),1)):u("",!0)]),e("div",null,[s[32]||(s[32]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Capacity (Optional) ",-1)),a(e("input",{"onUpdate:modelValue":s[9]||(s[9]=o=>t.capacity=o),type:"number",min:"1",max:"100",placeholder:"e.g., 30",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},null,512),[[b,t.capacity]]),s[33]||(s[33]=e("p",{class:"text-xs text-classroom-gray-500 mt-1"},"Maximum 100 students",-1))])])]),e("div",ds,[e("button",{type:"button",onClick:s[10]||(s[10]=o=>l.$router.back()),class:"btn-outline"}," Cancel "),e("button",{type:"button",onClick:C,class:"btn-primary flex items-center space-x-2",disabled:!$.value},[...s[35]||(s[35]=[e("span",null,"Next",-1),e("span",{class:"material-icons text-lg"},"arrow_forward",-1)])],8,cs)])])):u("",!0),d.value===2?(n(),i("div",ms,[e("div",ps,[s[48]||(s[48]=e("h2",{class:"text-lg font-medium text-classroom-gray-900 mb-4"},"Schedule & Settings",-1)),e("div",bs,[e("div",null,[s[36]||(s[36]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Start Date & Time * ",-1)),a(e("input",{"onUpdate:modelValue":s[11]||(s[11]=o=>t.startAt=o),type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",onChange:s[12]||(s[12]=o=>c("startAt"))},null,544),[[b,t.startAt]]),r.startAt?(n(),i("p",ys,m(r.startAt),1)):u("",!0)]),e("div",null,[s[37]||(s[37]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Duration (minutes) * ",-1)),a(e("input",{"onUpdate:modelValue":s[13]||(s[13]=o=>t.durationMinutes=o),type:"number",min:"15",max:"480",required:"",placeholder:"e.g., 90",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",onInput:s[14]||(s[14]=o=>c("durationMinutes"))},null,544),[[b,t.durationMinutes]]),r.durationMinutes?(n(),i("p",xs,m(r.durationMinutes),1)):u("",!0),s[38]||(s[38]=e("p",{class:"text-xs text-classroom-gray-500 mt-1"},"15-480 minutes",-1))]),e("div",gs,[e("label",fs,[a(e("input",{"onUpdate:modelValue":s[15]||(s[15]=o=>t.isRecurring=o),type:"checkbox",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary focus-classroom"},null,512),[[f,t.isRecurring]]),s[39]||(s[39]=e("span",{class:"text-sm font-medium text-classroom-gray-900"},"This is a recurring class",-1))])]),t.isRecurring?(n(),i("div",vs,[e("div",null,[s[41]||(s[41]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"},"Frequency",-1)),a(e("select",{"onUpdate:modelValue":s[16]||(s[16]=o=>t.recurrence.frequency=o),class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},[...s[40]||(s[40]=[e("option",{value:"weekly"},"Weekly",-1),e("option",{value:"biweekly"},"Bi-weekly",-1),e("option",{value:"monthly"},"Monthly",-1)])],512),[[g,t.recurrence.frequency]])]),e("div",null,[s[42]||(s[42]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"},"Occurrences",-1)),a(e("input",{"onUpdate:modelValue":s[17]||(s[17]=o=>t.recurrence.occurrences=o),type:"number",min:"1",max:"52",placeholder:"e.g., 12",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},null,512),[[b,t.recurrence.occurrences]])]),e("div",null,[s[43]||(s[43]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"},"End Date",-1)),a(e("input",{"onUpdate:modelValue":s[18]||(s[18]=o=>t.recurrence.endDate=o),type:"date",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},null,512),[[b,t.recurrence.endDate]])])])):u("",!0),e("div",ws,[s[47]||(s[47]=e("h3",{class:"text-md font-medium text-classroom-gray-900"},"Class Settings",-1)),e("div",ks,[e("label",Cs,[a(e("input",{"onUpdate:modelValue":s[19]||(s[19]=o=>t.settings.allowStudentPosts=o),type:"checkbox",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary focus-classroom"},null,512),[[f,t.settings.allowStudentPosts]]),s[44]||(s[44]=e("span",{class:"text-sm text-classroom-gray-900"},"Allow students to post in class stream",-1))]),e("label",Ss,[a(e("input",{"onUpdate:modelValue":s[20]||(s[20]=o=>t.settings.allowStudentComments=o),type:"checkbox",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary focus-classroom"},null,512),[[f,t.settings.allowStudentComments]]),s[45]||(s[45]=e("span",{class:"text-sm text-classroom-gray-900"},"Allow students to comment on posts",-1))]),e("label",Ms,[a(e("input",{"onUpdate:modelValue":s[21]||(s[21]=o=>t.settings.showDeletedItems=o),type:"checkbox",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary focus-classroom"},null,512),[[f,t.settings.showDeletedItems]]),s[46]||(s[46]=e("span",{class:"text-sm text-classroom-gray-900"},"Show deleted items in class stream",-1))])])])])]),e("div",As,[e("button",{type:"button",onClick:S,class:"btn-outline flex items-center space-x-2"},[...s[49]||(s[49]=[e("span",{class:"material-icons text-lg"},"arrow_back",-1),e("span",null,"Previous",-1)])]),e("button",{type:"button",onClick:C,class:"btn-primary flex items-center space-x-2",disabled:!B.value},[...s[50]||(s[50]=[e("span",null,"Next",-1),e("span",{class:"material-icons text-lg"},"arrow_forward",-1)])],8,Vs)])])):u("",!0),d.value===3?(n(),i("div",js,[e("div",Ds,[e("div",{class:"flex items-center justify-between mb-4"},[s[52]||(s[52]=e("h2",{class:"text-lg font-medium text-classroom-gray-900"},"Resources & Materials",-1)),e("button",{type:"button",onClick:F,class:"btn-outline flex items-center space-x-2 text-sm"},[...s[51]||(s[51]=[e("span",{class:"material-icons text-lg"},"add",-1),e("span",null,"Add Resource",-1)])])]),e("div",Us,[(n(!0),i(h,null,R(t.resources,(o,x)=>(n(),i("div",{key:x,class:"flex items-start space-x-4 p-4 border border-classroom-gray-200 rounded-classroom"},[e("div",hs,[e("div",null,[s[54]||(s[54]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"},"Type",-1)),a(e("select",{"onUpdate:modelValue":p=>o.type=p,class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},[...s[53]||(s[53]=[e("option",{value:"link"},"Link",-1),e("option",{value:"file"},"File",-1),e("option",{value:"video"},"Video",-1),e("option",{value:"document"},"Document",-1)])],8,Rs),[[g,o.type]])]),e("div",null,[s[55]||(s[55]=e("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"},"Title",-1)),a(e("input",{"onUpdate:modelValue":p=>o.title=p,type:"text",placeholder:"Resource title",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},null,8,qs),[[b,o.title]])]),e("div",Is,[e("label",Es,m(M(o.type)),1),a(e("input",{"onUpdate:modelValue":p=>o.url=p,type:"text",placeholder:M(o.type),class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},null,8,Ls),[[b,o.url]])])]),e("button",{type:"button",onClick:p=>O(x),class:"p-2 text-classroom-gray-400 hover:text-red-500 transition-colors focus-classroom","aria-label":"Remove resource"},[...s[56]||(s[56]=[e("span",{class:"material-icons"},"delete",-1)])],8,$s)]))),128)),t.resources.length===0?(n(),i("div",Bs,[...s[57]||(s[57]=[e("span",{class:"material-icons text-4xl mb-2 opacity-50"},"attach_file",-1),e("p",null,"No resources added yet",-1),e("p",{class:"text-sm"},"Add links or files that students will need for this class",-1)])])):u("",!0)])]),e("div",Ts,[e("button",{type:"button",onClick:S,class:"btn-outline flex items-center space-x-2"},[...s[58]||(s[58]=[e("span",{class:"material-icons text-lg"},"arrow_back",-1),e("span",null,"Previous",-1)])]),e("button",{type:"submit",disabled:y.value,class:v(["btn-primary flex items-center space-x-2",{"opacity-50 cursor-not-allowed":y.value}])},[y.value?(n(),i("span",Ps,"refresh")):u("",!0),e("span",null,m(y.value?"Creating...":"Create Class"),1)],10,Ns)])])):u("",!0)],32)])]))}};export{zs as default};
