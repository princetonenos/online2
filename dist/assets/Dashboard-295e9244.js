import{u as L,a as F,D as O,r as N,k as x,o as P,l as J,c as l,d as n,e as s,A as Y,t as i,w as u,h as D,y as q,f as g,G as _,F as E,m as G,I as W,n as K}from"./index-ae66ec3f.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";const X={class:"p-4"},Z={class:"flex items-start justify-between mb-3"},ss={class:"flex-1 min-w-0"},os={class:"font-medium text-classroom-gray-900 text-lg mb-1 truncate"},es={class:"text-sm text-classroom-gray-600 truncate"},ts={class:"flex items-center space-x-2 mb-3"},rs=["src","alt"],as={class:"text-sm text-classroom-gray-600 truncate"},ls={class:"flex items-center justify-between text-xs text-classroom-gray-500"},ns={class:"flex items-center space-x-4"},is={class:"flex items-center space-x-1"},cs={key:0,class:"flex items-center space-x-1"},ds=["title"],ms={key:0,class:"absolute right-2 top-10 bg-white rounded-classroom classroom-shadow-lg border border-classroom-gray-200 py-1 z-10 w-48"},us={__name:"CourseTile",props:{course:{type:Object,required:!0}},emits:["click"],setup(v){const a=v,U=L(),T=F(),C=O(),d=N(!1),p=x(()=>{if(!a.course.teachers||a.course.teachers.length===0)return null;const c=a.course.teachers[0];return T.getUserById(c)}),y=x(()=>{const c=new Date;return C.assignments.filter(b=>b.courseId===a.course.id&&new Date(b.dueDate)>c).length}),j=()=>{d.value=!d.value},f=()=>{navigator.clipboard.writeText(a.course.code).then(()=>{k("Class code copied to clipboard"),d.value=!1}).catch(()=>{k("Failed to copy class code")})},V=()=>{k("Share functionality would open here"),d.value=!1},S=()=>{k("Archive functionality would open here"),d.value=!1},h=c=>{U.push(`/course/${a.course.id}/${c}`),d.value=!1},A=c=>{!c.target.closest(".relative")&&!c.target.closest('button[aria-label="Course options"]')&&(d.value=!1)};P(()=>{document.addEventListener("click",A)}),J(()=>{document.removeEventListener("click",A)});const k=c=>{window.showToast&&window.showToast(c)};return(c,e)=>{var b,M,I;return l(),n("div",{class:"bg-white rounded-classroom classroom-shadow border border-classroom-gray-200 hover:border-classroom-primary transition-all duration-200 cursor-pointer group overflow-hidden",onClick:e[5]||(e[5]=w=>c.$emit("click"))},[s("div",{class:"h-2 w-full",style:Y({backgroundColor:v.course.color})},null,4),s("div",X,[s("div",Z,[s("div",ss,[s("h3",os,i(v.course.name),1),s("p",es,i(v.course.section),1)]),s("button",{onClick:u(j,["stop"]),class:"p-1 rounded-full hover:bg-classroom-gray-100 transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100 focus-classroom","aria-label":"Course options"},[...e[6]||(e[6]=[s("span",{class:"material-icons text-classroom-gray-600 text-lg"},"more_vert",-1)])])]),s("div",ts,[(b=p.value)!=null&&b.avatar?(l(),n("img",{key:0,src:p.value.avatar,alt:p.value.name,class:"w-6 h-6 rounded-full"},null,8,rs)):D("",!0),s("span",as,i(((M=p.value)==null?void 0:M.name)||"Teacher"),1)]),s("div",ls,[s("div",ns,[s("span",is,[e[7]||(e[7]=s("span",{class:"material-icons text-sm"},"people",-1)),s("span",null,i(((I=v.course.students)==null?void 0:I.length)||0)+" students",1)]),y.value>0?(l(),n("span",cs,[e[8]||(e[8]=s("span",{class:"material-icons text-sm"},"assignment",-1)),s("span",null,i(y.value)+" due",1)])):D("",!0)]),s("button",{onClick:u(f,["stop"]),class:"chip chip-gray hover:bg-classroom-gray-200 transition-colors",title:`Class code: ${v.course.code}`},i(v.course.code),9,ds)])]),d.value?(l(),n("div",ms,[s("button",{onClick:e[0]||(e[0]=u(w=>h("stream"),["stop"])),class:"w-full text-left px-4 py-2 hover:bg-classroom-gray-100 text-sm flex items-center space-x-2"},[...e[9]||(e[9]=[s("span",{class:"material-icons text-classroom-gray-600 text-lg"},"chat",-1),s("span",null,"Stream",-1)])]),s("button",{onClick:e[1]||(e[1]=u(w=>h("classwork"),["stop"])),class:"w-full text-left px-4 py-2 hover:bg-classroom-gray-100 text-sm flex items-center space-x-2"},[...e[10]||(e[10]=[s("span",{class:"material-icons text-classroom-gray-600 text-lg"},"assignment",-1),s("span",null,"Classwork",-1)])]),s("button",{onClick:e[2]||(e[2]=u(w=>h("people"),["stop"])),class:"w-full text-left px-4 py-2 hover:bg-classroom-gray-100 text-sm flex items-center space-x-2"},[...e[11]||(e[11]=[s("span",{class:"material-icons text-classroom-gray-600 text-lg"},"people",-1),s("span",null,"People",-1)])]),s("button",{onClick:e[3]||(e[3]=u(w=>h("grades"),["stop"])),class:"w-full text-left px-4 py-2 hover:bg-classroom-gray-100 text-sm flex items-center space-x-2"},[...e[12]||(e[12]=[s("span",{class:"material-icons text-classroom-gray-600 text-lg"},"grade",-1),s("span",null,"Grades",-1)])]),s("button",{onClick:e[4]||(e[4]=u(w=>h("live"),["stop"])),class:"w-full text-left px-4 py-2 hover:bg-classroom-gray-100 text-sm flex items-center space-x-2"},[...e[13]||(e[13]=[s("span",{class:"material-icons text-classroom-gray-600 text-lg"},"video_call",-1),s("span",null,"Live Class",-1)])]),e[17]||(e[17]=s("div",{class:"border-t border-classroom-gray-100 my-1"},null,-1)),s("button",{onClick:u(f,["stop"]),class:"w-full text-left px-4 py-2 hover:bg-classroom-gray-100 text-sm flex items-center space-x-2"},[...e[14]||(e[14]=[s("span",{class:"material-icons text-classroom-gray-600 text-lg"},"content_copy",-1),s("span",null,"Copy class code",-1)])]),s("button",{onClick:u(V,["stop"]),class:"w-full text-left px-4 py-2 hover:bg-classroom-gray-100 text-sm flex items-center space-x-2"},[...e[15]||(e[15]=[s("span",{class:"material-icons text-classroom-gray-600 text-lg"},"share",-1),s("span",null,"Share class",-1)])]),e[18]||(e[18]=s("div",{class:"border-t border-classroom-gray-100 my-1"},null,-1)),s("button",{onClick:u(S,["stop"]),class:"w-full text-left px-4 py-2 hover:bg-classroom-gray-100 text-sm flex items-center space-x-2 text-classroom-gray-500"},[...e[16]||(e[16]=[s("span",{class:"material-icons text-classroom-gray-600 text-lg"},"archive",-1),s("span",null,"Archive",-1)])])])):D("",!0)])}}},ps=Q(us,[["__scopeId","data-v-f47ba1ae"]]),gs={class:"p-6 max-w-7xl mx-auto"},xs={class:"mb-8"},vs={class:"text-3xl font-medium text-classroom-gray-900 mb-2"},ys={class:"text-classroom-gray-600"},fs={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},bs={class:"bg-white rounded-classroom classroom-shadow p-4"},hs={class:"flex items-center justify-between"},ws={class:"text-2xl font-medium text-classroom-gray-900"},Cs={class:"bg-white rounded-classroom classroom-shadow p-4"},ks={class:"flex items-center justify-between"},$s={class:"text-2xl font-medium text-classroom-gray-900"},Ds={class:"bg-white rounded-classroom classroom-shadow p-4"},Ts={class:"flex items-center justify-between"},js={class:"text-2xl font-medium text-classroom-gray-900"},Ss={class:"bg-white rounded-classroom classroom-shadow p-4"},_s={class:"flex items-center justify-between"},As={class:"text-2xl font-medium text-classroom-gray-900"},Ms={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},Is={class:"flex items-center justify-between mb-6"},Us={class:"flex items-center space-x-2"},Vs=["aria-label"],Bs={class:"material-icons text-classroom-gray-600"},Es={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},Gs={key:1,class:"text-center py-12"},Ns={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},Ls={class:"mt-12"},Fs={class:"bg-white rounded-classroom classroom-shadow overflow-hidden"},Os={key:0,class:"p-8 text-center text-classroom-gray-500"},Ps={key:1,class:"divide-y divide-classroom-gray-100"},Rs=["onClick"],zs={class:"flex items-start justify-between"},Hs={class:"flex-1"},Js={class:"font-medium text-classroom-gray-900 mb-1"},Ys={class:"text-sm text-classroom-gray-600 mb-2"},qs={class:"flex items-center space-x-4 text-xs text-classroom-gray-500"},Ws={class:"flex items-center space-x-1"},Xs={__name:"Dashboard",setup(v){const a=L(),U=F(),T=q(),C=O(),d=N(!1),p=N(!0),y=x(()=>U.currentUser),j=x(()=>{var t;return((t=y.value)==null?void 0:t.role)||"student"}),f=x(()=>y.value?T.getCoursesForUser(y.value.id):[]),V=x(()=>{const t=new Date().getHours();return t<12?"Good morning! Ready to learn something new today?":t<18?"Good afternoon! Hope your day is going well.":"Good evening! Time to wrap up your work."}),S=x(()=>C.assignments.filter(o=>{const m=new Date(o.dueDate),r=new Date;return m>r&&m<new Date(r.getTime()+6048e5)}).sort((o,m)=>new Date(o.dueDate)-new Date(m.dueDate)).slice(0,5)),h=x(()=>{const t=new Date;t.setHours(0,0,0,0);const o=new Date(t);return o.setDate(o.getDate()+1),C.assignments.filter(m=>{const r=new Date(m.dueDate);return r>=t&&r<o}).length}),A=x(()=>Math.floor(C.assignments.length*.6)),k=t=>{const o=T.getCourseById(t);return(o==null?void 0:o.name)||"Unknown Course"},c=t=>{const o=new Date(t),m=new Date,r=o.getTime()-m.getTime(),$=Math.ceil(r/(1e3*60*60*24));return $===0?"Today":$===1?"Tomorrow":$<7?`In ${$} days`:o.toLocaleDateString()},e=t=>t>=100?"chip-primary":t>=50?"chip-secondary":"chip-gray",b=()=>{var t;((t=y.value)==null?void 0:t.role)==="teacher"?a.push("/teacher/create-class"):a.push("/create")},M=()=>{B("Join class modal would open here")},I=()=>{a.push("/calendar")},w=t=>{a.push(`/course/${t}/stream`)},R=t=>{a.push(`/course/${t.courseId}/assignments/${t.id}`)},z=()=>{f.value.length>0?a.push(`/course/${f.value[0].id}/stream`):B("You need to join a class first to access the stream")},H=()=>{p.value=!p.value};P(async()=>{d.value=!0;try{await Promise.all([T.loadCourses(),C.loadAssignments()])}catch(t){console.error("Error loading data:",t),B("Error loading courses and assignments")}finally{d.value=!1}});const B=t=>{window.showToast&&window.showToast(t)};return(t,o)=>{var m;return l(),n("div",gs,[s("div",xs,[s("h1",vs," Welcome, "+i((m=y.value)==null?void 0:m.name)+"! ",1),s("p",ys,i(V.value),1)]),s("div",fs,[s("div",bs,[s("div",hs,[s("div",null,[o[5]||(o[5]=s("p",{class:"text-sm text-classroom-gray-500"},"Your Classes",-1)),s("p",ws,i(f.value.length),1)]),o[6]||(o[6]=s("div",{class:"w-12 h-12 bg-classroom-primary bg-opacity-10 rounded-classroom flex items-center justify-center"},[s("span",{class:"material-icons text-classroom-primary"},"school")],-1))])]),s("div",Cs,[s("div",ks,[s("div",null,[o[7]||(o[7]=s("p",{class:"text-sm text-classroom-gray-500"},"Upcoming",-1)),s("p",$s,i(S.value.length),1)]),o[8]||(o[8]=s("div",{class:"w-12 h-12 bg-classroom-secondary bg-opacity-10 rounded-classroom flex items-center justify-center"},[s("span",{class:"material-icons text-classroom-secondary"},"assignment")],-1))])]),s("div",Ds,[s("div",Ts,[s("div",null,[o[9]||(o[9]=s("p",{class:"text-sm text-classroom-gray-500"},"Due Today",-1)),s("p",js,i(h.value),1)]),o[10]||(o[10]=s("div",{class:"w-12 h-12 bg-classroom-support bg-opacity-10 rounded-classroom flex items-center justify-center"},[s("span",{class:"material-icons text-classroom-support"},"schedule")],-1))])]),s("div",Ss,[s("div",_s,[s("div",null,[o[11]||(o[11]=s("p",{class:"text-sm text-classroom-gray-500"},"Completed",-1)),s("p",As,i(A.value),1)]),o[12]||(o[12]=s("div",{class:"w-12 h-12 bg-classroom-primary bg-opacity-10 rounded-classroom flex items-center justify-center"},[s("span",{class:"material-icons text-classroom-primary"},"check_circle")],-1))])])]),s("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"},[s("button",{onClick:b,class:"p-4 bg-white rounded-classroom classroom-shadow border border-classroom-gray-200 hover:border-classroom-primary transition-colors text-left group focus-classroom"},[...o[13]||(o[13]=[g('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-classroom-primary bg-opacity-10 rounded-classroom flex items-center justify-center"><span class="material-icons text-classroom-primary">add</span></div><div><h3 class="font-medium text-classroom-gray-900">Create class</h3><p class="text-sm text-classroom-gray-500">Start a new class</p></div></div>',1)])]),s("button",{onClick:M,class:"p-4 bg-white rounded-classroom classroom-shadow border border-classroom-gray-200 hover:border-classroom-primary transition-colors text-left group focus-classroom"},[...o[14]||(o[14]=[g('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-classroom-secondary bg-opacity-10 rounded-classroom flex items-center justify-center"><span class="material-icons text-classroom-secondary">group_add</span></div><div><h3 class="font-medium text-classroom-gray-900">Join class</h3><p class="text-sm text-classroom-gray-500">Enter a class code</p></div></div>',1)])]),s("button",{onClick:I,class:"p-4 bg-white rounded-classroom classroom-shadow border border-classroom-gray-200 hover:border-classroom-primary transition-colors text-left group focus-classroom"},[...o[15]||(o[15]=[g('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-classroom-support bg-opacity-10 rounded-classroom flex items-center justify-center"><span class="material-icons text-classroom-support">calendar_today</span></div><div><h3 class="font-medium text-classroom-gray-900">View calendar</h3><p class="text-sm text-classroom-gray-500">See upcoming work</p></div></div>',1)])])]),s("div",Ms,[s("button",{onClick:o[0]||(o[0]=r=>_(a).push("/profile")),class:"p-4 bg-white rounded-classroom classroom-shadow border border-classroom-gray-200 hover:border-classroom-primary transition-colors text-left group focus-classroom"},[...o[16]||(o[16]=[g('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-classroom-support bg-opacity-10 rounded-classroom flex items-center justify-center"><span class="material-icons text-classroom-support">person</span></div><div><h3 class="font-medium text-classroom-gray-900">Profile</h3><p class="text-sm text-classroom-gray-500">View your profile</p></div></div>',1)])]),s("button",{onClick:o[1]||(o[1]=r=>_(a).push("/settings")),class:"p-4 bg-white rounded-classroom classroom-shadow border border-classroom-gray-200 hover:border-classroom-primary transition-colors text-left group focus-classroom"},[...o[17]||(o[17]=[g('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-classroom-support bg-opacity-10 rounded-classroom flex items-center justify-center"><span class="material-icons text-classroom-support">settings</span></div><div><h3 class="font-medium text-classroom-gray-900">Settings</h3><p class="text-sm text-classroom-gray-500">Manage your settings</p></div></div>',1)])]),s("button",{onClick:z,class:"p-4 bg-white rounded-classroom classroom-shadow border border-classroom-gray-200 hover:border-classroom-primary transition-colors text-left group focus-classroom"},[...o[18]||(o[18]=[g('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-classroom-support bg-opacity-10 rounded-classroom flex items-center justify-center"><span class="material-icons text-classroom-support">stream</span></div><div><h3 class="font-medium text-classroom-gray-900">Stream</h3><p class="text-sm text-classroom-gray-500">View class announcements</p></div></div>',1)])]),j.value==="teacher"?(l(),n("button",{key:0,onClick:o[2]||(o[2]=r=>_(a).push("/teacher/reports")),class:"p-4 bg-white rounded-classroom classroom-shadow border border-classroom-gray-200 hover:border-classroom-primary transition-colors text-left group focus-classroom"},[...o[19]||(o[19]=[g('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-classroom-support bg-opacity-10 rounded-classroom flex items-center justify-center"><span class="material-icons text-classroom-support">assessment</span></div><div><h3 class="font-medium text-classroom-gray-900">Reports</h3><p class="text-sm text-classroom-gray-500">View reports and analytics</p></div></div>',1)])])):D("",!0),j.value==="teacher"?(l(),n("button",{key:1,onClick:o[3]||(o[3]=r=>_(a).push("/teacher/assignments")),class:"p-4 bg-white rounded-classroom classroom-shadow border border-classroom-gray-200 hover:border-classroom-primary transition-colors text-left group focus-classroom"},[...o[20]||(o[20]=[g('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-classroom-support bg-opacity-10 rounded-classroom flex items-center justify-center"><span class="material-icons text-classroom-support">assignment</span></div><div><h3 class="font-medium text-classroom-gray-900">Assignments</h3><p class="text-sm text-classroom-gray-500">Manage all assignments</p></div></div>',1)])])):D("",!0),j.value==="admin"?(l(),n("button",{key:2,onClick:o[4]||(o[4]=r=>_(a).push("/admin/schools")),class:"p-4 bg-white rounded-classroom classroom-shadow border border-classroom-gray-200 hover:border-classroom-primary transition-colors text-left group focus-classroom"},[...o[21]||(o[21]=[g('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-classroom-support bg-opacity-10 rounded-classroom flex items-center justify-center"><span class="material-icons text-classroom-support">school</span></div><div><h3 class="font-medium text-classroom-gray-900">Schools</h3><p class="text-sm text-classroom-gray-500">Manage school settings</p></div></div>',1)])])):D("",!0)]),s("div",null,[s("div",Is,[o[22]||(o[22]=s("h2",{class:"text-2xl font-medium text-classroom-gray-900"},"Your classes",-1)),s("div",Us,[s("button",{onClick:H,class:"p-2 rounded-classroom hover:bg-classroom-gray-100 transition-colors focus-classroom","aria-label":p.value?"Switch to list view":"Switch to grid view"},[s("span",Bs,i(p.value?"view_list":"view_module"),1)],8,Vs)])]),d.value?(l(),n("div",Es,[(l(),n(E,null,G(8,r=>s("div",{key:r,class:"bg-white rounded-classroom classroom-shadow p-4"},[...o[23]||(o[23]=[s("div",{class:"skeleton w-full h-32 mb-3"},null,-1),s("div",{class:"skeleton h-4 w-3/4 mb-2"},null,-1),s("div",{class:"skeleton h-3 w-1/2"},null,-1)])])),64))])):f.value.length===0?(l(),n("div",Gs,[o[24]||(o[24]=s("div",{class:"w-24 h-24 bg-classroom-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[s("span",{class:"material-icons text-classroom-gray-400 text-4xl"},"school")],-1)),o[25]||(o[25]=s("h3",{class:"text-xl font-medium text-classroom-gray-900 mb-2"},"No classes yet",-1)),o[26]||(o[26]=s("p",{class:"text-classroom-gray-600 mb-6"},"Get started by creating or joining a class",-1)),s("button",{onClick:b,class:"btn-primary"}," Create your first class ")])):(l(),n("div",Ns,[(l(!0),n(E,null,G(f.value,r=>(l(),W(ps,{key:r.id,course:r,onClick:$=>w(r.id)},null,8,["course","onClick"]))),128))]))]),s("div",Ls,[o[30]||(o[30]=s("h2",{class:"text-2xl font-medium text-classroom-gray-900 mb-6"},"Upcoming",-1)),s("div",Fs,[S.value.length===0?(l(),n("div",Os,[...o[27]||(o[27]=[s("span",{class:"material-icons text-4xl mb-2 opacity-50"},"assignment",-1),s("p",null,"No upcoming assignments",-1)])])):(l(),n("div",Ps,[(l(!0),n(E,null,G(S.value,r=>(l(),n("div",{key:r.id,class:"p-4 hover:bg-classroom-gray-50 transition-colors cursor-pointer",onClick:$=>R(r)},[s("div",zs,[s("div",Hs,[s("h3",Js,i(r.title),1),s("p",Ys,i(k(r.courseId)),1),s("div",qs,[s("span",Ws,[o[28]||(o[28]=s("span",{class:"material-icons text-sm"},"schedule",-1)),s("span",null,i(c(r.dueDate)),1)]),s("span",{class:K(["chip",e(r.points)])},i(r.points)+" points ",3)])]),o[29]||(o[29]=s("span",{class:"material-icons text-classroom-gray-400"},"chevron_right",-1))])],8,Rs))),128))]))])])])}}};export{Xs as default};
