import{p as Y,u as $,a as q,y as z,r as i,k as b,o as P,l as G,c as l,d as r,e,t as a,n as g,h as w,F as k,m as S,g as Q,v as X,C as Z}from"./index-ae66ec3f.js";const ee={class:"h-screen bg-gray-900 flex flex-col"},se={class:"bg-gray-800 text-white p-4 border-b border-gray-700"},te={class:"flex items-center justify-between"},ae={class:"flex items-center space-x-4"},oe={class:"flex items-center space-x-3"},le={class:"text-xl font-semibold"},re={class:"text-gray-300 text-sm flex items-center space-x-2"},ne={class:"flex items-center space-x-1"},ie={class:"flex items-center space-x-1"},de={class:"flex items-center space-x-4"},ce={class:"flex items-center space-x-3 bg-gray-700 px-4 py-2 rounded-classroom"},ue={class:"material-icons text-white text-lg"},me={class:"material-icons text-white text-lg"},ve={class:"flex-1 flex"},ge={class:"flex-1 p-4"},xe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 h-full"},pe={class:"bg-classroom-gray-800 rounded-classroom overflow-hidden relative"},fe={class:"absolute bottom-2 left-2 bg-black bg-opacity-50 px-2 py-1 rounded text-sm text-white"},he={key:0,class:"absolute top-2 right-2 bg-classroom-primary px-2 py-1 rounded text-xs text-white"},be={class:"absolute bottom-2 left-2 bg-black bg-opacity-50 px-2 py-1 rounded text-sm text-white"},ye={key:0,class:"absolute top-2 right-2 bg-red-500 p-1 rounded-full"},_e={key:0,class:"bg-classroom-gray-800 rounded-classroom flex items-center justify-center"},we={class:"w-80 bg-classroom-gray-800 border-l border-classroom-gray-700 flex flex-col"},ke={class:"flex-1 flex flex-col"},Se={class:"flex-1 overflow-y-auto p-4 space-y-3"},Ce={class:"flex items-start space-x-2"},Me=["src","alt"],Te={class:"flex-1"},je={class:"flex items-center space-x-2"},Ae={class:"font-medium text-white"},Ve={class:"text-classroom-gray-400 text-xs"},He={class:"text-classroom-gray-300 mt-1"},Ie={class:"p-4 border-t border-classroom-gray-700"},Le={class:"flex space-x-2"},Re=["disabled"],Ue={class:"border-t border-classroom-gray-700"},We={class:"p-4"},Be={class:"font-medium text-white mb-3"},De={class:"space-y-2"},Ee=["src","alt"],Fe={class:"flex-1"},Je={class:"text-sm text-white"},Ke={class:"text-xs text-classroom-gray-400"},Ne={class:"flex items-center space-x-1"},$e={__name:"LiveClass",setup(Oe){var j,A;const H=Y(),C=$(),I=q(),L=z(),u=i(!1),m=i(!1),x=i(!1),f=i(!1),v=i(""),y=i(0);let h=null;const R=b(()=>H.params.id),o=b(()=>I.currentUser),U=b(()=>L.getCourseById(R.value)),W=b(()=>{const n=Math.floor(y.value/60),s=y.value%60;return`${n.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}),d=i([{id:1,name:"Alex Johnson",avatar:"/avatars/student1.jpg",role:"student",audio:!0,video:!1},{id:2,name:"Sarah Miller",avatar:"/avatars/student2.jpg",role:"student",audio:!1,video:!0},{id:3,name:"Tom Wilson",avatar:"/avatars/student3.jpg",role:"student",audio:!0,video:!0}]),M=i([{id:1,user:{name:"Alex Johnson",avatar:"/avatars/student1.jpg"},text:"Hello everyone!",time:"10:01 AM"},{id:2,user:{name:(j=o.value)==null?void 0:j.name,avatar:(A=o.value)==null?void 0:A.avatar},text:"Welcome to today's class! Let's get started.",time:"10:02 AM"},{id:3,user:{name:"Sarah Miller",avatar:"/avatars/student2.jpg"},text:"I have a question about the homework.",time:"10:03 AM"}]),B=()=>{u.value=!u.value,c(u.value?"Microphone muted":"Microphone unmuted")},D=()=>{m.value=!m.value,c(m.value?"Video turned off":"Video turned on")},E=()=>{x.value=!x.value,c(x.value?"Screen sharing started":"Screen sharing stopped")},F=()=>{f.value=!f.value,c(f.value?"Hand raised":"Hand lowered")},J=()=>{c("Whiteboard would open in a new window")},T=()=>{var s,p;if(!v.value.trim())return;const n={id:Date.now(),user:{name:(s=o.value)==null?void 0:s.name,avatar:(p=o.value)==null?void 0:p.avatar},text:v.value.trim(),time:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};M.value.push(n),v.value=""},K=()=>{confirm("Are you sure you want to leave the class?")&&(_(),C.back(),c("You left the class"))},N=()=>{confirm("Are you sure you want to end the class for everyone?")&&(_(),C.back(),c("Class ended"))},O=()=>{h=setInterval(()=>{y.value++},1e3)},_=()=>{h&&(clearInterval(h),h=null)};P(()=>{O(),o.value&&!d.value.find(n=>n.id===o.value.id)&&d.value.unshift({id:o.value.id,name:o.value.name,avatar:o.value.avatar,role:"teacher",audio:!u.value,video:!m.value})}),G(()=>{_()});const c=n=>{window.showToast&&window.showToast(n)};return(n,s)=>{var p,V;return l(),r("div",ee,[e("div",se,[e("div",te,[e("div",ae,[e("button",{onClick:K,class:"p-2 rounded-full hover:bg-gray-700 transition-colors bg-gray-700","aria-label":"Leave class"},[...s[1]||(s[1]=[e("span",{class:"material-icons text-lg"},"arrow_back",-1)])]),e("div",oe,[s[5]||(s[5]=e("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center"},[e("span",{class:"material-icons text-white"},"video_call")],-1)),e("div",null,[e("h1",le,a((p=U.value)==null?void 0:p.name),1),e("p",re,[e("span",ne,[s[2]||(s[2]=e("span",{class:"material-icons text-xs"},"schedule",-1)),e("span",null,a(W.value),1)]),s[4]||(s[4]=e("span",null,"â€¢",-1)),e("span",ie,[s[3]||(s[3]=e("span",{class:"material-icons text-xs"},"people",-1)),e("span",null,a(d.value.length)+" participants",1)])])])])]),e("div",de,[e("div",ce,[e("button",{onClick:B,class:g(["p-3 rounded-full transition-all duration-200",u.value?"bg-red-500 hover:bg-red-600":"bg-gray-600 hover:bg-gray-500"]),"aria-label":"Toggle microphone"},[e("span",ue,a(u.value?"mic_off":"mic"),1)],2),e("button",{onClick:D,class:g(["p-3 rounded-full transition-all duration-200",m.value?"bg-red-500 hover:bg-red-600":"bg-gray-600 hover:bg-gray-500"]),"aria-label":"Toggle video"},[e("span",me,a(m.value?"videocam_off":"videocam"),1)],2),e("button",{onClick:E,class:g(["p-3 rounded-full transition-all duration-200",x.value?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 hover:bg-gray-500"]),"aria-label":"Toggle screen share"},[...s[6]||(s[6]=[e("span",{class:"material-icons text-white text-lg"},"screen_share",-1)])],2),e("button",{onClick:F,class:g(["p-3 rounded-full transition-all duration-200",f.value?"bg-yellow-500 hover:bg-yellow-600":"bg-gray-600 hover:bg-gray-500"]),"aria-label":"Raise hand"},[...s[7]||(s[7]=[e("span",{class:"material-icons text-white text-lg"},"front_hand",-1)])],2),e("button",{onClick:J,class:"p-3 rounded-full bg-gray-600 hover:bg-gray-500 transition-all duration-200","aria-label":"Open whiteboard"},[...s[8]||(s[8]=[e("span",{class:"material-icons text-white text-lg"},"draw",-1)])])]),e("button",{onClick:N,class:"bg-red-500 hover:bg-red-600 px-6 py-3 rounded-classroom transition-all duration-200 font-medium flex items-center space-x-2 shadow-lg"},[...s[9]||(s[9]=[e("span",{class:"material-icons text-lg"},"call_end",-1),e("span",null,"End Class",-1)])])])])]),e("div",ve,[e("div",ge,[e("div",xe,[e("div",pe,[s[10]||(s[10]=e("div",{class:"aspect-video bg-classroom-gray-700 flex items-center justify-center"},[e("span",{class:"material-icons text-classroom-gray-500 text-6xl"},"person")],-1)),e("div",fe,a((V=o.value)==null?void 0:V.name)+" (You) ",1),x.value?(l(),r("div",he," Screen Sharing ")):w("",!0)]),(l(!0),r(k,null,S(d.value,t=>(l(),r("div",{key:t.id,class:"bg-classroom-gray-800 rounded-classroom overflow-hidden relative"},[s[12]||(s[12]=e("div",{class:"aspect-video bg-classroom-gray-700 flex items-center justify-center"},[e("span",{class:"material-icons text-classroom-gray-500 text-4xl"},"person")],-1)),e("div",be,a(t.name),1),t.audio?w("",!0):(l(),r("div",ye,[...s[11]||(s[11]=[e("span",{class:"material-icons text-white text-sm"},"mic_off",-1)])]))]))),128)),d.value.length===1?(l(),r("div",_e,[...s[13]||(s[13]=[e("div",{class:"text-center text-classroom-gray-400"},[e("span",{class:"material-icons text-6xl mb-2"},"people"),e("p",null,"Waiting for students to join...")],-1)])])):w("",!0)])]),e("div",we,[e("div",ke,[s[15]||(s[15]=e("div",{class:"p-4 border-b border-classroom-gray-700"},[e("h3",{class:"font-medium text-white"},"Chat")],-1)),e("div",Se,[(l(!0),r(k,null,S(M.value,t=>(l(),r("div",{key:t.id,class:"text-sm"},[e("div",Ce,[e("img",{src:t.user.avatar,alt:t.user.name,class:"w-6 h-6 rounded-full"},null,8,Me),e("div",Te,[e("div",je,[e("span",Ae,a(t.user.name),1),e("span",Ve,a(t.time),1)]),e("p",He,a(t.text),1)])])]))),128))]),e("div",Ie,[e("div",Le,[Q(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>v.value=t),onKeydown:Z(T,["enter"]),type:"text",placeholder:"Send a message...",class:"flex-1 bg-classroom-gray-700 border border-classroom-gray-600 rounded-classroom px-3 py-2 text-white placeholder-classroom-gray-400 focus:outline-none focus:border-classroom-primary transition-colors"},null,544),[[X,v.value]]),e("button",{onClick:T,class:"bg-classroom-primary hover:bg-classroom-primary-dark px-4 py-2 rounded-classroom transition-colors",disabled:!v.value.trim()},[...s[14]||(s[14]=[e("span",{class:"material-icons text-sm"},"send",-1)])],8,Re)])])]),e("div",Ue,[e("div",We,[e("h3",Be,"Participants ("+a(d.value.length)+")",1),e("div",De,[(l(!0),r(k,null,S(d.value,t=>(l(),r("div",{key:t.id,class:"flex items-center space-x-3 p-2 rounded-classroom hover:bg-classroom-gray-700 transition-colors"},[e("img",{src:t.avatar,alt:t.name,class:"w-8 h-8 rounded-full"},null,8,Ee),e("div",Fe,[e("p",Je,a(t.name),1),e("p",Ke,a(t.role),1)]),e("div",Ne,[e("span",{class:g(["material-icons text-sm",t.audio?"text-classroom-primary":"text-red-500"])},a(t.audio?"mic":"mic_off"),3),e("span",{class:g(["material-icons text-sm",t.video?"text-classroom-primary":"text-red-500"])},a(t.video?"videocam":"videocam_off"),3)])]))),128))])])])])])])}}};export{$e as default};
