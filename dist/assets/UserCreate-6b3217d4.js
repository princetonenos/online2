import{_ as y,u as g,G as U,r as d,x as k,a as v,b,e as l,f as a,v as n,C,t as f,h as V,y as S,m as h,w as N,k as T}from"./index-0bf52f7e.js";const q={class:"p-6 max-w-2xl"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},A={key:0,class:"p-3 bg-red-50 text-red-700 rounded"},D={class:"flex gap-3 pt-2"},E=["disabled"],F={__name:"UserCreate",setup(M){const x=g(),m=U(),o=d({name:"",email:"",role:"student",school:""}),u=d(""),p=d(""),i=d(!1),t=d("");async function c(){if(t.value="",u.value!==p.value){t.value="Passwords do not match";return}i.value=!0;try{if(await m.loadFromStorage(),m.getByEmail(o.value.email)){t.value="A user with this email already exists";return}await m.createUser(o.value,u.value),window.showToast&&window.showToast("User created"),x.push("/admin/users")}catch(r){t.value=(r==null?void 0:r.message)||"Failed to create user"}finally{i.value=!1}}return(r,e)=>{const w=k("router-link");return v(),b("div",q,[e[14]||(e[14]=l("h1",{class:"text-2xl font-semibold mb-6"},"Create User",-1)),l("form",{class:"space-y-4",onSubmit:N(c,["prevent"])},[l("div",null,[e[6]||(e[6]=l("label",{class:"block text-sm mb-1",for:"name"},"Name",-1)),a(l("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.name=s),id:"name",type:"text",class:"border rounded px-3 py-2 w-full",placeholder:"Full name",required:""},null,512),[[n,o.value.name]])]),l("div",null,[e[7]||(e[7]=l("label",{class:"block text-sm mb-1",for:"email"},"Email",-1)),a(l("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.email=s),id:"email",type:"email",class:"border rounded px-3 py-2 w-full",placeholder:"email@example.com",required:""},null,512),[[n,o.value.email]])]),l("div",null,[e[9]||(e[9]=l("label",{class:"block text-sm mb-1",for:"role"},"Role",-1)),a(l("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.role=s),id:"role",class:"border rounded px-3 py-2 w-full"},[...e[8]||(e[8]=[l("option",{value:"student"},"Student",-1),l("option",{value:"teacher"},"Teacher",-1),l("option",{value:"admin"},"Admin",-1)])],512),[[C,o.value.role]])]),l("div",null,[e[10]||(e[10]=l("label",{class:"block text-sm mb-1",for:"school"},"School",-1)),a(l("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.school=s),id:"school",type:"text",class:"border rounded px-3 py-2 w-full",placeholder:"School name"},null,512),[[n,o.value.school]])]),l("div",B,[l("div",null,[e[11]||(e[11]=l("label",{class:"block text-sm mb-1",for:"password"},"Password",-1)),a(l("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>u.value=s),id:"password",type:"password",class:"border rounded px-3 py-2 w-full",placeholder:"At least 6 characters",minlength:"6",required:""},null,512),[[n,u.value]])]),l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm mb-1",for:"confirm"},"Confirm Password",-1)),a(l("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>p.value=s),id:"confirm",type:"password",class:"border rounded px-3 py-2 w-full",placeholder:"Re-enter password",minlength:"6",required:""},null,512),[[n,p.value]])])]),t.value?(v(),b("div",A,f(t.value),1)):V("",!0),l("div",D,[S(w,{to:"/admin/users",class:"px-4 py-2 border rounded"},{default:h(()=>[...e[13]||(e[13]=[T("Cancel",-1)])]),_:1}),l("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded",disabled:i.value},f(i.value?"Creating...":"Create User"),9,E)])],32)])}}},R=y(F,[["__file","/Users/mac/Development/startups/online2/src/views/admin/UserCreate.vue"]]);export{R as default};
