import{u as B,a as W,y as Y,D as H,r as O,k as y,o as V,c,d as i,e as t,t as d,F as p,m as h,n as D,w as z}from"./index-ae66ec3f.js";const P={class:"p-6 max-w-7xl mx-auto"},R={class:"bg-white rounded-classroom classroom-shadow p-6"},q={class:"flex items-center justify-between mb-6"},G={class:"text-xl font-medium text-classroom-gray-900"},J={class:"grid grid-cols-7 gap-1 mb-2"},K={class:"grid grid-cols-7 gap-1"},Q=["onClick"],X={class:"flex items-center justify-between mb-1"},Z={class:"space-y-1"},ss=["onClick"],ts={class:"mt-8"},es={class:"bg-white rounded-classroom classroom-shadow overflow-hidden"},os={key:0,class:"p-8 text-center text-classroom-gray-500"},as={key:1,class:"divide-y divide-classroom-gray-100"},rs=["onClick"],ns={class:"flex items-start justify-between"},cs={class:"flex-1"},is={class:"font-medium text-classroom-gray-900 mb-1"},ls={class:"text-sm text-classroom-gray-600 mb-2"},ds={class:"flex items-center space-x-4 text-xs text-classroom-gray-500"},us={class:"flex items-center space-x-1"},ys={__name:"CalendarView",setup(ms){const f=B(),w=W(),x=Y(),v=H(),l=O(new Date),k=y(()=>l.value.toLocaleDateString("en-US",{month:"long",year:"numeric"})),M=y(()=>{const e=l.value.getFullYear(),o=l.value.getMonth(),s=new Date(e,o,1),a=new Date(e,o+1,0),r=new Date(s);r.setDate(r.getDate()-r.getDay());const n=new Date(a);n.setDate(n.getDate()+(6-n.getDay()));const u=[],S=new Date;S.setHours(0,0,0,0);for(let g=new Date(r);g<=n;g.setDate(g.getDate()+1)){const m=new Date(g),j=E(m);u.push({date:new Date(m),day:m.getDate(),isCurrentMonth:m.getMonth()===o,isToday:m.toDateString()===S.toDateString(),events:j})}return u}),_=y(()=>{const e=new Date;e.setHours(0,0,0,0);const o=[];return C.value.forEach(s=>{["Mon","Wed","Fri"].forEach(r=>{const n=$(r);n>=e&&o.push({id:`class-${s.id}-${n.toISOString()}`,title:s.name,description:`Class with ${s.teacherName}`,date:n,type:"class",courseId:s.id})})}),v.assignments.forEach(s=>{const a=new Date(s.dueDate);if(a>=e){const r=x.getCourseById(s.courseId);o.push({id:`assignment-${s.id}`,title:s.title,description:`Due for ${(r==null?void 0:r.name)||"Unknown Course"}`,date:a,type:"assignment",assignmentId:s.id,courseId:s.courseId})}}),o.sort((s,a)=>s.date-a.date).slice(0,10)}),C=y(()=>w.currentUser?x.getCoursesForUser(w.currentUser.id):[]),E=e=>{const o=[],s=e.toDateString();return C.value.forEach(a=>{const r=["Mon","Wed","Fri"],n=e.toLocaleDateString("en-US",{weekday:"short"});r.includes(n)&&o.push({id:`class-${a.id}-${s}`,title:a.name,type:"class",courseId:a.id})}),v.assignments.forEach(a=>{new Date(a.dueDate).toDateString()===s&&o.push({id:`assignment-${a.id}`,title:a.title,type:"assignment",assignmentId:a.id,courseId:a.courseId})}),o},$=e=>{const o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=new Date,a=o.indexOf(e),r=s.getDay();let n=a-r;n<=0&&(n+=7);const u=new Date(s);return u.setDate(s.getDate()+n),u},T=e=>{switch(e){case"class":return"bg-classroom-primary bg-opacity-10 text-classroom-primary";case"assignment":return"bg-classroom-secondary bg-opacity-10 text-classroom-secondary";default:return"bg-classroom-gray-100 text-classroom-gray-700"}},I=e=>{switch(e){case"class":return"chip-primary";case"assignment":return"chip-secondary";default:return"chip-gray"}},F=e=>e.type==="class"?`${e.date.toLocaleDateString()} at 10:00 AM`:`Due ${e.date.toLocaleDateString()}`,U=()=>{l.value=new Date(l.value.getFullYear(),l.value.getMonth()-1,1)},A=()=>{l.value=new Date(l.value.getFullYear(),l.value.getMonth()+1,1)},L=e=>{console.log("Selected date:",e)},b=e=>{e.type==="class"?f.push(`/student/classes/${e.courseId}`):e.type==="assignment"&&f.push(`/student/classwork/${e.assignmentId}`)};V(async()=>{try{await Promise.all([x.loadCourses(),v.loadAssignments()])}catch(e){console.error("Error loading calendar data:",e),N("Error loading calendar information")}});const N=e=>{window.showToast&&window.showToast(e)};return(e,o)=>(c(),i("div",P,[o[6]||(o[6]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-medium text-classroom-gray-900 mb-2"},"Calendar"),t("p",{class:"text-classroom-gray-600"},"Your class schedule and assignment due dates")],-1)),t("div",R,[t("div",q,[t("h2",G,d(k.value),1),t("div",{class:"flex items-center space-x-2"},[t("button",{onClick:U,class:"p-2 rounded-classroom hover:bg-classroom-gray-100 transition-colors"},[...o[0]||(o[0]=[t("span",{class:"material-icons"},"chevron_left",-1)])]),t("button",{onClick:A,class:"p-2 rounded-classroom hover:bg-classroom-gray-100 transition-colors"},[...o[1]||(o[1]=[t("span",{class:"material-icons"},"chevron_right",-1)])])])]),t("div",J,[(c(),i(p,null,h(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=>t("div",{key:s,class:"text-center text-sm font-medium text-classroom-gray-500 py-2"},d(s),1)),64))]),t("div",K,[(c(!0),i(p,null,h(M.value,s=>(c(),i("div",{key:s.date,class:D(["min-h-24 border border-classroom-gray-200 p-2",{"bg-classroom-gray-50":!s.isCurrentMonth,"hover:bg-classroom-gray-50 cursor-pointer":s.isCurrentMonth}]),onClick:a=>s.isCurrentMonth&&L(s.date)},[t("div",X,[t("span",{class:D(["text-sm font-medium",{"text-classroom-gray-400":!s.isCurrentMonth,"text-classroom-gray-900":s.isCurrentMonth&&!s.isToday,"text-classroom-primary bg-classroom-primary rounded-full w-6 h-6 flex items-center justify-center":s.isToday}])},d(s.day),3)]),t("div",Z,[(c(!0),i(p,null,h(s.events,a=>(c(),i("div",{key:a.id,class:D(["text-xs p-1 rounded-classroom truncate cursor-pointer",T(a.type)]),onClick:z(r=>b(a),["stop"])},d(a.title),11,ss))),128))])],10,Q))),128))])]),t("div",ts,[o[5]||(o[5]=t("h2",{class:"text-2xl font-medium text-classroom-gray-900 mb-6"},"Upcoming Events",-1)),t("div",es,[_.value.length===0?(c(),i("div",os,[...o[2]||(o[2]=[t("span",{class:"material-icons text-4xl mb-2 opacity-50"},"event",-1),t("p",null,"No upcoming events",-1)])])):(c(),i("div",as,[(c(!0),i(p,null,h(_.value,s=>(c(),i("div",{key:s.id,class:"p-4 hover:bg-classroom-gray-50 transition-colors cursor-pointer",onClick:a=>b(s)},[t("div",ns,[t("div",cs,[t("h3",is,d(s.title),1),t("p",ls,d(s.description),1),t("div",ds,[t("span",us,[o[3]||(o[3]=t("span",{class:"material-icons text-sm"},"schedule",-1)),t("span",null,d(F(s)),1)]),t("span",{class:D(["chip",I(s.type)])},d(s.type==="class"?"Class":"Assignment"),3)])]),o[4]||(o[4]=t("span",{class:"material-icons text-classroom-gray-400"},"chevron_right",-1))])],8,rs))),128))]))])])]))}};export{ys as default};
