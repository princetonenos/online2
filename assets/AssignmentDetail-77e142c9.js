import{p as U,u as L,D as R,y as X,r as x,k as T,o as Y,c as r,d as l,e as s,G as J,t as a,h as i,w as v,f as K,g as Z,v as $,n as q}from"./index-ae66ec3f.js";const H={class:"p-6 max-w-4xl mx-auto"},Q={class:"bg-white rounded-classroom classroom-shadow p-6 mb-6"},W={class:"flex items-start justify-between mb-4"},ss={class:"flex-1"},ts={class:"text-3xl font-medium text-classroom-gray-900 mb-2"},es={class:"text-classroom-gray-600 mb-4"},os={class:"flex items-center space-x-6 text-sm text-classroom-gray-500"},as={class:"flex items-center space-x-1"},rs={class:"flex items-center space-x-1"},ls={class:"flex items-center space-x-1"},ns={class:"text-right"},is={key:0,class:"text-2xl font-bold text-classroom-primary mb-1"},ms={key:1,class:"text-sm text-classroom-gray-600"},cs={key:2,class:"text-sm text-classroom-gray-600"},us={key:0,class:"p-4 bg-classroom-primary bg-opacity-5 rounded-classroom"},ds={class:"flex items-center space-x-3"},ps={class:"text-sm text-classroom-gray-600"},xs={class:"bg-white rounded-classroom classroom-shadow p-6 mb-6"},gs={class:"prose max-w-none"},bs={key:0,class:"bg-white rounded-classroom classroom-shadow p-6"},vs={key:0,class:"mt-3 p-3 bg-classroom-primary bg-opacity-5 rounded-classroom flex items-center justify-between"},ys={class:"flex items-center space-x-3"},fs={class:"font-medium text-classroom-gray-900"},hs={class:"text-sm text-classroom-gray-600"},ws=["disabled"],_s={key:0,class:"material-icons animate-spin"},ks={key:1,class:"bg-white rounded-classroom classroom-shadow p-6"},Ss={class:"space-y-4"},Ds={class:"p-4 border border-classroom-gray-200 rounded-classroom"},Bs={class:"flex items-center space-x-3"},Cs={class:"text-sm text-classroom-gray-600"},As={key:0,class:"p-4 border border-classroom-gray-200 rounded-classroom"},Ms={class:"text-classroom-gray-600"},Fs={key:1,class:"p-4 border border-classroom-primary border-opacity-20 bg-classroom-primary bg-opacity-5 rounded-classroom"},Ts={class:"text-classroom-gray-600"},Ps={__name:"AssignmentDetail",setup(Is){const I=U(),y=L(),g=R(),f=X(),d=x(null),n=x(null),b=x(""),m=x(!1),e=T(()=>g.getAssignmentById(I.params.assignmentId)),z=T(()=>e.value?f.getCourseById(e.value.courseId):null),P=o=>o?new Date(o).toLocaleDateString():"",h=o=>o?new Date(o).toLocaleString():"",j=o=>{if(!o)return"0 Bytes";const t=1024,p=["Bytes","KB","MB","GB"],u=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,u)).toFixed(2))+" "+p[u]},E=()=>{var o;(o=d.value)==null||o.click()},N=o=>{const t=o.target.files[0];if(t){if(t.size>10*1024*1024){c("File size must be less than 10MB");return}n.value=t}},G=o=>{o.preventDefault();const t=o.dataTransfer.files[0];if(t){if(t.size>10*1024*1024){c("File size must be less than 10MB");return}n.value=t}},V=()=>{n.value=null,d.value&&(d.value.value="")},O=async()=>{if(!n.value){c("Please select a file to submit");return}m.value=!0;try{await new Promise(o=>setTimeout(o,2e3)),e.value&&(e.value.submissionStatus="submitted",e.value.submittedAt=new Date().toISOString(),e.value.comments=b.value,g.saveToStorage()),c("Assignment submitted successfully!"),y.push("/student/classwork")}catch(o){console.error("Error submitting assignment:",o),c("Error submitting assignment. Please try again.")}finally{m.value=!1}};Y(async()=>{try{await Promise.all([g.loadAssignments(),f.loadCourses()])}catch(o){console.error("Error loading assignment data:",o),c("Error loading assignment information")}});const c=o=>{window.showToast&&window.showToast(o)};return(o,t)=>{var p,u,w,_,k,S,D,B,C,A,M;return r(),l("div",H,[s("button",{onClick:t[0]||(t[0]=F=>J(y).back()),class:"flex items-center space-x-2 text-classroom-primary hover:text-classroom-primary-dark transition-colors mb-6"},[...t[4]||(t[4]=[s("span",{class:"material-icons"},"arrow_back",-1),s("span",null,"Back to classwork",-1)])]),s("div",Q,[s("div",W,[s("div",ss,[s("h1",ts,a((p=e.value)==null?void 0:p.title),1),s("p",es,a((u=e.value)==null?void 0:u.description),1),s("div",os,[s("span",as,[t[5]||(t[5]=s("span",{class:"material-icons text-sm"},"school",-1)),s("span",null,a((w=z.value)==null?void 0:w.name),1)]),s("span",rs,[t[6]||(t[6]=s("span",{class:"material-icons text-sm"},"schedule",-1)),s("span",null,"Due "+a(P((_=e.value)==null?void 0:_.dueDate)),1)]),s("span",ls,[t[7]||(t[7]=s("span",{class:"material-icons text-sm"},"grade",-1)),s("span",null,a((k=e.value)==null?void 0:k.points)+" points",1)])])]),s("div",ns,[(S=e.value)!=null&&S.grade?(r(),l("div",is,a(e.value.grade)+"/"+a(e.value.points),1)):i("",!0),(D=e.value)!=null&&D.grade?(r(),l("div",ms,a(Math.round(e.value.grade/e.value.points*100))+"% ",1)):(r(),l("div",cs," Not graded "))])]),((B=e.value)==null?void 0:B.submissionStatus)==="submitted"?(r(),l("div",us,[s("div",ds,[t[9]||(t[9]=s("span",{class:"material-icons text-classroom-primary"},"check_circle",-1)),s("div",null,[t[8]||(t[8]=s("h3",{class:"font-medium text-classroom-gray-900"},"Assignment Submitted",-1)),s("p",ps,"Submitted on "+a(h(e.value.submittedAt)),1)])])])):i("",!0)]),s("div",xs,[t[10]||(t[10]=s("h2",{class:"text-xl font-medium text-classroom-gray-900 mb-4"},"Instructions",-1)),s("div",gs,[s("p",null,a(((C=e.value)==null?void 0:C.instructions)||"Complete the assignment as described by your teacher."),1)])]),((A=e.value)==null?void 0:A.submissionStatus)!=="submitted"?(r(),l("div",bs,[t[16]||(t[16]=s("h2",{class:"text-xl font-medium text-classroom-gray-900 mb-4"},"Submit Assignment",-1)),s("form",{onSubmit:v(O,["prevent"]),class:"space-y-6"},[s("div",null,[t[14]||(t[14]=s("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Upload your work ",-1)),s("div",{class:"border-2 border-dashed border-classroom-gray-300 rounded-classroom p-6 text-center hover:border-classroom-primary transition-colors cursor-pointer",onClick:E,onDrop:G,onDragover:t[1]||(t[1]=v(()=>{},["prevent"])),onDragenter:t[2]||(t[2]=v(()=>{},["prevent"]))},[s("input",{ref_key:"fileInput",ref:d,type:"file",onChange:N,class:"hidden",accept:".pdf,.doc,.docx,.txt,.zip,.jpg,.jpeg,.png"},null,544),t[11]||(t[11]=K('<div class="w-12 h-12 bg-classroom-primary bg-opacity-10 rounded-classroom flex items-center justify-center mx-auto mb-3"><span class="material-icons text-classroom-primary">cloud_upload</span></div><p class="text-classroom-gray-900 font-medium mb-1">Upload your file</p><p class="text-classroom-gray-600 text-sm"> Drag and drop or click to browse </p><p class="text-classroom-gray-500 text-xs mt-2"> PDF, DOC, DOCX, TXT, ZIP, JPG, PNG (Max 10MB) </p>',4))],32),n.value?(r(),l("div",vs,[s("div",ys,[t[12]||(t[12]=s("span",{class:"material-icons text-classroom-primary"},"description",-1)),s("div",null,[s("p",fs,a(n.value.name),1),s("p",hs,a(j(n.value.size)),1)])]),s("button",{type:"button",onClick:V,class:"text-classroom-gray-400 hover:text-classroom-gray-600 transition-colors"},[...t[13]||(t[13]=[s("span",{class:"material-icons"},"close",-1)])])])):i("",!0)]),s("div",null,[t[15]||(t[15]=s("label",{for:"comments",class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Comments (optional) ",-1)),Z(s("textarea",{id:"comments","onUpdate:modelValue":t[3]||(t[3]=F=>b.value=F),rows:"4",placeholder:"Add any comments about your submission...",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},null,512),[[$,b.value]])]),s("button",{type:"submit",disabled:!n.value||m.value,class:q(["w-full bg-classroom-primary hover:bg-classroom-primary-dark text-white py-3 px-4 rounded-classroom transition-colors font-medium focus-classroom flex items-center justify-center space-x-2",{"opacity-50 cursor-not-allowed":!n.value||m.value}])},[m.value?(r(),l("span",_s,"refresh")):i("",!0),s("span",null,a(m.value?"Submitting...":"Submit Assignment"),1)],10,ws)],32)])):i("",!0),((M=e.value)==null?void 0:M.submissionStatus)==="submitted"?(r(),l("div",ks,[t[21]||(t[21]=s("h2",{class:"text-xl font-medium text-classroom-gray-900 mb-4"},"Your Submission",-1)),s("div",Ss,[s("div",Ds,[s("div",Bs,[t[18]||(t[18]=s("span",{class:"material-icons text-classroom-primary"},"description",-1)),s("div",null,[t[17]||(t[17]=s("p",{class:"font-medium text-classroom-gray-900"},"assignment_submission.pdf",-1)),s("p",Cs,"Submitted on "+a(h(e.value.submittedAt)),1)])])]),e.value.comments?(r(),l("div",As,[t[19]||(t[19]=s("h3",{class:"font-medium text-classroom-gray-900 mb-2"},"Your Comments",-1)),s("p",Ms,a(e.value.comments),1)])):i("",!0),e.value.feedback?(r(),l("div",Fs,[t[20]||(t[20]=s("h3",{class:"font-medium text-classroom-gray-900 mb-2"},"Teacher Feedback",-1)),s("p",Ts,a(e.value.feedback),1)])):i("",!0)])])):i("",!0)])}}};export{Ps as default};
