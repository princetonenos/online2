import{u as g,y as b,a as w,r as d,c,d as i,e as s,w as _,g as C,v as k,n as m,t as l,h,F as S,m as T}from"./index-ae66ec3f.js";const j={class:"p-6 max-w-2xl mx-auto"},M={class:"bg-white rounded-classroom classroom-shadow p-6"},D={key:0,class:"text-red-500 text-xs mt-1"},E=["disabled"],J={key:0,class:"material-icons animate-spin"},P={class:"mt-8"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},A=["onClick"],B={class:"font-medium text-classroom-gray-900 mb-1"},F={class:"text-sm text-classroom-gray-600 mb-2"},L={class:"flex items-center justify-between text-xs text-classroom-gray-500"},$={__name:"JoinClass",setup(V){const p=g(),u=b(),y=w(),n=d(""),a=d(!1),r=d(""),v=[{code:"math-101",name:"Mathematics 101",teacher:"Dr. Johnson",students:24},{code:"science-202",name:"Science Fundamentals",teacher:"Ms. Davis",students:18},{code:"history-301",name:"World History",teacher:"Mr. Thompson",students:22},{code:"english-102",name:"English Literature",teacher:"Mrs. Wilson",students:20}],f=async()=>{if(!n.value.trim()){r.value="Please enter a class code";return}a.value=!0,r.value="";try{await new Promise(o=>setTimeout(o,1e3));const t=u.courses.find(o=>o.code===n.value.trim().toLowerCase());if(!t){r.value="Class not found. Please check the code and try again.";return}const e=y.currentUser;e&&!t.enrolledStudents.includes(e.id)&&(t.enrolledStudents.push(e.id),u.saveToStorage()),x(`Successfully joined ${t.name}!`),p.push("/student/dashboard")}catch(t){console.error("Error joining class:",t),r.value="An error occurred while joining the class. Please try again."}finally{a.value=!1}},x=t=>{window.showToast&&window.showToast(t)};return(t,e)=>(c(),i("div",j,[e[4]||(e[4]=s("div",{class:"mb-8"},[s("h1",{class:"text-3xl font-medium text-classroom-gray-900 mb-2"},"Join a Class"),s("p",{class:"text-classroom-gray-600"},"Enter the class code provided by your teacher")],-1)),s("div",M,[s("form",{onSubmit:_(f,["prevent"]),class:"space-y-6"},[s("div",null,[e[1]||(e[1]=s("label",{for:"classCode",class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Class Code ",-1)),C(s("input",{id:"classCode","onUpdate:modelValue":e[0]||(e[0]=o=>n.value=o),type:"text",required:"",placeholder:"Enter class code (e.g., abc-def-123)",class:m(["w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",{"border-red-500":r.value}])},null,2),[[k,n.value]]),r.value?(c(),i("p",D,l(r.value),1)):h("",!0),e[2]||(e[2]=s("p",{class:"text-sm text-classroom-gray-500 mt-1"}," Ask your teacher for the class code, then enter it here. ",-1))]),s("button",{type:"submit",disabled:a.value,class:m(["w-full bg-classroom-primary hover:bg-classroom-primary-dark text-white py-3 px-4 rounded-classroom transition-colors font-medium focus-classroom flex items-center justify-center space-x-2",{"opacity-50 cursor-not-allowed":a.value}])},[a.value?(c(),i("span",J,"refresh")):h("",!0),s("span",null,l(a.value?"Joining...":"Join Class"),1)],10,E)],32)]),s("div",P,[e[3]||(e[3]=s("h2",{class:"text-xl font-medium text-classroom-gray-900 mb-4"},"Available Demo Classes",-1)),s("div",U,[(c(),i(S,null,T(v,o=>s("div",{key:o.code,class:"bg-white rounded-classroom classroom-shadow p-4 border border-classroom-gray-200 hover:border-classroom-primary transition-colors cursor-pointer",onClick:N=>n.value=o.code},[s("h3",B,l(o.name),1),s("p",F,l(o.teacher),1),s("div",L,[s("span",null,"Code: "+l(o.code),1),s("span",null,l(o.students)+" students",1)])],8,A)),64))])])]))}};export{$ as default};
