import{u as q,D as E,y as P,a as $,r as N,b as U,k as L,o as h,c as n,d as i,e as o,w as z,g as a,v as m,t as u,h as c,z as f,F as D,m as T,f as O,i as p,n as j}from"./index-ae66ec3f.js";const B={class:"p-6 max-w-4xl mx-auto"},G={class:"bg-white rounded-classroom classroom-shadow p-6"},M={class:"flex items-center justify-between mb-6"},R={class:"border border-classroom-gray-200 rounded-classroom p-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Q={class:"md:col-span-2"},W={key:0,class:"text-red-500 text-xs mt-1"},X=["value"],J={key:0,class:"text-red-500 text-xs mt-1"},K={key:0,class:"text-red-500 text-xs mt-1"},Y={key:0,class:"text-red-500 text-xs mt-1"},Z={key:0,class:"text-red-500 text-xs mt-1"},_={class:"md:col-span-2"},ss={class:"text-xs text-classroom-gray-500 mt-1"},os={class:"border border-classroom-gray-200 rounded-classroom p-6"},es={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ts={key:0},ls={class:"flex flex-wrap gap-2"},rs={class:"flex items-center space-x-1"},as={class:"flex items-center space-x-1"},ns={class:"flex items-center space-x-1"},is={class:"flex items-center space-x-1"},ds={class:"border border-classroom-gray-200 rounded-classroom p-6"},us={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ms={class:"md:col-span-2"},cs={class:"md:col-span-2 space-y-3"},ps={class:"space-y-2"},ys={class:"flex items-center space-x-2"},bs={class:"flex items-center space-x-2"},xs={class:"flex items-center space-x-2"},fs={class:"border border-classroom-gray-200 rounded-classroom p-6"},gs={class:"space-y-4"},vs={class:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4"},ks=["onUpdate:modelValue"],ws=["onUpdate:modelValue"],Us={class:"md:col-span-2"},Ds={class:"block text-sm font-medium text-classroom-gray-900 mb-2"},Ts=["onUpdate:modelValue","placeholder"],Vs=["onClick"],Cs={key:0,class:"text-center py-8 text-classroom-gray-500"},As={class:"flex items-center justify-end space-x-4 pt-6"},Is=["disabled"],Ss={key:0,class:"material-icons animate-spin"},Es={__name:"AssignmentCreate",setup(Fs){const V=q(),C=E(),v=P(),k=$(),y=N(!1),t=U({title:"",courseId:"",type:"",points:100,dueDate:"",description:"",topic:"",timeEstimate:null,submissionType:"file",allowedFileTypes:["pdf","doc"],rubric:"",attachments:[],settings:{allowLateSubmissions:!0,sendNotifications:!0,includeInGradebook:!0}}),l=U({title:"",courseId:"",type:"",points:"",dueDate:""}),A=L(()=>{const r=k.currentUser;return r?v.getCoursesForUser(r.id):[]}),I=()=>{t.attachments.push({type:"file",title:"",url:""})},S=r=>{t.attachments.splice(r,1)},w=r=>({file:"Upload file or enter file path",link:"https://example.com/resource",video:"https://youtube.com/watch?v=...",document:"https://docs.google.com/document/..."})[r]||"Enter resource URL or path",d=r=>{switch(r){case"title":l.title=t.title.trim()?"":"Assignment title is required";break;case"courseId":l.courseId=t.courseId?"":"Course selection is required";break;case"type":l.type=t.type?"":"Assignment type is required";break;case"points":t.points?t.points<0||t.points>1e3?l.points="Points must be between 0 and 1000":l.points="":l.points="Points are required";break;case"dueDate":l.dueDate=t.dueDate?"":"Due date is required";break}},F=async()=>{if(d("title"),d("courseId"),d("type"),d("points"),d("dueDate"),l.title||l.courseId||l.type||l.points||l.dueDate){g("Please fix the validation errors before creating the assignment");return}y.value=!0;try{const r=k.currentUser,s={...t,teacherId:r.id,attachments:t.attachments.filter(x=>x.title&&x.url),status:"published",createdAt:new Date().toISOString(),submissions:[]},e=await C.createAssignment(s);g("Assignment created successfully!"),V.push("/teacher/assignments")}catch(r){console.error("Error creating assignment:",r),g("Error creating assignment. Please try again.")}finally{y.value=!1}};h(()=>{const r=new Date;r.setDate(r.getDate()+7),r.setHours(23,59,0,0),t.dueDate=r.toISOString().slice(0,16),v.loadCourses()});const g=r=>{window.showToast&&window.showToast(r)};return(r,s)=>(n(),i("div",B,[o("div",G,[o("div",M,[s[25]||(s[25]=o("div",null,[o("h1",{class:"text-2xl font-medium text-classroom-gray-900"},"Create Assignment"),o("p",{class:"text-classroom-gray-600 mt-1"},"Create a new assignment for your students")],-1)),o("button",{onClick:s[0]||(s[0]=e=>r.$router.back()),class:"btn-outline flex items-center space-x-2"},[...s[24]||(s[24]=[o("span",{class:"material-icons text-lg"},"arrow_back",-1),o("span",null,"Back",-1)])])]),o("form",{onSubmit:z(F,["prevent"]),class:"space-y-6"},[o("div",R,[s[34]||(s[34]=o("h2",{class:"text-lg font-medium text-classroom-gray-900 mb-4"},"Basic Information",-1)),o("div",H,[o("div",Q,[s[26]||(s[26]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Assignment Title * ",-1)),a(o("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>t.title=e),type:"text",required:"",placeholder:"e.g., Quadratic Equations Homework",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",onInput:s[2]||(s[2]=e=>d("title"))},null,544),[[m,t.title]]),l.title?(n(),i("p",W,u(l.title),1)):c("",!0)]),o("div",null,[s[28]||(s[28]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Course * ",-1)),a(o("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>t.courseId=e),required:"",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",onChange:s[4]||(s[4]=e=>d("courseId"))},[s[27]||(s[27]=o("option",{value:""},"Select course",-1)),(n(!0),i(D,null,T(A.value,e=>(n(),i("option",{key:e.id,value:e.id},u(e.name)+" - "+u(e.section),9,X))),128))],544),[[f,t.courseId]]),l.courseId?(n(),i("p",J,u(l.courseId),1)):c("",!0)]),o("div",null,[s[30]||(s[30]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Type * ",-1)),a(o("select",{"onUpdate:modelValue":s[5]||(s[5]=e=>t.type=e),required:"",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",onChange:s[6]||(s[6]=e=>d("type"))},[...s[29]||(s[29]=[O('<option value="">Select type</option><option value="homework">Homework</option><option value="quiz">Quiz</option><option value="test">Test</option><option value="project">Project</option><option value="essay">Essay</option><option value="presentation">Presentation</option><option value="lab">Lab Report</option><option value="discussion">Discussion</option><option value="other">Other</option>',10)])],544),[[f,t.type]]),l.type?(n(),i("p",K,u(l.type),1)):c("",!0)]),o("div",null,[s[31]||(s[31]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Points * ",-1)),a(o("input",{"onUpdate:modelValue":s[7]||(s[7]=e=>t.points=e),type:"number",min:"0",max:"1000",required:"",placeholder:"e.g., 100",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",onInput:s[8]||(s[8]=e=>d("points"))},null,544),[[m,t.points]]),l.points?(n(),i("p",Y,u(l.points),1)):c("",!0)]),o("div",null,[s[32]||(s[32]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Due Date * ",-1)),a(o("input",{"onUpdate:modelValue":s[9]||(s[9]=e=>t.dueDate=e),type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom",onChange:s[10]||(s[10]=e=>d("dueDate"))},null,544),[[m,t.dueDate]]),l.dueDate?(n(),i("p",Z,u(l.dueDate),1)):c("",!0)]),o("div",_,[s[33]||(s[33]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Instructions ",-1)),a(o("textarea",{"onUpdate:modelValue":s[11]||(s[11]=e=>t.description=e),rows:"4",placeholder:"Provide clear instructions for this assignment...",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors resize-none focus-classroom"},null,512),[[m,t.description]]),o("p",ss,u(t.description.length)+"/2000 characters",1)])])]),o("div",os,[s[44]||(s[44]=o("h2",{class:"text-lg font-medium text-classroom-gray-900 mb-4"},"Assignment Details",-1)),o("div",es,[o("div",null,[s[35]||(s[35]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Topic ",-1)),a(o("input",{"onUpdate:modelValue":s[12]||(s[12]=e=>t.topic=e),type:"text",placeholder:"e.g., Quadratic Equations",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},null,512),[[m,t.topic]])]),o("div",null,[s[36]||(s[36]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Estimated Time (minutes) ",-1)),a(o("input",{"onUpdate:modelValue":s[13]||(s[13]=e=>t.timeEstimate=e),type:"number",min:"0",max:"480",placeholder:"e.g., 60",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},null,512),[[m,t.timeEstimate]])]),o("div",null,[s[38]||(s[38]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Submission Type * ",-1)),a(o("select",{"onUpdate:modelValue":s[14]||(s[14]=e=>t.submissionType=e),required:"",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},[...s[37]||(s[37]=[o("option",{value:"file"},"File Upload",-1),o("option",{value:"text"},"Text Entry",-1),o("option",{value:"both"},"File or Text",-1),o("option",{value:"none"},"No Submission",-1)])],512),[[f,t.submissionType]])]),t.submissionType==="file"||t.submissionType==="both"?(n(),i("div",ts,[s[43]||(s[43]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Allowed File Types ",-1)),o("div",ls,[o("label",rs,[a(o("input",{"onUpdate:modelValue":s[15]||(s[15]=e=>t.allowedFileTypes=e),type:"checkbox",value:"pdf",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary"},null,512),[[p,t.allowedFileTypes]]),s[39]||(s[39]=o("span",{class:"text-sm"},"PDF",-1))]),o("label",as,[a(o("input",{"onUpdate:modelValue":s[16]||(s[16]=e=>t.allowedFileTypes=e),type:"checkbox",value:"doc",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary"},null,512),[[p,t.allowedFileTypes]]),s[40]||(s[40]=o("span",{class:"text-sm"},"DOC/DOCX",-1))]),o("label",ns,[a(o("input",{"onUpdate:modelValue":s[17]||(s[17]=e=>t.allowedFileTypes=e),type:"checkbox",value:"image",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary"},null,512),[[p,t.allowedFileTypes]]),s[41]||(s[41]=o("span",{class:"text-sm"},"Images",-1))]),o("label",is,[a(o("input",{"onUpdate:modelValue":s[18]||(s[18]=e=>t.allowedFileTypes=e),type:"checkbox",value:"any",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary"},null,512),[[p,t.allowedFileTypes]]),s[42]||(s[42]=o("span",{class:"text-sm"},"Any File",-1))])])])):c("",!0)])]),o("div",ds,[s[50]||(s[50]=o("h2",{class:"text-lg font-medium text-classroom-gray-900 mb-4"},"Grading & Settings",-1)),o("div",us,[o("div",ms,[s[45]||(s[45]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"}," Grading Rubric (Optional) ",-1)),a(o("textarea",{"onUpdate:modelValue":s[19]||(s[19]=e=>t.rubric=e),rows:"3",placeholder:"Describe how this assignment will be graded...",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors resize-none focus-classroom"},null,512),[[m,t.rubric]])]),o("div",cs,[s[49]||(s[49]=o("h3",{class:"text-md font-medium text-classroom-gray-900"},"Settings",-1)),o("div",ps,[o("label",ys,[a(o("input",{"onUpdate:modelValue":s[20]||(s[20]=e=>t.settings.allowLateSubmissions=e),type:"checkbox",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary focus-classroom"},null,512),[[p,t.settings.allowLateSubmissions]]),s[46]||(s[46]=o("span",{class:"text-sm text-classroom-gray-900"},"Allow late submissions",-1))]),o("label",bs,[a(o("input",{"onUpdate:modelValue":s[21]||(s[21]=e=>t.settings.sendNotifications=e),type:"checkbox",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary focus-classroom"},null,512),[[p,t.settings.sendNotifications]]),s[47]||(s[47]=o("span",{class:"text-sm text-classroom-gray-900"},"Send notifications to students",-1))]),o("label",xs,[a(o("input",{"onUpdate:modelValue":s[22]||(s[22]=e=>t.settings.includeInGradebook=e),type:"checkbox",class:"rounded border-classroom-gray-300 text-classroom-primary focus:ring-classroom-primary focus-classroom"},null,512),[[p,t.settings.includeInGradebook]]),s[48]||(s[48]=o("span",{class:"text-sm text-classroom-gray-900"},"Include in gradebook",-1))])])])])]),o("div",fs,[o("div",{class:"flex items-center justify-between mb-4"},[s[52]||(s[52]=o("h2",{class:"text-lg font-medium text-classroom-gray-900"},"Attachments",-1)),o("button",{type:"button",onClick:I,class:"btn-outline flex items-center space-x-2 text-sm"},[...s[51]||(s[51]=[o("span",{class:"material-icons text-lg"},"attach_file",-1),o("span",null,"Add Attachment",-1)])])]),o("div",gs,[(n(!0),i(D,null,T(t.attachments,(e,x)=>(n(),i("div",{key:x,class:"flex items-start space-x-4 p-4 border border-classroom-gray-200 rounded-classroom"},[o("div",vs,[o("div",null,[s[54]||(s[54]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"},"Type",-1)),a(o("select",{"onUpdate:modelValue":b=>e.type=b,class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},[...s[53]||(s[53]=[o("option",{value:"file"},"File",-1),o("option",{value:"link"},"Link",-1),o("option",{value:"video"},"Video",-1),o("option",{value:"document"},"Document",-1)])],8,ks),[[f,e.type]])]),o("div",null,[s[55]||(s[55]=o("label",{class:"block text-sm font-medium text-classroom-gray-900 mb-2"},"Title",-1)),a(o("input",{"onUpdate:modelValue":b=>e.title=b,type:"text",placeholder:"Attachment title",class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},null,8,ws),[[m,e.title]])]),o("div",Us,[o("label",Ds,u(w(e.type)),1),a(o("input",{"onUpdate:modelValue":b=>e.url=b,type:"text",placeholder:w(e.type),class:"w-full px-3 py-2 border border-classroom-gray-300 rounded-classroom focus:border-classroom-primary focus:outline-none transition-colors focus-classroom"},null,8,Ts),[[m,e.url]])])]),o("button",{type:"button",onClick:b=>S(x),class:"p-2 text-classroom-gray-400 hover:text-red-500 transition-colors focus-classroom","aria-label":"Remove attachment"},[...s[56]||(s[56]=[o("span",{class:"material-icons"},"delete",-1)])],8,Vs)]))),128)),t.attachments.length===0?(n(),i("div",Cs,[...s[57]||(s[57]=[o("span",{class:"material-icons text-4xl mb-2 opacity-50"},"attach_file",-1),o("p",null,"No attachments added yet",-1),o("p",{class:"text-sm"},"Add files or links that students will need for this assignment",-1)])])):c("",!0)])]),o("div",As,[o("button",{type:"button",onClick:s[23]||(s[23]=e=>r.$router.back()),class:"btn-outline"}," Cancel "),o("button",{type:"submit",disabled:y.value,class:j(["btn-primary flex items-center space-x-2",{"opacity-50 cursor-not-allowed":y.value}])},[y.value?(n(),i("span",Ss,"refresh")):c("",!0),o("span",null,u(y.value?"Creating...":"Create Assignment"),1)],10,Is)])],32)])]))}};export{Es as default};
