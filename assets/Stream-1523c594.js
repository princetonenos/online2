import{_ as v,N as b,G as C,K as S,c as k,o as N,a as n,b as l,e as s,F as c,g as i,h as m,t as a}from"./index-e0178975.js";const B={class:"p-6 max-w-4xl mx-auto"},D={class:"space-y-6"},A={class:"flex items-start space-x-4 mb-4"},M={class:"w-10 h-10 bg-classroom-primary rounded-full flex items-center justify-center text-white font-medium"},F={class:"flex-1"},U={class:"flex items-center space-x-2 mb-1"},j={class:"font-medium text-classroom-gray-900"},I={class:"text-sm text-classroom-gray-500"},T={class:"text-sm text-classroom-gray-600"},z={class:"mb-4"},E={class:"text-lg font-medium text-classroom-gray-900 mb-2"},G={class:"text-classroom-gray-700 whitespace-pre-line"},P={key:0,class:"mb-4"},$={class:"space-y-2"},K=["onClick"],L={class:"flex-1"},V={class:"font-medium text-classroom-gray-900"},H={class:"text-sm text-classroom-gray-600"},J={key:1,class:"border-t border-classroom-gray-200 pt-4"},O={class:"space-y-3"},Y={class:"w-8 h-8 bg-classroom-gray-200 rounded-full flex items-center justify-center text-classroom-gray-600 text-xs font-medium"},q={class:"flex-1"},Q={class:"flex items-center space-x-2 mb-1"},R={class:"text-sm font-medium text-classroom-gray-900"},W={class:"text-xs text-classroom-gray-500"},X={class:"text-sm text-classroom-gray-700"},Z={key:0,class:"text-center py-16"},ss={__name:"Stream",setup(ts){const d=b(),y=C(),u=S(),x=k(()=>{const o=y.currentUser;if(!o)return[];const r=u.getCoursesForUser(o.id).map(e=>e.id);return d.posts.filter(e=>r.includes(e.courseId)).sort((e,g)=>new Date(g.createdAt)-new Date(e.createdAt))}),_=o=>o?o.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2):"?",h=o=>{if(!o)return"";const t=new Date(o),e=(new Date-t)/(1e3*60*60);return e<1?"Just now":e<24?`${Math.floor(e)} hours ago`:t.toLocaleDateString()},p=o=>{if(!o)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],e=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,e)).toFixed(2))+" "+r[e]},w=o=>{f(`Downloading ${o.name}...`),console.log("Downloading attachment:",o)};N(async()=>{try{await Promise.all([d.loadPosts(),u.loadCourses()])}catch(o){console.error("Error loading stream data:",o),f("Error loading stream information")}});const f=o=>{window.showToast&&window.showToast(o)};return(o,t)=>(n(),l("div",B,[t[6]||(t[6]=s("div",{class:"mb-8"},[s("h1",{class:"text-3xl font-medium text-classroom-gray-900 mb-2"},"Class Stream"),s("p",{class:"text-classroom-gray-600"},"Announcements and updates from your classes")],-1)),s("div",D,[(n(!0),l(c,null,i(x.value,r=>(n(),l("div",{key:r.id,class:"bg-white rounded-classroom classroom-shadow p-6"},[s("div",A,[s("div",M,a(_(r.authorName)),1),s("div",F,[s("div",U,[s("h3",j,a(r.authorName),1),t[0]||(t[0]=s("span",{class:"text-sm text-classroom-gray-500"},"â€¢",-1)),s("span",I,a(h(r.createdAt)),1)]),s("p",T,a(r.courseName),1)])]),s("div",z,[s("h4",E,a(r.title),1),s("p",G,a(r.content),1)]),r.attachments&&r.attachments.length>0?(n(),l("div",P,[t[3]||(t[3]=s("h5",{class:"text-sm font-medium text-classroom-gray-900 mb-2"},"Attachments",-1)),s("div",$,[(n(!0),l(c,null,i(r.attachments,e=>(n(),l("div",{key:e.id,class:"flex items-center space-x-3 p-3 border border-classroom-gray-200 rounded-classroom hover:bg-classroom-gray-50 transition-colors cursor-pointer",onClick:g=>w(e)},[t[1]||(t[1]=s("span",{class:"material-icons text-classroom-primary"},"attachment",-1)),s("div",L,[s("p",V,a(e.name),1),s("p",H,a(p(e.size)),1)]),t[2]||(t[2]=s("span",{class:"material-icons text-classroom-gray-400"},"download",-1))],8,K))),128))])])):m("",!0),r.comments&&r.comments.length>0?(n(),l("div",J,[t[4]||(t[4]=s("h5",{class:"text-sm font-medium text-classroom-gray-900 mb-3"},"Comments",-1)),s("div",O,[(n(!0),l(c,null,i(r.comments,e=>(n(),l("div",{key:e.id,class:"flex items-start space-x-3"},[s("div",Y,a(_(e.authorName)),1),s("div",q,[s("div",Q,[s("span",R,a(e.authorName),1),s("span",W,a(h(e.createdAt)),1)]),s("p",X,a(e.content),1)])]))),128))])])):m("",!0)]))),128))]),x.value.length===0?(n(),l("div",Z,[...t[5]||(t[5]=[s("div",{class:"w-24 h-24 bg-classroom-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[s("span",{class:"material-icons text-classroom-gray-400 text-4xl"},"forum")],-1),s("h3",{class:"text-xl font-medium text-classroom-gray-900 mb-2"},"No posts yet",-1),s("p",{class:"text-classroom-gray-600"},"Your teachers will post announcements and updates here",-1)])])):m("",!0)]))}},os=v(ss,[["__file","/home/buddy/GCO/src/views/student/Stream.vue"]]);export{os as default};
