import{_ as J,u as z,r as f,o as Q,c as h,a as u,b as m,d as v,e,t as r,k as p,F as y,g as _,h as A,n as D,f as G,v as T}from"./index-0bf52f7e.js";const q={class:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6"},H={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},K={class:"bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-xl border border-blue-100 p-6 transform hover:scale-105 transition-transform duration-300"},W={class:"flex items-center justify-between"},X={class:"text-3xl font-bold text-gray-900 mt-1"},Y={class:"bg-gradient-to-br from-white to-green-50 rounded-2xl shadow-xl border border-green-100 p-6 transform hover:scale-105 transition-transform duration-300"},Z={class:"flex items-center justify-between"},tt={class:"text-3xl font-bold text-gray-900 mt-1"},et={class:"bg-gradient-to-br from-white to-orange-50 rounded-2xl shadow-xl border border-orange-100 p-6 transform hover:scale-105 transition-transform duration-300"},st={class:"flex items-center justify-between"},at={class:"text-3xl font-bold text-gray-900 mt-1"},ot={class:"grid grid-cols-1 xl:grid-cols-3 gap-8"},nt={class:"xl:col-span-2"},rt={class:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden"},dt={class:"divide-y divide-gray-200"},it={class:"flex items-start justify-between mb-4"},lt={class:"flex items-start space-x-4"},ct={class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-classroom flex items-center justify-center text-white font-semibold text-sm"},ut={class:"text-lg font-semibold text-gray-900"},mt={class:"text-sm text-gray-600"},vt={class:"text-xs text-gray-500 mt-1"},gt={class:"flex items-center space-x-2"},xt={class:"material-icons text-xs mr-1"},ft={class:"bg-gray-50 rounded-classroom p-4"},pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},bt={class:"flex items-center space-x-3"},wt=["onUpdate:modelValue"],ht={class:"text-2xl font-bold text-gray-900 min-w-16 text-center"},yt={class:"flex space-x-2"},_t=["onClick"],kt={class:"mb-4"},St=["onUpdate:modelValue"],At={class:"flex items-center justify-between"},Dt={class:"flex items-center space-x-4"},Gt=["onClick"],Tt=["onClick"],jt={class:"flex items-center space-x-2 text-sm text-gray-500"},Nt={key:0,class:"text-center py-12"},Ct={class:"space-y-6"},It={class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},Et={class:"space-y-3"},$t={class:"flex items-center space-x-3"},Ot={class:"text-sm font-medium text-gray-900"},Ut={class:"text-xs text-gray-500"},Ft={class:"text-right"},Rt={class:"text-sm font-semibold text-green-600"},Vt={class:"text-xs text-gray-500"},Bt={key:0,class:"text-center py-4 text-gray-500 text-sm"},Lt={__name:"Grading",setup(Mt){const j=z(),g=f(JSON.parse(localStorage.getItem("mock:assignments")||"[]")),N=f(JSON.parse(localStorage.getItem("mock:students")||"[]")),C=f(JSON.parse(localStorage.getItem("mock:classes")||"[]")),I=[{letter:"A+",value:97},{letter:"A",value:93},{letter:"A-",value:90},{letter:"B+",value:87},{letter:"B",value:83},{letter:"B-",value:80},{letter:"C+",value:77},{letter:"C",value:73},{letter:"C-",value:70},{letter:"D",value:65},{letter:"F",value:55}],i=f([]);function E(){i.value=[];for(const a of g.value)if(a.submissions&&a.submissions.length)for(const t of a.submissions)t.grade==null&&i.value.push({key:a.id+":"+t.userId,assignment:a,sub:t,value:null,feedback:""})}Q(()=>{E()});const $=h(()=>{const a=new Date().toDateString();let t=0;return g.value.forEach(s=>{s.submissions&&s.submissions.forEach(o=>{o.grade!=null&&new Date(o.gradedAt).toDateString()===a&&t++})}),t}),O=h(()=>{const a=new Date;return i.value.filter(t=>new Date(t.assignment.dueAt)<a).length}),k=h(()=>{const a=[];return g.value.forEach(t=>{t.submissions&&t.submissions.forEach(s=>{s.grade!=null&&s.gradedAt&&a.push({id:t.id+":"+s.userId,studentName:x(s.userId),assignmentTitle:t.title,grade:s.grade,time:U(s.gradedAt)})})}),a.sort((t,s)=>new Date(s.gradedAt)-new Date(t.gradedAt)).slice(0,5)});function b(a){try{return new Date(a).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return a}}function U(a){try{const t=new Date,s=new Date(a),o=t-s,n=Math.floor(o/(1e3*60)),d=Math.floor(o/(1e3*60*60)),c=Math.floor(o/(1e3*60*60*24));return n<60?`${n}m ago`:d<24?`${d}h ago`:`${c}d ago`}catch{return a}}function x(a){const t=N.value.find(s=>s.id===a);return t?t.name:a}function S(a){const t=C.value.find(s=>s.id===a);return t?t.title:"Unknown Class"}function w(a){const t=new Date;return new Date(a.assignment.dueAt)<t?{class:"bg-red-100 text-red-800",icon:"warning",text:"Overdue"}:{class:"bg-blue-100 text-blue-800",icon:"schedule",text:"On Time"}}function F(a){try{const t=new Date,s=new Date(a),o=t-s,n=Math.floor(o/(1e3*60*60*24)),d=Math.floor(o%(1e3*60*60*24)/(1e3*60*60));return n>0?`${n}d ${d}h ago`:d>0?`${d}h ago`:"Recently"}catch{return"Unknown"}}function R(a){if(a.value==null||a.value<0||a.value>100){alert("Please enter a valid grade between 0 and 100");return}const t=JSON.parse(localStorage.getItem("mock:assignments")||"[]"),s=t.find(n=>n.id===a.assignment.id);if(!s){alert("Assignment not found");return}const o=s.submissions.find(n=>n.userId===a.sub.userId);o.grade=Number(a.value),o.gradedAt=new Date().toISOString(),o.feedback=a.feedback||"",localStorage.setItem("mock:assignments",JSON.stringify(t)),i.value=i.value.filter(n=>n.key!==a.key),g.value=t,window.showToast&&window.showToast(`Grade saved for ${x(a.sub.userId)}`)}function V(a){i.value=i.value.filter(t=>t.key!==a.key),window.showToast&&window.showToast("Submission skipped")}function B(){try{const a=[];if(g.value.forEach(c=>{c.submissions&&c.submissions.forEach(l=>{l.grade!=null&&a.push({Assignment:c.title,Class:S(c.classId),Student:x(l.userId),Grade:l.grade+"%",Status:l.status||"Graded",Submitted:b(l.submittedAt),Graded:l.gradedAt?b(l.gradedAt):"N/A",Feedback:l.feedback||"No feedback"})})}),a.length===0){window.showToast&&window.showToast("No graded submissions to export");return}const t=Object.keys(a[0]),s=[t.join(","),...a.map(c=>t.map(l=>{const P=c[l];return`"${String(P).replace(/"/g,'""')}"`}).join(","))].join(`
`),o=new Blob([s],{type:"text/csv;charset=utf-8;"}),n=window.URL.createObjectURL(o),d=document.createElement("a");d.href=n,d.download=`grades_export_${new Date().toISOString().split("T")[0]}.csv`,d.click(),window.URL.revokeObjectURL(n),window.showToast&&window.showToast(`Exported ${a.length} grades successfully!`)}catch(a){console.error("Export error:",a),window.showToast&&window.showToast("Error exporting grades. Please try again.")}}function L(){j.push("/teacher/assignments"),window.showToast&&window.showToast("Navigating to assignments...")}function M(){let a=0;const t=[];if(g.value.forEach(s=>{s.submissions&&s.submissions.forEach(o=>{if(o.grade!=null&&o.gradedAt){const n=new Date(o.gradedAt);(new Date-n)/(1e3*60*60)<24&&(a++,t.push({student:x(o.userId),assignment:s.title,grade:o.grade}))}})}),a===0){window.showToast&&window.showToast("No recently graded submissions to notify about");return}confirm(`Send grade notifications to ${a} student(s)?`)&&setTimeout(()=>{window.showToast&&window.showToast(`✅ Feedback sent to ${a} students!`),console.log("Notifications sent:",t)},500)}return(a,t)=>(u(),m("div",q,[t[24]||(t[24]=v('<div class="mb-8" data-v-c801c377><div class="flex items-center justify-between" data-v-c801c377><div data-v-c801c377><h1 class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent" data-v-c801c377> Grading Center </h1><p class="text-gray-600 mt-2" data-v-c801c377>Review and grade student submissions with detailed feedback</p></div><div class="flex items-center space-x-4" data-v-c801c377><div class="relative" data-v-c801c377><input type="text" placeholder="Search submissions..." class="bg-white border border-gray-300 rounded-classroom pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64" data-v-c801c377><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none" data-v-c801c377><span class="material-icons text-gray-400 text-sm" data-v-c801c377>search</span></div></div><button class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-classroom transition-colors flex items-center space-x-2" data-v-c801c377><span class="material-icons text-sm" data-v-c801c377>filter_list</span><span data-v-c801c377>Filter</span></button></div></div></div>',1)),e("div",H,[e("div",K,[e("div",W,[e("div",null,[t[0]||(t[0]=e("p",{class:"text-gray-600 text-sm font-medium"},"Pending Grading",-1)),e("p",X,r(i.value.length),1),t[1]||(t[1]=e("p",{class:"text-red-500 text-sm mt-2 flex items-center"},[e("span",{class:"material-icons text-sm mr-1"},"schedule"),p(" Needs attention ")],-1))]),t[2]||(t[2]=e("div",{class:"w-12 h-12 bg-blue-100 rounded-classroom flex items-center justify-center"},[e("span",{class:"material-icons text-blue-600 text-xl"},"pending")],-1))])]),e("div",Y,[e("div",Z,[e("div",null,[t[3]||(t[3]=e("p",{class:"text-gray-600 text-sm font-medium"},"Graded Today",-1)),e("p",tt,r($.value),1),t[4]||(t[4]=e("p",{class:"text-green-500 text-sm mt-2 flex items-center"},[e("span",{class:"material-icons text-sm mr-1"},"check_circle"),p(" Great progress ")],-1))]),t[5]||(t[5]=e("div",{class:"w-12 h-12 bg-green-100 rounded-classroom flex items-center justify-center"},[e("span",{class:"material-icons text-green-600 text-xl"},"task_alt")],-1))])]),t[9]||(t[9]=v('<div class="bg-gradient-to-br from-white to-purple-50 rounded-2xl shadow-xl border border-purple-100 p-6 transform hover:scale-105 transition-transform duration-300" data-v-c801c377><div class="flex items-center justify-between" data-v-c801c377><div data-v-c801c377><p class="text-gray-600 text-sm font-medium" data-v-c801c377>Average Grade</p><p class="text-3xl font-bold text-gray-900 mt-1" data-v-c801c377>87%</p><p class="text-orange-500 text-sm mt-2 flex items-center" data-v-c801c377><span class="material-icons text-sm mr-1" data-v-c801c377>trending_up</span> +2.5% improvement </p></div><div class="w-12 h-12 bg-purple-100 rounded-classroom flex items-center justify-center" data-v-c801c377><span class="material-icons text-purple-600 text-xl" data-v-c801c377>grade</span></div></div></div>',1)),e("div",et,[e("div",st,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-gray-600 text-sm font-medium"},"Overdue",-1)),e("p",at,r(O.value),1),t[7]||(t[7]=e("p",{class:"text-red-500 text-sm mt-2 flex items-center"},[e("span",{class:"material-icons text-sm mr-1"},"warning"),p(" Past deadline ")],-1))]),t[8]||(t[8]=e("div",{class:"w-12 h-12 bg-orange-100 rounded-classroom flex items-center justify-center"},[e("span",{class:"material-icons text-orange-600 text-xl"},"error")],-1))])])]),e("div",ot,[e("div",nt,[e("div",rt,[t[16]||(t[16]=v('<div class="p-6 border-b border-gray-200" data-v-c801c377><div class="flex items-center justify-between" data-v-c801c377><div data-v-c801c377><h2 class="text-xl font-bold text-gray-900" data-v-c801c377>Submissions Pending Grading</h2><p class="text-gray-600 mt-1" data-v-c801c377>Review and provide feedback for student work</p></div><div class="flex items-center space-x-3" data-v-c801c377><button class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-classroom transition-colors flex items-center space-x-2" data-v-c801c377><span class="material-icons text-sm" data-v-c801c377>sort</span><span data-v-c801c377>Sort</span></button><button class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-classroom transition-colors flex items-center space-x-2" data-v-c801c377><span class="material-icons text-sm" data-v-c801c377>refresh</span><span data-v-c801c377>Refresh</span></button></div></div></div>',1)),e("div",dt,[(u(!0),m(y,null,_(i.value,s=>(u(),m("div",{key:s.key,class:"p-6 hover:bg-gray-50 transition-colors"},[e("div",it,[e("div",lt,[e("div",ct,r(x(s.sub.userId).charAt(0)),1),e("div",null,[e("h3",ut,r(s.assignment.title),1),e("p",mt,r(x(s.sub.userId))+" • "+r(S(s.assignment.classId)),1),e("p",vt,"Submitted: "+r(b(s.sub.submittedAt)),1)])]),e("div",gt,[e("span",{class:D([w(s).class,"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[e("span",xt,r(w(s).icon),1),p(" "+r(w(s).text),1)],2)])]),e("div",ft,[e("div",pt,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Grade (0-100)",-1)),e("div",bt,[G(e("input",{"onUpdate:modelValue":o=>s.value=o,type:"number",min:"0",max:"100",placeholder:"Enter grade",class:"flex-1 p-3 border border-gray-300 rounded-classroom focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"},null,8,wt),[[T,s.value,void 0,{number:!0}]]),e("div",ht,r(s.value||"--")+"% ",1)])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Letter Grade",-1)),e("div",yt,[(u(),m(y,null,_(I,o=>e("button",{key:o.value,onClick:n=>s.value=o.value,class:D([s.value===o.value?"bg-blue-500 text-white":"bg-white text-gray-700 border border-gray-300","flex-1 py-2 rounded-classroom text-sm font-medium transition-colors"])},r(o.letter),11,_t)),64))])])]),e("div",kt,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Feedback",-1)),G(e("textarea",{"onUpdate:modelValue":o=>s.feedback=o,rows:"3",placeholder:"Provide constructive feedback for the student...",class:"w-full p-3 border border-gray-300 rounded-classroom focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"},null,8,St),[[T,s.feedback]])]),e("div",At,[e("div",Dt,[e("button",{onClick:o=>R(s),class:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 py-2 rounded-classroom transition-all duration-200 shadow-lg transform hover:scale-105 flex items-center space-x-2"},[...t[13]||(t[13]=[e("span",{class:"material-icons text-sm"},"save",-1),e("span",null,"Save Grade",-1)])],8,Gt),e("button",{onClick:o=>V(s),class:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-classroom transition-colors"}," Skip ",8,Tt)]),e("div",jt,[t[14]||(t[14]=e("span",{class:"material-icons text-sm"},"schedule",-1)),e("span",null,r(F(s.sub.submittedAt)),1)])])])]))),128))]),i.value.length===0?(u(),m("div",Nt,[...t[15]||(t[15]=[v('<div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4" data-v-c801c377><span class="material-icons text-gray-400 text-3xl" data-v-c801c377>celebration</span></div><h3 class="text-lg font-medium text-gray-900 mb-2" data-v-c801c377>All caught up!</h3><p class="text-gray-500 mb-4" data-v-c801c377>No submissions pending grading</p><button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-classroom transition-colors" data-v-c801c377> Check for New Submissions </button>',4)])])):A("",!0)])]),e("div",Ct,[e("div",{class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6"},[t[20]||(t[20]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Quick Actions",-1)),e("div",{class:"space-y-3"},[e("button",{onClick:B,class:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white p-4 rounded-classroom transition-all duration-200 shadow-lg transform hover:scale-105 flex items-center justify-between"},[...t[17]||(t[17]=[v('<div class="flex items-center space-x-3" data-v-c801c377><span class="material-icons text-xl" data-v-c801c377>download</span><div class="text-left" data-v-c801c377><div class="font-semibold" data-v-c801c377>Export Grades</div><div class="text-blue-100 text-xs" data-v-c801c377>Download grade reports</div></div></div><span class="material-icons text-xl" data-v-c801c377>arrow_forward</span>',2)])]),e("button",{onClick:L,class:"w-full bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white p-4 rounded-classroom transition-all duration-200 shadow-lg transform hover:scale-105 flex items-center justify-between"},[...t[18]||(t[18]=[v('<div class="flex items-center space-x-3" data-v-c801c377><span class="material-icons text-xl" data-v-c801c377>assignment</span><div class="text-left" data-v-c801c377><div class="font-semibold" data-v-c801c377>View All Assignments</div><div class="text-green-100 text-xs" data-v-c801c377>Manage assignments</div></div></div><span class="material-icons text-xl" data-v-c801c377>arrow_forward</span>',2)])]),e("button",{onClick:M,class:"w-full bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white p-4 rounded-classroom transition-all duration-200 shadow-lg transform hover:scale-105 flex items-center justify-between"},[...t[19]||(t[19]=[v('<div class="flex items-center space-x-3" data-v-c801c377><span class="material-icons text-xl" data-v-c801c377>email</span><div class="text-left" data-v-c801c377><div class="font-semibold" data-v-c801c377>Send Feedback</div><div class="text-orange-100 text-xs" data-v-c801c377>Notify students</div></div></div><span class="material-icons text-xl" data-v-c801c377>arrow_forward</span>',2)])])])]),e("div",It,[t[22]||(t[22]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Recent Grading Activity",-1)),e("div",Et,[(u(!0),m(y,null,_(k.value,s=>(u(),m("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-classroom"},[e("div",$t,[t[21]||(t[21]=e("div",{class:"w-8 h-8 bg-blue-100 rounded-classroom flex items-center justify-center"},[e("span",{class:"material-icons text-blue-600 text-sm"},"grade")],-1)),e("div",null,[e("div",Ot,r(s.studentName),1),e("div",Ut,r(s.assignmentTitle),1)])]),e("div",Ft,[e("div",Rt,r(s.grade)+"%",1),e("div",Vt,r(s.time),1)])]))),128)),k.value.length===0?(u(),m("div",Bt," No recent grading activity ")):A("",!0)])]),t[23]||(t[23]=v('<div class="bg-white rounded-2xl shadow-xl border border-gray-100 p-6" data-v-c801c377><h3 class="text-lg font-bold text-gray-900 mb-4" data-v-c801c377>Grade Distribution</h3><div class="space-y-3" data-v-c801c377><div class="flex items-center justify-between" data-v-c801c377><span class="text-sm text-gray-600" data-v-c801c377>A (90-100)</span><span class="text-sm font-semibold text-green-600" data-v-c801c377>35%</span></div><div class="flex items-center justify-between" data-v-c801c377><span class="text-sm text-gray-600" data-v-c801c377>B (80-89)</span><span class="text-sm font-semibold text-blue-600" data-v-c801c377>42%</span></div><div class="flex items-center justify-between" data-v-c801c377><span class="text-sm text-gray-600" data-v-c801c377>C (70-79)</span><span class="text-sm font-semibold text-yellow-600" data-v-c801c377>18%</span></div><div class="flex items-center justify-between" data-v-c801c377><span class="text-sm text-gray-600" data-v-c801c377>D/F (0-69)</span><span class="text-sm font-semibold text-red-600" data-v-c801c377>5%</span></div></div></div>',1))])])]))}},Jt=J(Lt,[["__scopeId","data-v-c801c377"],["__file","/Users/mac/Development/startups/online2/src/views/teacher/Grading.vue"]]);export{Jt as default};
