import{_ as H,u as K,G as W,K as Y,M as q,r as _,c as x,o as J,a as c,b as u,l as Q,y as X,e,t as i,F as w,g as k,D as Z,h as f,n as D,k as ss}from"./index-0bf52f7e.js";import{L as es}from"./LoadingSpinner-2af1b5d3.js";import{E as ts}from"./ErrorAlert-2c2024a2.js";/* empty css                                                                       *//* empty css                                                                   */const os={class:"p-6 max-w-7xl mx-auto"},ns={key:1},as={class:"mb-8"},rs={class:"flex items-center justify-between"},is={class:"flex items-center space-x-4"},ls={class:"text-right"},ds={class:"text-2xl font-bold text-classroom-primary"},cs={class:"text-right"},us={class:"text-2xl font-bold text-green-600"},ms={class:"text-right"},gs={class:"text-2xl font-bold text-orange-600"},xs={class:"flex flex-wrap gap-2 mb-6"},ps=["onClick"],fs={class:"space-y-6"},bs={class:"p-4 border-b border-classroom-gray-200 bg-gradient-to-r from-blue-50 to-purple-50"},vs={class:"flex items-center justify-between"},ys={class:"text-xl font-medium text-classroom-gray-900"},hs={class:"text-classroom-gray-600"},_s={class:"text-right"},ws={class:"text-sm font-medium text-classroom-gray-700"},ks={class:"divide-y divide-classroom-gray-100"},Ds=["onClick"],Is={class:"flex items-start justify-between"},Cs={class:"flex-1"},Ss={class:"flex items-center space-x-2 mb-2"},As={class:"font-medium text-classroom-gray-900"},Fs={key:0,class:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded-full font-medium"},Ns={key:1,class:"px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs rounded-full font-medium"},Ts={class:"text-sm text-classroom-gray-600 mb-3"},$s={class:"flex items-center flex-wrap gap-3 text-xs"},Bs={class:"flex items-center space-x-1 text-classroom-gray-500"},Gs={class:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full font-medium"},Ls={class:"material-icons text-xs align-middle mr-1"},Ps={key:1,class:"px-2 py-1 bg-green-100 text-green-700 rounded-full font-medium"},Us={key:0,class:"p-8 text-center text-classroom-gray-500"},Vs={key:0,class:"text-center py-16"},js={__name:"Classwork",setup(Es){const v=K(),F=W(),I=Y(),r=q(),y=_(!1),b=_(null),p=_("all"),N=[{id:"all",name:"All"},{id:"pending",name:"Pending"},{id:"submitted",name:"Submitted"},{id:"graded",name:"Graded"}],m=x(()=>F.currentUser),T=x(()=>m.value?I.getCoursesForUser(m.value.id):[]),C=x(()=>T.value.filter(o=>r.assignments.some(s=>s.courseId===o.id))),$=x(()=>r.assignments.length),B=x(()=>r.submissions.filter(o=>{var s;return o.studentId===((s=m.value)==null?void 0:s.id)&&o.status==="submitted"}).length),G=x(()=>{const o=r.submissions.filter(s=>{var t;return s.studentId===((t=m.value)==null?void 0:t.id)}).map(s=>s.assignmentId);return r.assignments.filter(s=>!o.includes(s.id)).length}),L=o=>{var n;let s=0;const t=(n=m.value)==null?void 0:n.id;switch(o){case"all":s=r.assignments.length;break;case"pending":const l=r.submissions.filter(d=>d.studentId===t).map(d=>d.assignmentId);s=r.assignments.filter(d=>!l.includes(d.id)).length;break;case"submitted":s=r.submissions.filter(d=>d.studentId===t&&d.status==="submitted"&&!d.grade).length;break;case"graded":s=r.submissions.filter(d=>d.studentId===t&&d.grade).length;break}return s},g=o=>{const s=r.submissions.find(t=>{var n;return t.assignmentId===o.id&&t.studentId===((n=m.value)==null?void 0:n.id)});return(s==null?void 0:s.status)||null},S=o=>{const s=r.submissions.find(t=>{var n;return t.assignmentId===o.id&&t.studentId===((n=m.value)==null?void 0:n.id)});return(s==null?void 0:s.grade)||null},P=o=>{switch(o){case"submitted":return"bg-green-100 text-green-700";case"graded":return"bg-blue-100 text-blue-700";case"missing":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},U=o=>{switch(o){case"submitted":return"check_circle";case"graded":return"star";case"missing":return"error";default:return"pending"}},V=o=>{switch(o){case"submitted":return"Submitted";case"graded":return"Graded";case"missing":return"Missing";default:return"Pending"}},j=o=>{const s=g(o);return s==="submitted"||s==="graded"?!1:new Date(o.dueDate)<new Date},E=o=>{const s=g(o);if(s==="submitted"||s==="graded")return!1;const l=(new Date(o.dueDate)-new Date)/(1e3*60*60);return l>0&&l<=48},h=o=>{var n;const s=(n=m.value)==null?void 0:n.id;let t=r.assignments.filter(l=>l.courseId===o);switch(p.value){case"pending":const l=r.submissions.filter(a=>a.studentId===s).map(a=>a.assignmentId);t=t.filter(a=>!l.includes(a.id));break;case"submitted":const d=r.submissions.filter(a=>a.studentId===s&&a.status==="submitted"&&!a.grade).map(a=>a.assignmentId);t=t.filter(a=>d.includes(a.id));break;case"graded":const z=r.submissions.filter(a=>a.studentId===s&&a.grade).map(a=>a.assignmentId);t=t.filter(a=>z.includes(a.id));break}return t.sort((l,d)=>new Date(l.dueDate)-new Date(d.dueDate))},M=o=>{const s=new Date(o),t=new Date,n=s.getTime()-t.getTime(),l=Math.ceil(n/(1e3*60*60*24));return l===0?"today":l===1?"tomorrow":l<7?`in ${l} days`:`on ${s.toLocaleDateString()}`},O=o=>{v.push(`/student/classwork/${o.id}`)},R=()=>{v.back()},A=async()=>{y.value=!0,b.value=null;try{await Promise.all([I.loadCourses(),r.loadAssignments()]),r.loadFromStorage()}catch(o){b.value="Failed to load assignments. Please try again.",console.error("Error loading classwork data:",o)}finally{y.value=!1}};return J(()=>{A()}),(o,s)=>(c(),u("div",os,[y.value?(c(),Q(es,{key:0,message:"Loading your assignments..."})):(c(),u("div",ns,[X(ts,{error:b.value,retry:!0,onDismiss:s[0]||(s[0]=t=>b.value=null),onRetry:A},null,8,["error"]),e("div",as,[e("div",{class:"flex items-center mb-4"},[e("button",{onClick:R,class:"flex items-center space-x-2 text-classroom-gray-600 hover:text-classroom-primary transition-colors mb-2"},[...s[2]||(s[2]=[e("span",{class:"material-icons"},"arrow_back",-1),e("span",null,"Back",-1)])])]),e("div",rs,[s[6]||(s[6]=e("div",null,[e("h1",{class:"text-3xl font-medium text-classroom-gray-900 mb-2"},"Classwork"),e("p",{class:"text-classroom-gray-600"},"All your assignments across all classes")],-1)),e("div",is,[e("div",ls,[e("div",ds,i($.value),1),s[3]||(s[3]=e("div",{class:"text-xs text-classroom-gray-500"},"Total",-1))]),e("div",cs,[e("div",us,i(B.value),1),s[4]||(s[4]=e("div",{class:"text-xs text-classroom-gray-500"},"Submitted",-1))]),e("div",ms,[e("div",gs,i(G.value),1),s[5]||(s[5]=e("div",{class:"text-xs text-classroom-gray-500"},"Pending",-1))])])])]),e("div",xs,[(c(),u(w,null,k(N,t=>e("button",{key:t.id,onClick:n=>p.value=t.id,class:D(["px-4 py-2 rounded-classroom transition-all duration-200 flex items-center space-x-2",p.value===t.id?"bg-classroom-primary text-white shadow-lg scale-105":"bg-white text-classroom-gray-700 hover:bg-classroom-gray-50 classroom-shadow hover:scale-102"])},[e("span",null,i(t.name),1),e("span",{class:D(["px-2 py-0.5 rounded-full text-xs font-medium",p.value===t.id?"bg-white/20":"bg-gray-200"])},i(L(t.id)),3)],10,ps)),64))]),e("div",fs,[(c(!0),u(w,null,k(C.value,t=>(c(),u("div",{key:t.id,class:"bg-white rounded-classroom classroom-shadow overflow-hidden"},[e("div",bs,[e("div",vs,[e("div",null,[e("h2",ys,i(t.name),1),e("p",hs,i(t.teacherName),1)]),e("div",_s,[e("div",ws,i(h(t.id).length)+" assignments ",1)])])]),e("div",ks,[(c(!0),u(w,null,k(h(t.id),n=>(c(),u("div",{key:n.id,class:"p-4 hover:bg-classroom-gray-50 transition-colors cursor-pointer",onClick:l=>O(n)},[e("div",Is,[e("div",Cs,[e("div",Ss,[e("h3",As,i(n.title),1),j(n)?(c(),u("span",Fs," Overdue ")):E(n)?(c(),u("span",Ns," Due Soon ")):f("",!0)]),e("p",Ts,i(n.description||"No description"),1),e("div",$s,[e("span",Bs,[s[7]||(s[7]=e("span",{class:"material-icons text-sm"},"schedule",-1)),e("span",null,"Due "+i(M(n.dueDate)),1)]),e("span",Gs,i(n.points)+" points ",1),g(n)?(c(),u("span",{key:0,class:D(["px-2 py-1 rounded-full font-medium",P(g(n))])},[e("span",Ls,i(U(g(n))),1),ss(" "+i(V(g(n))),1)],2)):f("",!0),S(n)?(c(),u("span",Ps," Grade: "+i(S(n))+"/"+i(n.points),1)):f("",!0)])]),s[8]||(s[8]=e("span",{class:"material-icons text-classroom-gray-400"},"chevron_right",-1))])],8,Ds))),128))]),h(t.id).length===0?(c(),u("div",Us,[s[9]||(s[9]=e("span",{class:"material-icons text-4xl mb-2 opacity-50"},"assignment",-1)),e("p",null,"No "+i(p.value)+" assignments",1)])):f("",!0)]))),128))]),C.value.length===0?(c(),u("div",Vs,[s[10]||(s[10]=e("div",{class:"w-24 h-24 bg-classroom-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("span",{class:"material-icons text-classroom-gray-400 text-4xl"},"assignment")],-1)),s[11]||(s[11]=e("h3",{class:"text-xl font-medium text-classroom-gray-900 mb-2"},"No assignments yet",-1)),s[12]||(s[12]=e("p",{class:"text-classroom-gray-600 mb-6"},"Assignments will appear here when your teachers create them",-1)),e("button",{onClick:s[1]||(s[1]=t=>Z(v).push("/student/classes")),class:"px-6 py-2 bg-classroom-primary text-white rounded-classroom hover:bg-blue-700 transition-colors"}," View Your Classes ")])):f("",!0)]))]))}},Ks=H(js,[["__file","/Users/mac/Development/startups/online2/src/views/student/Classwork.vue"]]);export{Ks as default};
