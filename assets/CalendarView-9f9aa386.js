import{_ as U,u as V,G as j,K as B,M as J,r as O,c as h,o as Y,a as i,b as c,e,t as u,F as y,g as x,n as D,w as H,k as z,h as G}from"./index-0bf52f7e.js";const K={class:"p-6 max-w-7xl mx-auto"},P={class:"bg-white rounded-classroom classroom-shadow p-6"},R={class:"flex items-center justify-between mb-6"},W={class:"text-xl font-medium text-classroom-gray-900"},q={class:"grid grid-cols-7 gap-1 mb-2"},Q={class:"grid grid-cols-7 gap-1"},X=["onClick"],Z={class:"flex items-center justify-between mb-1"},tt={class:"space-y-1"},st=["onClick","title"],et={key:0,class:"text-[10px] opacity-75"},ot={class:"mt-8"},at={class:"bg-white rounded-classroom classroom-shadow overflow-hidden"},rt={key:0,class:"p-8 text-center text-classroom-gray-500"},nt={key:1,class:"divide-y divide-classroom-gray-100"},it=["onClick"],ct={class:"flex items-start justify-between"},lt={class:"flex-1"},dt={class:"font-medium text-classroom-gray-900 mb-1"},ut={class:"text-sm text-classroom-gray-600 mb-2"},mt={class:"flex items-center space-x-4 text-xs text-classroom-gray-500"},gt={class:"flex items-center space-x-1"},pt={__name:"CalendarView",setup(ht){const _=V();j();const v=B(),f=J(),d=O(new Date),C=h(()=>d.value.toLocaleDateString("en-US",{month:"long",year:"numeric"})),b=h(()=>{const t=d.value.getFullYear(),o=d.value.getMonth(),s=new Date(t,o,1),a=new Date(t,o+1,0),l=new Date(s);l.setDate(l.getDate()-l.getDay());const r=new Date(a);r.setDate(r.getDate()+(6-r.getDay()));const n=[],m=new Date;m.setHours(0,0,0,0);for(let p=new Date(l);p<=r;p.setDate(p.getDate()+1)){const g=new Date(p),A=$(g);n.push({date:new Date(g),day:g.getDate(),isCurrentMonth:g.getMonth()===o,isToday:g.toDateString()===m.toDateString(),events:A})}return n}),w=h(()=>{const t=new Date;t.setHours(0,0,0,0);const o=[],s=JSON.parse(localStorage.getItem("mock:currentUser")||"null");return JSON.parse(localStorage.getItem("mock:classes")||"[]").filter(r=>r.students&&r.students.includes(s==null?void 0:s.id)).forEach(r=>{const n=new Date(r.startAt);n>=t&&o.push({id:`class-${r.id}`,title:r.title,description:`${r.subject||"Class"} â€¢ ${r.level||"All Levels"}`,date:n,time:n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),duration:r.duration||60,type:"class",courseId:r.id})}),f.assignments.forEach(r=>{const n=new Date(r.dueDate);if(n>=t){const m=v.getCourseById(r.courseId);o.push({id:`assignment-${r.id}`,title:r.title,description:`Due for ${(m==null?void 0:m.name)||"Unknown Course"}`,date:n,type:"assignment",assignmentId:r.id,courseId:r.courseId})}}),o.sort((r,n)=>r.date-n.date).slice(0,10)}),k=h(()=>{const t=JSON.parse(localStorage.getItem("mock:currentUser")||"null");return JSON.parse(localStorage.getItem("mock:classes")||"[]").filter(s=>s.students&&s.students.includes(t==null?void 0:t.id))}),$=t=>{const o=[],s=t.toDateString();return k.value.forEach(a=>{const l=new Date(a.startAt);l.toDateString()===s&&o.push({id:`class-${a.id}`,title:a.title,type:"class",courseId:a.id,time:l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})}),f.assignments.forEach(a=>{new Date(a.dueDate).toDateString()===s&&o.push({id:`assignment-${a.id}`,title:a.title,type:"assignment",assignmentId:a.id,courseId:a.courseId})}),o},M=t=>{switch(t){case"class":return"bg-classroom-primary bg-opacity-10 text-classroom-primary";case"assignment":return"bg-classroom-secondary bg-opacity-10 text-classroom-secondary";default:return"bg-classroom-gray-100 text-classroom-gray-700"}},I=t=>{switch(t){case"class":return"chip-primary";case"assignment":return"chip-secondary";default:return"chip-gray"}},E=t=>{if(t.type==="class"){const o=t.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),s=t.time||t.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),a=t.duration?` (${t.duration} min)`:"";return`${o} at ${s}${a}`}else return`Due ${t.date.toLocaleDateString()}`},T=()=>{d.value=new Date(d.value.getFullYear(),d.value.getMonth()-1,1)},L=()=>{d.value=new Date(d.value.getFullYear(),d.value.getMonth()+1,1)},N=t=>{console.log("Selected date:",t)},S=t=>{t.type==="class"?_.push(`/student/classes/${t.courseId}`):t.type==="assignment"&&_.push(`/student/classwork/${t.assignmentId}`)};Y(async()=>{try{await Promise.all([v.loadCourses(),f.loadAssignments()])}catch(t){console.error("Error loading calendar data:",t),F("Error loading calendar information")}});const F=t=>{window.showToast&&window.showToast(t)};return(t,o)=>(i(),c("div",K,[o[6]||(o[6]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-medium text-classroom-gray-900 mb-2"},"Calendar"),e("p",{class:"text-classroom-gray-600"},"Your class schedule and assignment due dates")],-1)),e("div",P,[e("div",R,[e("h2",W,u(C.value),1),e("div",{class:"flex items-center space-x-2"},[e("button",{onClick:T,class:"p-2 rounded-classroom hover:bg-classroom-gray-100 transition-colors"},[...o[0]||(o[0]=[e("span",{class:"material-icons"},"chevron_left",-1)])]),e("button",{onClick:L,class:"p-2 rounded-classroom hover:bg-classroom-gray-100 transition-colors"},[...o[1]||(o[1]=[e("span",{class:"material-icons"},"chevron_right",-1)])])])]),e("div",q,[(i(),c(y,null,x(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=>e("div",{key:s,class:"text-center text-sm font-medium text-classroom-gray-500 py-2"},u(s),1)),64))]),e("div",Q,[(i(!0),c(y,null,x(b.value,s=>(i(),c("div",{key:s.date,class:D(["min-h-24 border border-classroom-gray-200 p-2",{"bg-classroom-gray-50":!s.isCurrentMonth,"hover:bg-classroom-gray-50 cursor-pointer":s.isCurrentMonth}]),onClick:a=>s.isCurrentMonth&&N(s.date)},[e("div",Z,[e("span",{class:D(["text-sm font-medium",{"text-classroom-gray-400":!s.isCurrentMonth,"text-classroom-gray-900":s.isCurrentMonth&&!s.isToday,"text-classroom-primary bg-classroom-primary rounded-full w-6 h-6 flex items-center justify-center":s.isToday}])},u(s.day),3)]),e("div",tt,[(i(!0),c(y,null,x(s.events,a=>(i(),c("div",{key:a.id,class:D(["text-xs p-1 rounded-classroom truncate cursor-pointer",M(a.type)]),onClick:H(l=>S(a),["stop"]),title:a.time?`${a.title} at ${a.time}`:a.title},[z(u(a.title)+" ",1),a.time?(i(),c("div",et,u(a.time),1)):G("",!0)],10,st))),128))])],10,X))),128))])]),e("div",ot,[o[5]||(o[5]=e("h2",{class:"text-2xl font-medium text-classroom-gray-900 mb-6"},"Upcoming Events",-1)),e("div",at,[w.value.length===0?(i(),c("div",rt,[...o[2]||(o[2]=[e("span",{class:"material-icons text-4xl mb-2 opacity-50"},"event",-1),e("p",null,"No upcoming events",-1)])])):(i(),c("div",nt,[(i(!0),c(y,null,x(w.value,s=>(i(),c("div",{key:s.id,class:"p-4 hover:bg-classroom-gray-50 transition-colors cursor-pointer",onClick:a=>S(s)},[e("div",ct,[e("div",lt,[e("h3",dt,u(s.title),1),e("p",ut,u(s.description),1),e("div",mt,[e("span",gt,[o[3]||(o[3]=e("span",{class:"material-icons text-sm"},"schedule",-1)),e("span",null,u(E(s)),1)]),e("span",{class:D(["chip",I(s.type)])},u(s.type==="class"?"Class":"Assignment"),3)])]),o[4]||(o[4]=e("span",{class:"material-icons text-classroom-gray-400"},"chevron_right",-1))])],8,it))),128))]))])])]))}},xt=U(pt,[["__file","/Users/mac/Development/startups/online2/src/views/student/CalendarView.vue"]]);export{xt as default};
